# 第5章：存储层次与I/O协同

> 目标：压缩记忆存储金字塔、Cache/TLB/虚拟存储与外存调度的要点，必要时通过索引返回原笔记查看公式或例题。  
> 覆盖主题：18-存储层次结构、19-Cache技术、20-虚拟存储、21-辅助存储  
> 最后更新：2025 年 1 月

---

## 知识点简要介绍

1. **存储层次与局部性**  
   - 局部性原则（时间/空间）是分级设计依据；典型层次：寄存器 → L1/L2/L3 Cache → 主存 → 辅存。  
   - 带宽/延迟/容量呈梯度分布，平均访问时间 `AMAT = HitTime + MissRate × MissPenalty`。

2. **Cache 组织与性能**  
   - 映射：直接/全相联/组相联；字段拆分：Tag / Index / Offset。  
   - 替换：LRU/FIFO/Random；写策略：写直达 vs 写回、写分配 vs 非写分配；多级 Cache 与一致性（MESI）。

3. **虚拟存储与页面管理**  
   - 页式/段式/段页式概念，TLB 缓存页表项；缺页中断流程及开销。  
   - 页面置换：FIFO、LRU、Optimal、Clock；工作集与抖动控制。

4. **主存与DRAM控制**  
   - 行/列地址选通（RAS/CAS）、刷新机制、存储银共产党 (bank) 并行。  
   - SDRAM/DDR/LPDDR 等速率指标，影响内存带宽与延迟。

5. **辅助存储与调度**  
   - 磁盘结构：柱面/磁道/扇区；定位时间 = 寻道 + 旋转 + 传输。  
   - 调度算法：FCFS、SSTF、SCAN、C-SCAN、LOOK；RAID 各级别的性能与冗余权衡。

---

## 详细内容索引

| 主题                    | 原文笔记            | 说明                             |
| --------------------- | --------------- | ------------------------------ |
| 存储层次、局部性原理、AMAT 计算    | `18-存储层次结构.md`  | 各层特性表、访问时间公式、热点分析示例            |
| Cache 映射/替换/写策略、多级一致性 | `19-Cache技术.md` | 字段划分、命中率推导、MESI 四态、性能算例        |
| 虚拟存储、TLB、页面置换算法       | `20-虚拟存储.md`    | 页表结构、缺页处理流程、FIFO/LRU/Clock 对比  |
| 主存实现、磁盘与RAID、调度算法     | `21-辅助存储.md`    | DRAM 控制时序、磁盘调度与吞吐估算、RAID0~6 特性 |

> 阅读顺序建议：先看 `18` 理清层次与公式，再通过 `19` 熟悉 Cache 细节，之后在 `20/21` 完整掌握虚拟存储与外存调度。

---

**说明**：本章保留提要与索引，具体推导、例题与图示请参阅 `计算机组成原理/1-核心笔记/精简版/18~21`。后续完成全书整理后，将同步目录并清理旧版 A5 资料。
