# 集合框架：Java 数据的“收纳盒”

如果你只会用数组，那开发效率就太低了。Java 集合框架提供了一套高性能的工具类。

---

## 1. 集合大纲 (Collection)

- **List (有序、可重复)**：
    - **ArrayList**：底层是数组。查得快，增删慢（因为要挪位置）。
    - **LinkedList**：底层是双向链表。查得慢，增删快。
- **Set (无序、不可重复)**：
    - **HashSet**：底层是 HashMap。速度最快。
    - **TreeSet**：可以排序。
- **Queue (队列)**：先进先出。

---

## 2. 键值对大纲 (Map)

- **HashMap** (最常用)：
    - 底层：**数组 + 链表 + 红黑树** (Java 8 改进)。
    - 线程不安全。
- **ConcurrentHashMap**：
    - 线程安全，性能极高。面试必考！
- **TreeMap**：按 Key 排序。

---

## 3. HashMap 的工作原理（面试核弹头）

1.  **存储**：通过 `hashCode()` 计算下标，把数据放进数组。
2.  **碰撞**：如果两个数据的下标一样，就用链表连起来。
3.  **进化**：如果链表太长（超过 8），就变成红黑树，提高查找速度。

---

## 4. 集合的遍历

1.  **Iterator (迭代器)**：最正宗的做法，遍历时可以安全删除元素。
2.  **增强 for 循环**：底层其实也是迭代器。
3.  **Stream 流 (Java 8)**：最优雅的做法。

---

## 5. 面试高频问答
### Q1：ArrayList 和 LinkedList 怎么选？
**答**：查多改少选 ArrayList；改多查少选 LinkedList。实际上，90% 的场景都用 ArrayList。

### Q2：HashMap 为什么线程不安全？
**答**：多线程下扩容可能会导致数据丢失或死循环。多线程场景请使用 `ConcurrentHashMap`。
