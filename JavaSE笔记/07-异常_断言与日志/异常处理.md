# 异常处理：程序的“保险丝”

程序运行难免出错，Java 的异常机制就是为了让程序在出错时能“优雅”地处理，而不是直接崩溃。

---

## 1. 异常家族树

- **Throwable** (老祖宗)
    - **Error**：严重错误（如 OOM 内存溢出），程序救不回来，直接等死。
    - **Exception**：可以尝试救一下的错误。
        - **RuntimeException** (运行时异常/非检查异常)：如空指针、数组越界。代码写得好能避免。
        - **Checked Exception** (受检异常/编译时异常)：如 IO 异常、SQL 异常。编译器强制你处理，不处理不给编译。

---

## 2. 捕获三部曲：try-catch-finally

- **try**：包裹可能出事的代码。
- **catch**：出事了怎么办（捕获异常）。
- **finally**：不管出不出事，都必须执行的代码（比如关掉数据库连接）。

> **面试必问**：如果在 `try` 里 `return` 了，`finally` 还会执行吗？  
> **答**：会！`finally` 会在 `return` 真正返回之前执行。

---

## 3. throws 与 throw

- **throws** (方法声明处)：甩锅。告诉调用者：“我这可能有错，你调用时记得处理。”
- **throw** (方法体内部)：告状。手动制造一个异常并抛出去。

---

## 4. try-with-resources (Java 7 新特性)

以前关资源要在 `finally` 里写一堆 `close`。现在直接：
```java
try (Scanner in = new Scanner(System.in)) {
    // 自动关流，再也不怕内存泄漏
}
```

---

## 5. 面试高频问答
### Q1：final, finally, finalize 的区别？
**答**：
- **final**：修饰符，表示不可变。
- **finally**：异常处理的一部分。
- **finalize**：Object 类的方法，垃圾回收前调用的，现在已经不推荐使用了。
