# 异常详解：程序翻车时怎么兜底

异常就是程序运行时出问题了。正常情况是一路绿灯，异常就是“出事故”，要有人负责处理。

---

## 1. 异常是啥（大白话版）

- 作用：让错误“被发现、被处理”，而不是悄悄崩掉
- 常见：除零、数组越界、空指针、文件找不到

---

## 2. 异常分类（面试必考）

Java 异常体系从 `Throwable` 开始：

- `Error`：严重错误（比如 JVM 崩了），基本不管
- `Exception`：一般错误，可以处理
  - 受检异常（Checked）：编译时强制处理，比如 `IOException`
  - 运行时异常（Runtime）：运行时才爆，比如 `NullPointerException`

一句话：  
受检异常必须处理，运行时异常可以先不管但容易炸。

---

## 3. 处理异常的三种方式

### 3.1 try-catch-finally

```java
try {
    // 可能出错的代码
} catch (Exception e) {
    // 出错了怎么补救
} finally {
    // 不管成败都执行
}
```

大白话：  
try 是“试一下”，catch 是“翻车就处理”，finally 是“收尾打扫”。

### 3.2 throws 往外抛

```java
public void readFile() throws IOException {
    // 不在这里处理，交给上层
}
```

### 3.3 throw 主动丢异常

```java
if (age < 0) {
    throw new IllegalArgumentException("年龄不能为负数");
}
```

---

## 4. finally 的面试细节

- 一般用于释放资源（关文件、关连接）
- 即使 return，finally 也会执行
- 唯一不执行：JVM 直接挂了（比如 `System.exit(0)`）

---

## 5. 自定义异常（会写就行）

```java
class BizException extends RuntimeException {
    public BizException(String msg) {
        super(msg);
    }
}
```

什么时候用：  
当系统里有“业务规则错误”，用自定义异常更清楚。

---

## 6. 常见异常速记

- `NullPointerException`：对象是 null
- `IndexOutOfBoundsException`：下标越界
- `ClassCastException`：类型强转错了
- `IOException`：IO 出问题

---

## 7. 面试高频问答（大白话版）

### Q1：受检异常和运行时异常的区别？
**答：**
受检异常编译时必须处理；运行时异常编译不管，运行时可能爆。

### Q2：try 里 return 了，finally 还执行吗？
**答：**
执行。finally 是“收尾动作”，先做完再 return。

### Q3：throw 和 throws 有啥区别？
**答：**
`throw` 是“我现在丢一个异常”；`throws` 是“我声明可能会丢，别人来处理”。

### Q4：为什么要自定义异常？
**答：**
业务错误更清晰，定位问题更准确。

---

## 8. 一句话总结

异常就是“翻车提醒”，try-catch 是救援，finally 是收尾，了解分类和处理方式就能稳住。
