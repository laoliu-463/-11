# 并发编程：让 Java 拥有“分身术”

并发编程是为了充分利用多核 CPU 的性能，但同时也带来了线程安全的问题。

---

## 1. 进程 vs 线程

- **进程**：一个跑起来的程序（比如 Chrome）。资源分配的最小单位。
- **线程**：进程里干活的小弟。CPU 调度的最小单位。

---

## 2. 线程创建的三种方式

1.  **继承 Thread 类**：简单，但不能再继承别的类。
2.  **实现 Runnable 接口**：推荐，解耦。
3.  **实现 Callable 接口**：牛逼，可以拿到执行结果（Future）。

---

## 3. 线程安全三要素

要想不出错，必须满足：
1.  **原子性**：一件事要么全做完，要么全不做。
2.  **可见性**：一个线程改了数据，别的线程能立刻看到。
3.  **有序性**：代码执行顺序不乱。

---

## 4. 同步关键字：synchronized & volatile

- **synchronized**：加锁。保证原子性和可见性。就像上厕所要锁门，一次只能进一个。
- **volatile**：轻量级。只保证可见性，不保证原子性。保证变量在各线程间是最新的。

---

## 5. 线程池 (ThreadPoolExecutor)

**核心思想**：不要频繁创建/销毁线程，而是把线程放在池子里重复利用。
- **优点**：降低资源消耗、提高响应速度、方便管理。

---

## 6. 面试高频问答
### Q1：sleep() 和 wait() 的区别？
**答**：
- `sleep()`：带着锁睡觉，谁也不给用。
- `wait()`：放开锁去睡觉，等别人叫醒它。

### Q2：什么是乐观锁和悲观锁？
**答**：
- **悲观锁**：总觉得别人会改，先加锁再说（如 synchronized）。
- **乐观锁**：觉得别人不会改，只在更新时检查一下（如 CAS 机制）。
