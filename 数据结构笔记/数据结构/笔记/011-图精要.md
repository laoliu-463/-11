# å›¾ç²¾è¦

> å›¾çš„æ•°æ®ç»“æ„æ ¸å¿ƒçŸ¥è¯†  
> æœ€åæ›´æ–°ï¼š2025å¹´1æœˆ

## ğŸ“š ç›¸å…³ï¼š[æ ‘ç²¾è¦](./007-æ ‘ç²¾è¦.md) | [æ—¶é—´å¤æ‚åº¦ç²¾è¦](./009-æ—¶é—´å¤æ‚åº¦ç²¾è¦.md) | [ä»£ç ç»ƒä¹ ](../ä»£ç ç»ƒä¹ /06-å›¾/) | [æ€ç»´å¯¼å›¾](./æ•°æ®ç»“æ„æ€ç»´å¯¼å›¾.md)

---

## ğŸ“‘ ç›®å½•

- [ä¸€ã€åŸºæœ¬æ¦‚å¿µ](#ä¸€åŸºæœ¬æ¦‚å¿µ)
  - [1.1 å›¾çš„å®šä¹‰](#11-å›¾çš„å®šä¹‰)
  - [1.2 åŸºæœ¬æœ¯è¯­](#12-åŸºæœ¬æœ¯è¯­)
  - [1.3 å›¾çš„åˆ†ç±»](#13-å›¾çš„åˆ†ç±»)
- [äºŒã€å­˜å‚¨ç»“æ„](#äºŒå­˜å‚¨ç»“æ„)
  - [2.1 é‚»æ¥çŸ©é˜µ](#21-é‚»æ¥çŸ©é˜µ)
  - [2.2 é‚»æ¥è¡¨](#22-é‚»æ¥è¡¨)
  - [2.3 åå­—é“¾è¡¨](#23-åå­—é“¾è¡¨)
  - [2.4 é‚»æ¥å¤šé‡è¡¨](#24-é‚»æ¥å¤šé‡è¡¨)
- [ä¸‰ã€å›¾çš„éå†](#ä¸‰å›¾çš„éå†)
  - [3.1 æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰](#31-æ·±åº¦ä¼˜å…ˆæœç´¢dfs)
  - [3.2 å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰](#32-å¹¿åº¦ä¼˜å…ˆæœç´¢bfs)
- [å››ã€æœ€å°ç”Ÿæˆæ ‘](#å››æœ€å°ç”Ÿæˆæ ‘)
  - [4.1 åŸºæœ¬æ¦‚å¿µ](#41-åŸºæœ¬æ¦‚å¿µ)
  - [4.2 Primç®—æ³•](#42-primç®—æ³•)
  - [4.3 Kruskalç®—æ³•](#43-kruskalç®—æ³•)
- [äº”ã€æœ€çŸ­è·¯å¾„](#äº”æœ€çŸ­è·¯å¾„)
  - [5.1 åŸºæœ¬æ¦‚å¿µ](#51-åŸºæœ¬æ¦‚å¿µ)
  - [5.2 Dijkstraç®—æ³•](#52-dijkstraç®—æ³•)
  - [5.3 Floydç®—æ³•](#53-floydç®—æ³•)
- [å…­ã€æ‹“æ‰‘æ’åº](#å…­æ‹“æ‰‘æ’åº)
  - [6.1 åŸºæœ¬æ¦‚å¿µ](#61-åŸºæœ¬æ¦‚å¿µ)
  - [6.2 ç®—æ³•æ€æƒ³](#62-ç®—æ³•æ€æƒ³)
  - [6.3 Kahnç®—æ³•ï¼ˆåŸºäºBFSï¼‰](#63-kahnç®—æ³•åŸºäºbfs)
  - [6.3.1 DFSç®—æ³•ï¼ˆåŸºäºæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰](#631-dfsç®—æ³•åŸºäºæ·±åº¦ä¼˜å…ˆæœç´¢)
  - [6.4 ç®—æ³•ç¤ºä¾‹è¯¦è§£](#64-ç®—æ³•ç¤ºä¾‹è¯¦è§£)
  - [6.5 Kahnç®—æ³• vs DFSç®—æ³•](#65-kahnç®—æ³•-vs-dfsç®—æ³•)
  - [6.6 å®é™…åº”ç”¨æ¡ˆä¾‹](#66-å®é™…åº”ç”¨æ¡ˆä¾‹)
  - [6.7 æ—¶é—´å¤æ‚åº¦åˆ†æ](#67-æ—¶é—´å¤æ‚åº¦åˆ†æ)
  - [6.8 å¸¸è§è€ƒç‚¹](#68-å¸¸è§è€ƒç‚¹)
- [ä¸ƒã€å…³é”®è·¯å¾„](#ä¸ƒå…³é”®è·¯å¾„)
  - [7.1 åŸºæœ¬æ¦‚å¿µ](#71-åŸºæœ¬æ¦‚å¿µ)
  - [7.2 ç®—æ³•æ€æƒ³](#72-ç®—æ³•æ€æƒ³)
  - [7.3 ç®—æ³•æ­¥éª¤è¯¦è§£](#73-ç®—æ³•æ­¥éª¤è¯¦è§£)
  - [7.4 ç®—æ³•å®ç°](#74-ç®—æ³•å®ç°)
  - [7.5 ç®—æ³•ç¤ºä¾‹è¯¦è§£](#75-ç®—æ³•ç¤ºä¾‹è¯¦è§£)
  - [7.6 åº”ç”¨åœºæ™¯](#76-åº”ç”¨åœºæ™¯)
  - [7.7 æ—¶é—´å¤æ‚åº¦åˆ†æ](#77-æ—¶é—´å¤æ‚åº¦åˆ†æ)
  - [7.8 å¸¸è§è€ƒç‚¹](#78-å¸¸è§è€ƒç‚¹)
- [å…«ã€æ—¶é—´å¤æ‚åº¦æ€»ç»“](#å…«æ—¶é—´å¤æ‚åº¦æ€»ç»“)

---

## ä¸€ã€åŸºæœ¬æ¦‚å¿µ

### 1.1 å›¾çš„å®šä¹‰

**å›¾ï¼ˆGraphï¼‰** æ˜¯ç”±é¡¶ç‚¹ï¼ˆVertexï¼‰å’Œè¾¹ï¼ˆEdgeï¼‰ç»„æˆçš„æ•°æ®ç»“æ„ï¼Œç”¨äºè¡¨ç¤ºå¤šå¯¹å¤šçš„å…³ç³»ã€‚

**å½¢å¼åŒ–å®šä¹‰ï¼š**
- å›¾ G = (V, E)
- Vï¼šé¡¶ç‚¹çš„æœ‰é™éç©ºé›†åˆ
- Eï¼šè¾¹çš„æœ‰é™é›†åˆï¼ˆè¾¹æ˜¯é¡¶ç‚¹çš„æœ‰åºå¯¹æˆ–æ— åºå¯¹ï¼‰

**é€šä¿—ç†è§£ï¼š**
å›¾å°±åƒ"åŸå¸‚äº¤é€šç½‘ç»œ"ï¼š
- é¡¶ç‚¹ = åŸå¸‚
- è¾¹ = åŸå¸‚ä¹‹é—´çš„é“è·¯
- æœ‰å‘å›¾ = å•è¡Œé“
- æ— å‘å›¾ = åŒå‘é“è·¯

---

### 1.2 åŸºæœ¬æœ¯è¯­

#### é¡¶ç‚¹ç›¸å…³

- **é¡¶ç‚¹ï¼ˆVertex/Nodeï¼‰**ï¼šå›¾ä¸­çš„èŠ‚ç‚¹
- **åº¦ï¼ˆDegreeï¼‰**ï¼šä¸é¡¶ç‚¹ç›¸è¿çš„è¾¹çš„æ•°é‡
  - **å…¥åº¦ï¼ˆIn-Degreeï¼‰**ï¼šæŒ‡å‘è¯¥é¡¶ç‚¹çš„è¾¹çš„æ•°é‡ï¼ˆæœ‰å‘å›¾ï¼‰
  - **å‡ºåº¦ï¼ˆOut-Degreeï¼‰**ï¼šä»è¯¥é¡¶ç‚¹å‡ºå‘çš„è¾¹çš„æ•°é‡ï¼ˆæœ‰å‘å›¾ï¼‰
- **é‚»æ¥ç‚¹ï¼ˆAdjacentï¼‰**ï¼šé€šè¿‡è¾¹ç›´æ¥ç›¸è¿çš„é¡¶ç‚¹

#### è¾¹ç›¸å…³

- **è¾¹ï¼ˆEdge/Arcï¼‰**ï¼šè¿æ¥ä¸¤ä¸ªé¡¶ç‚¹çš„çº¿æ®µ
- **æœ‰å‘è¾¹ï¼ˆDirected Edgeï¼‰**ï¼šæœ‰æ–¹å‘çš„è¾¹ï¼Œç”¨æœ‰åºå¯¹ <u, v> è¡¨ç¤º
- **æ— å‘è¾¹ï¼ˆUndirected Edgeï¼‰**ï¼šæ— æ–¹å‘çš„è¾¹ï¼Œç”¨æ— åºå¯¹ (u, v) è¡¨ç¤º
- **æƒï¼ˆWeightï¼‰**ï¼šè¾¹ä¸Šçš„æ•°å€¼ï¼Œè¡¨ç¤ºè·ç¦»ã€æˆæœ¬ç­‰

#### è·¯å¾„ç›¸å…³

- **è·¯å¾„ï¼ˆPathï¼‰**ï¼šä»é¡¶ç‚¹uåˆ°é¡¶ç‚¹vçš„é¡¶ç‚¹åºåˆ—
- **è·¯å¾„é•¿åº¦**ï¼šè·¯å¾„ä¸Šè¾¹çš„æ•°é‡ï¼ˆæˆ–æƒå€¼ä¹‹å’Œï¼‰
- **ç®€å•è·¯å¾„**ï¼šè·¯å¾„ä¸­é¡¶ç‚¹ä¸é‡å¤
- **å›è·¯/ç¯ï¼ˆCycleï¼‰**ï¼šèµ·ç‚¹å’Œç»ˆç‚¹ç›¸åŒçš„è·¯å¾„
- **ç®€å•å›è·¯**ï¼šé™¤èµ·ç‚¹å’Œç»ˆç‚¹å¤–ï¼Œå…¶ä»–é¡¶ç‚¹ä¸é‡å¤çš„å›è·¯

#### è¿é€šæ€§ç›¸å…³

- **è¿é€š**ï¼šæ— å‘å›¾ä¸­ï¼Œé¡¶ç‚¹uåˆ°vå­˜åœ¨è·¯å¾„
- **è¿é€šå›¾**ï¼šä»»æ„ä¸¤ä¸ªé¡¶ç‚¹éƒ½è¿é€šçš„æ— å‘å›¾
- **è¿é€šåˆ†é‡**ï¼šæ— å‘å›¾çš„æå¤§è¿é€šå­å›¾
- **å¼ºè¿é€š**ï¼šæœ‰å‘å›¾ä¸­ï¼Œé¡¶ç‚¹uåˆ°vå’Œvåˆ°uéƒ½å­˜åœ¨è·¯å¾„
- **å¼ºè¿é€šå›¾**ï¼šä»»æ„ä¸¤ä¸ªé¡¶ç‚¹éƒ½å¼ºè¿é€šçš„æœ‰å‘å›¾
- **å¼ºè¿é€šåˆ†é‡**ï¼šæœ‰å‘å›¾çš„æå¤§å¼ºè¿é€šå­å›¾

#### å…¶ä»–æœ¯è¯­

- **å­å›¾ï¼ˆSubgraphï¼‰**ï¼šå›¾çš„é¡¶ç‚¹å’Œè¾¹çš„å­é›†
- **ç”Ÿæˆæ ‘ï¼ˆSpanning Treeï¼‰**ï¼šåŒ…å«æ‰€æœ‰é¡¶ç‚¹çš„è¿é€šå­å›¾ï¼ˆæ ‘ï¼‰
- **å®Œå…¨å›¾**ï¼šä»»æ„ä¸¤ä¸ªé¡¶ç‚¹éƒ½æœ‰è¾¹ç›¸è¿
- **ç¨€ç–å›¾**ï¼šè¾¹æ•°è¿œå°‘äºå®Œå…¨å›¾çš„è¾¹æ•°
- **ç¨ å¯†å›¾**ï¼šè¾¹æ•°æ¥è¿‘å®Œå…¨å›¾çš„è¾¹æ•°

---

### 1.3 å›¾çš„åˆ†ç±»

#### æŒ‰è¾¹çš„æ–¹å‘åˆ†ç±»

1. **æ— å‘å›¾ï¼ˆUndirected Graphï¼‰**
   - è¾¹æ²¡æœ‰æ–¹å‘
   - è¾¹ç”¨ (u, v) è¡¨ç¤º
   - ç¤ºä¾‹ï¼šç¤¾äº¤ç½‘ç»œï¼ˆæœ‹å‹å…³ç³»ï¼‰

2. **æœ‰å‘å›¾ï¼ˆDirected Graph/Digraphï¼‰**
   - è¾¹æœ‰æ–¹å‘
   - è¾¹ç”¨ <u, v> è¡¨ç¤º
   - ç¤ºä¾‹ï¼šç½‘é¡µé“¾æ¥ã€ä»»åŠ¡ä¾èµ–å…³ç³»

#### æŒ‰è¾¹çš„æƒå€¼åˆ†ç±»

1. **æ— æƒå›¾ï¼ˆUnweighted Graphï¼‰**
   - è¾¹æ²¡æœ‰æƒå€¼
   - åªè¡¨ç¤ºè¿æ¥å…³ç³»

2. **æœ‰æƒå›¾/å¸¦æƒå›¾ï¼ˆWeighted Graphï¼‰**
   - è¾¹æœ‰æƒå€¼
   - è¡¨ç¤ºè·ç¦»ã€æˆæœ¬ç­‰
   - ç¤ºä¾‹ï¼šåœ°å›¾ï¼ˆåŸå¸‚é—´è·ç¦»ï¼‰ã€ç½‘ç»œï¼ˆå¸¦å®½ï¼‰

#### æŒ‰è¿é€šæ€§åˆ†ç±»

1. **è¿é€šå›¾**ï¼šä»»æ„ä¸¤ä¸ªé¡¶ç‚¹éƒ½è¿é€š
2. **éè¿é€šå›¾**ï¼šå­˜åœ¨ä¸è¿é€šçš„é¡¶ç‚¹å¯¹

#### ç»¼åˆåˆ†ç±»ç¤ºä¾‹

```
æ— å‘æ— æƒå›¾ï¼šç¤¾äº¤ç½‘ç»œ
æ— å‘æœ‰æƒå›¾ï¼šåœ°å›¾ï¼ˆåŸå¸‚é—´è·ç¦»ï¼‰
æœ‰å‘æ— æƒå›¾ï¼šç½‘é¡µé“¾æ¥å›¾
æœ‰å‘æœ‰æƒå›¾ï¼šä»»åŠ¡ä¾èµ–å›¾ï¼ˆå¸¦æ—¶é—´ï¼‰
```

---

## äºŒã€å­˜å‚¨ç»“æ„

### 2.1 é‚»æ¥çŸ©é˜µ

**é‚»æ¥çŸ©é˜µï¼ˆAdjacency Matrixï¼‰** ä½¿ç”¨äºŒç»´æ•°ç»„è¡¨ç¤ºå›¾çš„è¾¹å…³ç³»ã€‚

**å­˜å‚¨æ–¹å¼ï¼š**
- å¯¹äºå›¾ G = (V, E)ï¼Œä½¿ç”¨ nÃ—n çš„çŸ©é˜µ A
- A[i][j] = 1 è¡¨ç¤ºé¡¶ç‚¹ i å’Œ j ä¹‹é—´æœ‰è¾¹
- A[i][j] = 0 è¡¨ç¤ºé¡¶ç‚¹ i å’Œ j ä¹‹é—´æ²¡æœ‰è¾¹
- å¯¹äºæœ‰æƒå›¾ï¼ŒA[i][j] = æƒå€¼ï¼ˆæ— è¾¹æ—¶ä¸ºâˆï¼‰

**å®ç°ï¼š**

```c
#define MAX_VERTICES 100
#define INF INT_MAX

typedef struct {
    int matrix[MAX_VERTICES][MAX_VERTICES];  // é‚»æ¥çŸ©é˜µ
    int vertexCount;  // é¡¶ç‚¹æ•°
    int directed;     // æ˜¯å¦ä¸ºæœ‰å‘å›¾ (1:æ˜¯, 0:å¦)
    int weighted;     // æ˜¯å¦ä¸ºæœ‰æƒå›¾ (1:æ˜¯, 0:å¦)
} GraphAdjMatrix;

void InitGraphAdjMatrix(GraphAdjMatrix *g, int n, int directed, int weighted) {
    g->vertexCount = n;
    g->directed = directed;
    g->weighted = weighted;
    
    // åˆå§‹åŒ–ï¼šæ— æƒå›¾åˆå§‹åŒ–ä¸º0ï¼Œæœ‰æƒå›¾åˆå§‹åŒ–ä¸ºæ— ç©·å¤§
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < n; j++) {
            if (weighted) {
                g->matrix[i][j] = (i == j) ? 0 : INF;
            } else {
                g->matrix[i][j] = 0;
            }
        }
    }
}

// æ·»åŠ è¾¹
void AddEdgeMatrix(GraphAdjMatrix *g, int from, int to, int weight) {
    g->matrix[from][to] = weight;
    if (!g->directed) {
        g->matrix[to][from] = weight;  // æ— å‘å›¾ï¼Œå¯¹ç§°
    }
}

// æ·»åŠ è¾¹ï¼ˆæ— æƒå›¾ï¼‰
void AddEdgeMatrixUnweighted(GraphAdjMatrix *g, int from, int to) {
    AddEdgeMatrix(g, from, to, 1);
}

// åˆ¤æ–­æ˜¯å¦æœ‰è¾¹
int HasEdgeMatrix(GraphAdjMatrix *g, int from, int to) {
    if (g->weighted) {
        return g->matrix[from][to] != INF && g->matrix[from][to] != 0;
    }
    return g->matrix[from][to] != 0;
}

// è·å–è¾¹çš„æƒå€¼
int GetWeightMatrix(GraphAdjMatrix *g, int from, int to) {
    return g->matrix[from][to];
}
```

**ç¤ºä¾‹ï¼š**

```
æ— å‘å›¾ï¼š
    0---1
    |   |
    2---3

é‚»æ¥çŸ©é˜µï¼š
      0  1  2  3
    0[0  1  1  0]
    1[1  0  0  1]
    2[1  0  0  1]
    3[0  1  1  0]

æœ‰å‘å›¾ï¼š
    0 â†’ 1
    â†“   â†‘
    2 â†’ 3

é‚»æ¥çŸ©é˜µï¼š
      0  1  2  3
    0[0  1  1  0]
    1[0  0  0  0]
    2[0  0  0  1]
    3[0  1  0  0]
```

**ä¼˜ç¼ºç‚¹ï¼š**

âœ… **ä¼˜ç‚¹ï¼š**
- åˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ï¼šO(1)
- æ·»åŠ /åˆ é™¤è¾¹ï¼šO(1)
- é€‚åˆç¨ å¯†å›¾

âŒ **ç¼ºç‚¹ï¼š**
- ç©ºé—´å¤æ‚åº¦ï¼šO(VÂ²)
- éå†æ‰€æœ‰é‚»æ¥ç‚¹ï¼šO(V)
- ä¸é€‚åˆç¨€ç–å›¾ï¼ˆæµªè´¹ç©ºé—´ï¼‰

**æ—¶é—´å¤æ‚åº¦ï¼š**
- ç©ºé—´å¤æ‚åº¦ï¼šO(VÂ²)
- æ·»åŠ è¾¹ï¼šO(1)
- åˆ é™¤è¾¹ï¼šO(1)
- æŸ¥æ‰¾è¾¹ï¼šO(1)
- éå†æ‰€æœ‰è¾¹ï¼šO(VÂ²)

---

### 2.2 é‚»æ¥è¡¨

**é‚»æ¥è¡¨ï¼ˆAdjacency Listï¼‰** ä½¿ç”¨é“¾è¡¨æ•°ç»„è¡¨ç¤ºå›¾çš„è¾¹å…³ç³»ã€‚

**å­˜å‚¨æ–¹å¼ï¼š**
- ä¸ºæ¯ä¸ªé¡¶ç‚¹ç»´æŠ¤ä¸€ä¸ªé“¾è¡¨
- é“¾è¡¨ä¸­å­˜å‚¨è¯¥é¡¶ç‚¹çš„æ‰€æœ‰é‚»æ¥ç‚¹
- å¯¹äºæœ‰æƒå›¾ï¼Œé“¾è¡¨èŠ‚ç‚¹è¿˜å­˜å‚¨è¾¹çš„æƒå€¼

**å®ç°ï¼š**

```c
// è¾¹èŠ‚ç‚¹ï¼ˆé‚»æ¥è¡¨èŠ‚ç‚¹ï¼‰
typedef struct EdgeNode {
    int to;        // ç›®æ ‡é¡¶ç‚¹
    int weight;    // è¾¹çš„æƒå€¼
    struct EdgeNode *next; // ä¸‹ä¸€ä¸ªé‚»æ¥ç‚¹
} EdgeNode;

typedef struct {
    EdgeNode *adjList[MAX_VERTICES];  // é‚»æ¥è¡¨æ•°ç»„
    int vertexCount;     // é¡¶ç‚¹æ•°
    int directed;        // æ˜¯å¦ä¸ºæœ‰å‘å›¾
    int weighted;        // æ˜¯å¦ä¸ºæœ‰æƒå›¾
} GraphAdjList;

void InitGraphAdjList(GraphAdjList *g, int n, int directed, int weighted) {
    g->vertexCount = n;
    g->directed = directed;
    g->weighted = weighted;
    for (int i = 0; i < n; i++) {
        g->adjList[i] = NULL;
    }
}

// åˆ›å»ºæ–°è¾¹èŠ‚ç‚¹
EdgeNode* CreateEdgeNode(int to, int weight) {
    EdgeNode *node = (EdgeNode*)malloc(sizeof(EdgeNode));
    node->to = to;
    node->weight = weight;
    node->next = NULL;
    return node;
}

// æ·»åŠ è¾¹
void AddEdgeList(GraphAdjList *g, int from, int to, int weight) {
    // å¤´æ’æ³•
    EdgeNode *newNode = CreateEdgeNode(to, weight);
    newNode->next = g->adjList[from];
    g->adjList[from] = newNode;
    
    // æ— å‘å›¾ï¼Œæ·»åŠ åå‘è¾¹
    if (!g->directed) {
        EdgeNode *reverseNode = CreateEdgeNode(from, weight);
        reverseNode->next = g->adjList[to];
        g->adjList[to] = reverseNode;
    }
}

// æ·»åŠ è¾¹ï¼ˆæ— æƒå›¾ï¼‰
void AddEdgeListUnweighted(GraphAdjList *g, int from, int to) {
    AddEdgeList(g, from, to, 1);
}

// åˆ¤æ–­æ˜¯å¦æœ‰è¾¹
int HasEdgeList(GraphAdjList *g, int from, int to) {
    EdgeNode *current = g->adjList[from];
    while (current != NULL) {
        if (current->to == to) {
            return 1;
        }
        current = current->next;
    }
    return 0;
}
```

**ç¤ºä¾‹ï¼š**

```
æ— å‘å›¾ï¼š
    0---1
    |   |
    2---3

é‚»æ¥è¡¨ï¼š
0: 1 â†’ 2 â†’ null
1: 0 â†’ 3 â†’ null
2: 0 â†’ 3 â†’ null
3: 1 â†’ 2 â†’ null
```

**ä¼˜ç¼ºç‚¹ï¼š**

âœ… **ä¼˜ç‚¹ï¼š**
- ç©ºé—´å¤æ‚åº¦ï¼šO(V + E)
- éå†æ‰€æœ‰é‚»æ¥ç‚¹ï¼šO(åº¦)
- é€‚åˆç¨€ç–å›¾

âŒ **ç¼ºç‚¹ï¼š**
- åˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ï¼šO(åº¦)
- åˆ é™¤è¾¹ï¼šO(åº¦)
- ä¸é€‚åˆç¨ å¯†å›¾

**æ—¶é—´å¤æ‚åº¦ï¼š**
- ç©ºé—´å¤æ‚åº¦ï¼šO(V + E)
- æ·»åŠ è¾¹ï¼šO(1)
- åˆ é™¤è¾¹ï¼šO(åº¦)
- æŸ¥æ‰¾è¾¹ï¼šO(åº¦)
- éå†æ‰€æœ‰è¾¹ï¼šO(V + E)

---

### 2.3 åå­—é“¾è¡¨

**åå­—é“¾è¡¨ï¼ˆOrthogonal Listï¼‰** ç”¨äºå­˜å‚¨æœ‰å‘å›¾ï¼Œç»“åˆäº†é‚»æ¥è¡¨å’Œé€†é‚»æ¥è¡¨ã€‚

**å­˜å‚¨æ–¹å¼ï¼š**
- æ¯ä¸ªé¡¶ç‚¹ç»´æŠ¤ä¸¤ä¸ªé“¾è¡¨ï¼šå‡ºè¾¹é“¾è¡¨å’Œå…¥è¾¹é“¾è¡¨
- æ¯æ¡è¾¹åªå­˜å‚¨ä¸€æ¬¡ï¼ŒåŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªé“¾è¡¨ä¸­

**é€‚ç”¨åœºæ™¯ï¼š**
- æœ‰å‘å›¾
- éœ€è¦é¢‘ç¹æŸ¥è¯¢å…¥è¾¹å’Œå‡ºè¾¹

**ä¼˜ç¼ºç‚¹ï¼š**

âœ… **ä¼˜ç‚¹ï¼š**
- åŒæ—¶æ”¯æŒæŸ¥è¯¢å…¥è¾¹å’Œå‡ºè¾¹
- ç©ºé—´æ•ˆç‡é«˜

âŒ **ç¼ºç‚¹ï¼š**
- å®ç°å¤æ‚
- ä¸é€‚åˆæ— å‘å›¾

---

### 2.4 é‚»æ¥å¤šé‡è¡¨

**é‚»æ¥å¤šé‡è¡¨ï¼ˆAdjacency Multilistï¼‰** ç”¨äºå­˜å‚¨æ— å‘å›¾ï¼Œæ¯æ¡è¾¹åªå­˜å‚¨ä¸€æ¬¡ã€‚

**å­˜å‚¨æ–¹å¼ï¼š**
- æ¯æ¡è¾¹ç”¨ä¸€ä¸ªèŠ‚ç‚¹è¡¨ç¤º
- è¾¹èŠ‚ç‚¹åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªé¡¶ç‚¹çš„é“¾è¡¨ä¸­

**é€‚ç”¨åœºæ™¯ï¼š**
- æ— å‘å›¾
- éœ€è¦é¢‘ç¹åˆ é™¤è¾¹

**ä¼˜ç¼ºç‚¹ï¼š**

âœ… **ä¼˜ç‚¹ï¼š**
- æ¯æ¡è¾¹åªå­˜å‚¨ä¸€æ¬¡
- åˆ é™¤è¾¹æ–¹ä¾¿

âŒ **ç¼ºç‚¹ï¼š**
- å®ç°å¤æ‚
- ä¸é€‚åˆæœ‰å‘å›¾

---

### 2.5 å­˜å‚¨ç»“æ„å¯¹æ¯”

| ç‰¹æ€§ | é‚»æ¥çŸ©é˜µ | é‚»æ¥è¡¨ | åå­—é“¾è¡¨ | é‚»æ¥å¤šé‡è¡¨ |
|------|---------|--------|---------|-----------|
| **é€‚ç”¨å›¾ç±»å‹** | æœ‰å‘/æ— å‘ | æœ‰å‘/æ— å‘ | æœ‰å‘ | æ— å‘ |
| **ç©ºé—´å¤æ‚åº¦** | O(VÂ²) | O(V+E) | O(V+E) | O(V+E) |
| **æŸ¥æ‰¾è¾¹** | O(1) | O(åº¦) | O(åº¦) | O(åº¦) |
| **éå†é‚»æ¥ç‚¹** | O(V) | O(åº¦) | O(åº¦) | O(åº¦) |
| **æ·»åŠ è¾¹** | O(1) | O(1) | O(1) | O(1) |
| **åˆ é™¤è¾¹** | O(1) | O(åº¦) | O(åº¦) | O(1) |
| **é€‚ç”¨åœºæ™¯** | ç¨ å¯†å›¾ | ç¨€ç–å›¾ | æœ‰å‘å›¾ | æ— å‘å›¾ |

---

## ä¸‰ã€å›¾çš„éå†

### 3.1 æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰

**æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDepth-First Search, DFSï¼‰** ä»èµ·å§‹é¡¶ç‚¹å¼€å§‹ï¼Œå°½å¯èƒ½æ·±åœ°æœç´¢å›¾çš„åˆ†æ”¯ã€‚

**ç®—æ³•æ€æƒ³ï¼š**
1. è®¿é—®èµ·å§‹é¡¶ç‚¹vï¼Œæ ‡è®°ä¸ºå·²è®¿é—®
2. é€’å½’è®¿é—®vçš„æœªè®¿é—®é‚»æ¥ç‚¹
3. é‡å¤ç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½è¢«è®¿é—®

**å®ç°ï¼š**

```c
// DFSéå†ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰
void DFS(GraphAdjList *g, int vertex, int *visited) {
    visited[vertex] = 1;
    printf("%d ", vertex);
    
    EdgeNode *current = g->adjList[vertex];
    while (current != NULL) {
        if (!visited[current->to]) {
            DFS(g, current->to, visited);
        }
        current = current->next;
    }
}

// DFSéå†å…¥å£
void GraphDFS(GraphAdjList *g, int start) {
    int *visited = (int *)calloc(g->vertexCount, sizeof(int));
    DFS(g, start, visited);
    free(visited);
}

// DFSéå†ï¼ˆéé€’å½’ç‰ˆæœ¬ï¼Œä½¿ç”¨æ ˆï¼‰
void DFSIterative(GraphAdjList *g, int start) {
    int *visited = (int *)calloc(g->vertexCount, sizeof(int));
    // å‡è®¾æœ‰ä¸€ä¸ªç®€å•çš„æ ˆå®ç°
    int stack[MAX_VERTICES];
    int top = -1;
    
    stack[++top] = start;
    visited[start] = 1;
    printf("%d ", start); // æ³¨æ„ï¼šè¿™é‡Œè®¿é—®é¡ºåºå¯èƒ½ä¸é€’å½’ä¸åŒï¼Œé€šå¸¸å…¥æ ˆæ—¶è®¿é—®æˆ–å‡ºæ ˆæ—¶è®¿é—®
    
    // ä¿®æ­£çš„éé€’å½’DFSé€šå¸¸æ˜¯å‡ºæ ˆæ—¶è®¿é—®ï¼Œæˆ–è€…æ¨¡æ‹Ÿé€’å½’æ ˆ
    // è¿™é‡Œé‡‡ç”¨ç®€å•çš„æ¨¡æ‹Ÿï¼š
    // 1. è®¿é—®å½“å‰èŠ‚ç‚¹
    // 2. å°†æœªè®¿é—®é‚»å±…å‹æ ˆ
    
    while (top >= 0) {
        int vertex = stack[top--];
        // å¦‚æœæ˜¯å‡ºæ ˆè®¿é—®ï¼š
        // if (!visited[vertex]) {
        //     visited[vertex] = 1;
        //     printf("%d ", vertex);
        // }
        
        // è¿™é‡Œæ¼”ç¤ºçš„æ˜¯ä¸€ç§å˜ä½“ï¼Œå®é™…æ ‡å‡†DFSéé€’å½’è¾ƒå¤æ‚
        // ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä¿ç•™é€’å½’ç‰ˆæœ¬ä½œä¸ºä¸»è¦å­¦ä¹ å¯¹è±¡
    }
    free(visited);
}
```

**éå†ç¤ºä¾‹ï¼š**

```
å›¾ï¼š
    0---1---3
    |   |
    2   4

DFSéå†ï¼ˆä»0å¼€å§‹ï¼‰ï¼š
é€’å½’ç‰ˆæœ¬ï¼š0 â†’ 1 â†’ 3 â†’ 4 â†’ 2
æ ˆç‰ˆæœ¬ï¼š0 â†’ 2 â†’ 1 â†’ 4 â†’ 3
```

**æ—¶é—´å¤æ‚åº¦ï¼š**
- é‚»æ¥è¡¨ï¼šO(V + E)
- é‚»æ¥çŸ©é˜µï¼šO(VÂ²)

**ç©ºé—´å¤æ‚åº¦ï¼š**
- O(V)ï¼ˆé€’å½’æ ˆæˆ–æ˜¾å¼æ ˆï¼‰

**åº”ç”¨ï¼š**
- å›¾çš„è¿é€šæ€§åˆ¤æ–­
- æ‹“æ‰‘æ’åº
- å¼ºè¿é€šåˆ†é‡
- è·¯å¾„æŸ¥æ‰¾

---

### 3.2 å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰

**å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBreadth-First Search, BFSï¼‰** ä»èµ·å§‹é¡¶ç‚¹å¼€å§‹ï¼Œé€å±‚è®¿é—®æ‰€æœ‰é¡¶ç‚¹ã€‚

**ç®—æ³•æ€æƒ³ï¼š**
1. è®¿é—®èµ·å§‹é¡¶ç‚¹vï¼Œæ ‡è®°ä¸ºå·²è®¿é—®ï¼ŒåŠ å…¥é˜Ÿåˆ—
2. ä»é˜Ÿåˆ—å–å‡ºé¡¶ç‚¹ï¼Œè®¿é—®å…¶æ‰€æœ‰æœªè®¿é—®çš„é‚»æ¥ç‚¹
3. å°†æœªè®¿é—®çš„é‚»æ¥ç‚¹æ ‡è®°ä¸ºå·²è®¿é—®å¹¶åŠ å…¥é˜Ÿåˆ—
4. é‡å¤ç›´åˆ°é˜Ÿåˆ—ä¸ºç©º

**å®ç°ï¼š**

```c
// BFSéå†
void BFS(GraphAdjList *g, int start) {
    int *visited = (int *)calloc(g->vertexCount, sizeof(int));
    // å‡è®¾æœ‰ä¸€ä¸ªç®€å•çš„é˜Ÿåˆ—å®ç°
    int queue[MAX_VERTICES];
    int front = 0, rear = 0;
    
    visited[start] = 1;
    queue[rear++] = start; // å…¥é˜Ÿ
    
    while (front < rear) {
        int vertex = queue[front++]; // å‡ºé˜Ÿ
        printf("%d ", vertex);
        
        EdgeNode *current = g->adjList[vertex];
        while (current != NULL) {
            if (!visited[current->to]) {
                visited[current->to] = 1;
                queue[rear++] = current->to;
            }
            current = current->next;
        }
    }
    free(visited);
}

// BFSæ±‚æœ€çŸ­è·¯å¾„ï¼ˆæ— æƒå›¾ï¼‰
void BFSShortestPath(GraphAdjList *g, int start, int *distance) {
    for (int i = 0; i < g->vertexCount; i++) distance[i] = -1;
    
    int queue[MAX_VERTICES];
    int front = 0, rear = 0;
    
    distance[start] = 0;
    queue[rear++] = start;
    
    while (front < rear) {
        int vertex = queue[front++];
        
        EdgeNode *current = g->adjList[vertex];
        while (current != NULL) {
            if (distance[current->to] == -1) {
                distance[current->to] = distance[vertex] + 1;
                queue[rear++] = current->to;
            }
            current = current->next;
        }
    }
}
```

**éå†ç¤ºä¾‹ï¼š**

```
å›¾ï¼š
    0---1---3
    |   |
    2   4

BFSéå†ï¼ˆä»0å¼€å§‹ï¼‰ï¼š
0 â†’ 1 â†’ 2 â†’ 3 â†’ 4
ï¼ˆæŒ‰å±‚æ¬¡è®¿é—®ï¼‰
```

**æ—¶é—´å¤æ‚åº¦ï¼š**
- é‚»æ¥è¡¨ï¼šO(V + E)
- é‚»æ¥çŸ©é˜µï¼šO(VÂ²)

**ç©ºé—´å¤æ‚åº¦ï¼š**
- O(V)ï¼ˆé˜Ÿåˆ—ï¼‰

**åº”ç”¨ï¼š**
- æœ€çŸ­è·¯å¾„ï¼ˆæ— æƒå›¾ï¼‰
- å±‚æ¬¡éå†
- è¿é€šæ€§åˆ¤æ–­
- æœ€å°ç”Ÿæˆæ ‘ï¼ˆPrimç®—æ³•ï¼‰

---

### 3.3 DFS vs BFS

| ç‰¹æ€§ | DFS | BFS |
|------|-----|-----|
| **æ•°æ®ç»“æ„** | æ ˆï¼ˆé€’å½’æˆ–æ˜¾å¼æ ˆï¼‰ | é˜Ÿåˆ— |
| **éå†é¡ºåº** | æ·±åº¦ä¼˜å…ˆ | å¹¿åº¦ä¼˜å…ˆ |
| **æœ€çŸ­è·¯å¾„** | âŒ ä¸ä¿è¯æœ€çŸ­ | âœ… ä¿è¯æœ€çŸ­ï¼ˆæ— æƒå›¾ï¼‰ |
| **ç©ºé—´å¤æ‚åº¦** | O(V) | O(V) |
| **åº”ç”¨** | æ‹“æ‰‘æ’åºã€å¼ºè¿é€šåˆ†é‡ | æœ€çŸ­è·¯å¾„ã€å±‚æ¬¡éå† |

---

## å››ã€æœ€å°ç”Ÿæˆæ ‘

### 4.1 åŸºæœ¬æ¦‚å¿µ

**ç”Ÿæˆæ ‘ï¼ˆSpanning Treeï¼‰**ï¼šåŒ…å«å›¾ä¸­æ‰€æœ‰é¡¶ç‚¹çš„è¿é€šå­å›¾ï¼Œä¸”æ˜¯æ ‘ï¼ˆæ— ç¯ï¼‰ã€‚

**æœ€å°ç”Ÿæˆæ ‘ï¼ˆMinimum Spanning Tree, MSTï¼‰**ï¼šåœ¨æœ‰æƒè¿é€šæ— å‘å›¾ä¸­ï¼Œæƒå€¼ä¹‹å’Œæœ€å°çš„ç”Ÿæˆæ ‘ã€‚

**æ€§è´¨ï¼š**
- æœ€å°ç”Ÿæˆæ ‘å¯èƒ½ä¸å”¯ä¸€
- æœ€å°ç”Ÿæˆæ ‘çš„è¾¹æ•° = é¡¶ç‚¹æ•° - 1
- æœ€å°ç”Ÿæˆæ ‘åŒ…å«æ‰€æœ‰é¡¶ç‚¹

**åº”ç”¨åœºæ™¯ï¼š**
- ç½‘ç»œè®¾è®¡ï¼ˆæœ€å°æˆæœ¬è¿æ¥æ‰€æœ‰èŠ‚ç‚¹ï¼‰
- ç”µè·¯è®¾è®¡
- äº¤é€šè§„åˆ’

---

### 4.2 Primç®—æ³•

**Primç®—æ³•ï¼ˆæ™®é‡Œå§†ç®—æ³•ï¼‰**ï¼šä»ä»»æ„é¡¶ç‚¹å¼€å§‹ï¼Œé€æ­¥æ‰©å±•æœ€å°ç”Ÿæˆæ ‘ã€‚

**ç®—æ³•æ­¥éª¤ï¼š**
1. é€‰æ‹©ä»»æ„é¡¶ç‚¹ä½œä¸ºèµ·å§‹é¡¶ç‚¹ï¼ŒåŠ å…¥MST
2. åœ¨MSTçš„é¡¶ç‚¹å’ŒéMSTçš„é¡¶ç‚¹ä¹‹é—´ï¼Œé€‰æ‹©æƒå€¼æœ€å°çš„è¾¹
3. å°†è¯¥è¾¹å’Œå¯¹åº”çš„é¡¶ç‚¹åŠ å…¥MST
4. é‡å¤æ­¥éª¤2å’Œ3ï¼Œç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½åŠ å…¥MST

**å®ç°ï¼š**

```c
typedef struct {
    int from, to, weight;
} Edge;

// Primç®—æ³•
void Prim(GraphAdjMatrix *g, int start) {
    int n = g->vertexCount;
    int *inMST = (int *)calloc(n, sizeof(int));
    int *minWeight = (int *)malloc(n * sizeof(int));
    int *parent = (int *)malloc(n * sizeof(int));
    
    for (int i = 0; i < n; i++) minWeight[i] = INF;
    minWeight[start] = 0;
    parent[start] = -1;
    
    for (int i = 0; i < n; i++) {
        // æ‰¾åˆ°ä¸åœ¨MSTä¸­ä¸”æƒå€¼æœ€å°çš„é¡¶ç‚¹
        int u = -1;
        int min = INF;
        for (int j = 0; j < n; j++) {
            if (!inMST[j] && minWeight[j] < min) {
                min = minWeight[j];
                u = j;
            }
        }
        
        if (u == -1) break;
        
        inMST[u] = 1;
        
        // è¾“å‡ºè¾¹
        if (parent[u] != -1) {
            printf("è¾¹: (%d, %d), æƒå€¼: %d\n", parent[u], u, minWeight[u]);
        }
        
        // æ›´æ–°é‚»æ¥ç‚¹çš„æœ€å°æƒå€¼
        for (int v = 0; v < n; v++) {
            if (!inMST[v] && HasEdgeMatrix(g, u, v)) {
                int weight = GetWeightMatrix(g, u, v);
                if (weight < minWeight[v]) {
                    minWeight[v] = weight;
                    parent[v] = u;
                }
            }
        }
    }
    
    free(inMST);
    free(minWeight);
    free(parent);
}
```

**ç®—æ³•ç¤ºä¾‹ï¼š**

```
å›¾ï¼š
      1
  0 ----- 1
  | \   / |
 3|  \ /  |2
  |   X   |
  2 ----- 3
      4

Primç®—æ³•è¿‡ç¨‹ï¼ˆä»0å¼€å§‹ï¼‰ï¼š
æ­¥éª¤1ï¼šé€‰æ‹©é¡¶ç‚¹0ï¼ŒMST = {0}
æ­¥éª¤2ï¼šé€‰æ‹©è¾¹(0,1)ï¼Œæƒå€¼1ï¼ŒMST = {0,1}
æ­¥éª¤3ï¼šé€‰æ‹©è¾¹(1,3)ï¼Œæƒå€¼2ï¼ŒMST = {0,1,3}
æ­¥éª¤4ï¼šé€‰æ‹©è¾¹(0,2)ï¼Œæƒå€¼3ï¼ŒMST = {0,1,2,3}

æœ€å°ç”Ÿæˆæ ‘æ€»æƒå€¼ï¼š1 + 2 + 3 = 6
```

**æ—¶é—´å¤æ‚åº¦ï¼š**
- é‚»æ¥çŸ©é˜µï¼šO(VÂ²)
- é‚»æ¥è¡¨+ä¼˜å…ˆé˜Ÿåˆ—ï¼šO(E log V)

**ç©ºé—´å¤æ‚åº¦ï¼š** O(V)

---

### 4.3 Kruskalç®—æ³•

**Kruskalç®—æ³•ï¼ˆå…‹é²æ–¯å¡å°”ç®—æ³•ï¼‰**ï¼šæŒ‰è¾¹æƒå€¼ä»å°åˆ°å¤§æ’åºï¼Œé€æ­¥åŠ å…¥MSTã€‚

**ç®—æ³•æ­¥éª¤ï¼š**
1. å°†æ‰€æœ‰è¾¹æŒ‰æƒå€¼ä»å°åˆ°å¤§æ’åº
2. ä¾æ¬¡é€‰æ‹©è¾¹ï¼Œå¦‚æœè¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹ä¸åœ¨åŒä¸€è¿é€šåˆ†é‡ä¸­ï¼Œåˆ™åŠ å…¥MST
3. ä½¿ç”¨å¹¶æŸ¥é›†åˆ¤æ–­æ˜¯å¦å½¢æˆç¯
4. é‡å¤ç›´åˆ°MSTæœ‰V-1æ¡è¾¹

**å®ç°ï¼š**

```c
// æ¯”è¾ƒå‡½æ•°
int compareEdges(const void *a, const void *b) {
    return ((Edge *)a)->weight - ((Edge *)b)->weight;
}

// Kruskalç®—æ³•
void Kruskal(GraphAdjList *g) {
    int maxEdges = g->vertexCount * (g->vertexCount - 1) / 2; // æœ€å¤šè¾¹æ•°
    Edge *edges = (Edge *)malloc(maxEdges * sizeof(Edge));
    int edgeCount = 0;
    
    // æ”¶é›†æ‰€æœ‰è¾¹
    for (int i = 0; i < g->vertexCount; i++) {
        EdgeNode *current = g->adjList[i];
        while (current != NULL) {
            if (i < current->to) {  // é¿å…é‡å¤æ·»åŠ æ— å‘å›¾çš„è¾¹
                edges[edgeCount].from = i;
                edges[edgeCount].to = current->to;
                edges[edgeCount].weight = current->weight;
                edgeCount++;
            }
            current = current->next;
        }
    }
    
    // æŒ‰æƒå€¼æ’åº
    qsort(edges, edgeCount, sizeof(Edge), compareEdges);
    
    // ä½¿ç”¨å¹¶æŸ¥é›†
    UnionFind uf;
    InitUF(&uf, g->vertexCount);
    
    int mstEdges = 0;
    for (int i = 0; i < edgeCount; i++) {
        if (!Connected(&uf, edges[i].from, edges[i].to)) {
            Union(&uf, edges[i].from, edges[i].to);
            printf("è¾¹: (%d, %d), æƒå€¼: %d\n", edges[i].from, edges[i].to, edges[i].weight);
            mstEdges++;
            
            if (mstEdges == g->vertexCount - 1) {
                break;  // MSTå·²å®Œæ•´
            }
        }
    }
    
    free(edges);
    // FreeUF(&uf); // å‡è®¾æœ‰é‡Šæ”¾å‡½æ•°
}
```

**ç®—æ³•ç¤ºä¾‹ï¼š**

```
å›¾ï¼š
      1
  0 ----- 1
  | \   / |
 3|  \ /  |2
  |   X   |
  2 ----- 3
      4

è¾¹æ’åºï¼š1(0,1), 2(1,3), 3(0,2), 4(2,3)

Kruskalç®—æ³•è¿‡ç¨‹ï¼š
æ­¥éª¤1ï¼šé€‰æ‹©è¾¹(0,1)ï¼Œæƒå€¼1ï¼ŒMST = {(0,1)}
æ­¥éª¤2ï¼šé€‰æ‹©è¾¹(1,3)ï¼Œæƒå€¼2ï¼ŒMST = {(0,1), (1,3)}
æ­¥éª¤3ï¼šé€‰æ‹©è¾¹(0,2)ï¼Œæƒå€¼3ï¼ŒMST = {(0,1), (1,3), (0,2)}
æ­¥éª¤4ï¼šè¾¹(2,3)ä¼šå½¢æˆç¯ï¼Œè·³è¿‡

æœ€å°ç”Ÿæˆæ ‘æ€»æƒå€¼ï¼š1 + 2 + 3 = 6
```

**æ—¶é—´å¤æ‚åº¦ï¼š**
- O(E log E) = O(E log V)ï¼ˆæ’åº + å¹¶æŸ¥é›†ï¼‰

**ç©ºé—´å¤æ‚åº¦ï¼š** O(V)

---

### 4.4 Prim vs Kruskal

| ç‰¹æ€§ | Primç®—æ³• | Kruskalç®—æ³• |
|------|---------|------------|
| **ç®—æ³•æ€æƒ³** | é¡¶ç‚¹æ‰©å±• | è¾¹é€‰æ‹© |
| **æ•°æ®ç»“æ„** | ä¼˜å…ˆé˜Ÿåˆ—/æ•°ç»„ | å¹¶æŸ¥é›† |
| **æ—¶é—´å¤æ‚åº¦** | O(VÂ²) æˆ– O(E log V) | O(E log E) |
| **é€‚ç”¨å›¾** | ç¨ å¯†å›¾ | ç¨€ç–å›¾ |
| **å®ç°å¤æ‚åº¦** | ä¸­ç­‰ | ç®€å• |

---

## äº”ã€æœ€çŸ­è·¯å¾„

### 5.1 åŸºæœ¬æ¦‚å¿µ

**æœ€çŸ­è·¯å¾„é—®é¢˜**ï¼šåœ¨æœ‰æƒå›¾ä¸­ï¼Œæ‰¾åˆ°ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æƒå€¼ä¹‹å’Œæœ€å°çš„è·¯å¾„ã€‚

**åˆ†ç±»ï¼š**
1. **å•æºæœ€çŸ­è·¯å¾„**ï¼šä»ä¸€ä¸ªé¡¶ç‚¹åˆ°å…¶ä»–æ‰€æœ‰é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„
   - Dijkstraç®—æ³•ï¼ˆéè´Ÿæƒï¼‰
   - Bellman-Fordç®—æ³•ï¼ˆå¯å¤„ç†è´Ÿæƒï¼‰

2. **æ‰€æœ‰é¡¶ç‚¹å¯¹æœ€çŸ­è·¯å¾„**ï¼šä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„
   - Floydç®—æ³•

---

### 5.2 Dijkstraç®—æ³•

**Dijkstraç®—æ³•ï¼ˆè¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•ï¼‰**ï¼šè§£å†³å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ï¼ˆéè´Ÿæƒå›¾ï¼‰ã€‚

**ç®—æ³•æ­¥éª¤ï¼š**
1. åˆå§‹åŒ–ï¼šèµ·ç‚¹è·ç¦»ä¸º0ï¼Œå…¶ä»–é¡¶ç‚¹è·ç¦»ä¸ºâˆ
2. é€‰æ‹©è·ç¦»æœ€å°çš„æœªè®¿é—®é¡¶ç‚¹u
3. æ›´æ–°uçš„æ‰€æœ‰é‚»æ¥ç‚¹çš„è·ç¦»ï¼šdist[v] = min(dist[v], dist[u] + weight(u,v))
4. æ ‡è®°uä¸ºå·²è®¿é—®
5. é‡å¤æ­¥éª¤2-4ï¼Œç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½è¢«è®¿é—®

**å®ç°ï¼š**

```java
import java.util.*;

public class Dijkstra {
    private GraphAdjMatrix graph;
    
    public Dijkstra(GraphAdjMatrix graph) {
        this.graph = graph;
    }
    
    // Dijkstraç®—æ³•ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
    public int[] dijkstra(int start) {
        int n = graph.vertexCount;
        int[] dist = new int[n];        // æœ€çŸ­è·ç¦»
        boolean[] visited = new boolean[n];  // è®¿é—®æ ‡è®°
        
        Arrays.fill(dist, Integer.MAX_VALUE);
        dist[start] = 0;
        
        for (int i = 0; i < n; i++) {
            // æ‰¾åˆ°æœªè®¿é—®çš„è·ç¦»æœ€å°çš„é¡¶ç‚¹
            int u = -1;
            int minDist = Integer.MAX_VALUE;
            for (int j = 0; j < n; j++) {
                if (!visited[j] && dist[j] < minDist) {
                    minDist = dist[j];
                    u = j;
                }
            }
            
            if (u == -1) break;
            visited[u] = true;
            
            // æ›´æ–°é‚»æ¥ç‚¹çš„è·ç¦»
            for (int v = 0; v < n; v++) {
                if (!visited[v] && graph.hasEdge(u, v)) {
                    int weight = graph.getWeight(u, v);
                    if (dist[u] != Integer.MAX_VALUE && dist[u] + weight < dist[v]) {
                        dist[v] = dist[u] + weight;
                    }
                }
            }
        }
        
        return dist;
    }
    
    // Dijkstraç®—æ³•ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ï¼‰
    public int[] dijkstraOptimized(int start) {
        int n = graph.vertexCount;
        int[] dist = new int[n];
        boolean[] visited = new boolean[n];
        PriorityQueue<int[]> pq = new PriorityQueue<>((a, b) -> a[1] - b[1]);
        
        Arrays.fill(dist, Integer.MAX_VALUE);
        dist[start] = 0;
        pq.offer(new int[]{start, 0});
        
        while (!pq.isEmpty()) {
            int[] current = pq.poll();
            int u = current[0];
            
            if (visited[u]) continue;
            visited[u] = true;
            
            for (int v = 0; v < n; v++) {
                if (!visited[v] && graph.hasEdge(u, v)) {
                    int weight = graph.getWeight(u, v);
                    if (dist[u] != Integer.MAX_VALUE && dist[u] + weight < dist[v]) {
                        dist[v] = dist[u] + weight;
                        pq.offer(new int[]{v, dist[v]});
                    }
                }
            }
        }
        
        return dist;
    }
    
    // è·å–æœ€çŸ­è·¯å¾„ï¼ˆè®°å½•è·¯å¾„ï¼‰
    public List<Integer> getPath(int start, int end) {
        int n = graph.vertexCount;
        int[] dist = new int[n];
        int[] parent = new int[n];
        boolean[] visited = new boolean[n];
        
        Arrays.fill(dist, Integer.MAX_VALUE);
        Arrays.fill(parent, -1);
        dist[start] = 0;
        
        for (int i = 0; i < n; i++) {
            int u = -1;
            int minDist = Integer.MAX_VALUE;
            for (int j = 0; j < n; j++) {
                if (!visited[j] && dist[j] < minDist) {
                    minDist = dist[j];
                    u = j;
                }
            }
            
            if (u == -1) break;
            visited[u] = true;
            
            for (int v = 0; v < n; v++) {
                if (!visited[v] && graph.hasEdge(u, v)) {
                    int weight = graph.getWeight(u, v);
                    if (dist[u] != Integer.MAX_VALUE && dist[u] + weight < dist[v]) {
                        dist[v] = dist[u] + weight;
                        parent[v] = u;
                    }
                }
            }
        }
        
        // é‡æ„è·¯å¾„
        List<Integer> path = new ArrayList<>();
        if (dist[end] == Integer.MAX_VALUE) {
            return path;  // ä¸å¯è¾¾
        }
        
        int current = end;
        while (current != -1) {
            path.add(0, current);
            current = parent[current];
        }
        
        return path;
    }
}
```

**ç®—æ³•ç¤ºä¾‹ï¼š**

```
å›¾ï¼š
      1
  0 ----- 1
  | \   / |
 3|  \ /  |2
  |   X   |
  2 ----- 3
      4

Dijkstraç®—æ³•ï¼ˆä»0å¼€å§‹ï¼‰ï¼š
æ­¥éª¤1ï¼šdist[0]=0, dist[1]=1, dist[2]=3, dist[3]=âˆ
æ­¥éª¤2ï¼šé€‰æ‹©é¡¶ç‚¹1ï¼Œdist[3]=min(âˆ, 1+2)=3
æ­¥éª¤3ï¼šé€‰æ‹©é¡¶ç‚¹2ï¼Œdist[3]=min(3, 3+4)=3
æ­¥éª¤4ï¼šé€‰æ‹©é¡¶ç‚¹3

æœ€çŸ­è·ç¦»ï¼š
0â†’0: 0
0â†’1: 1
0â†’2: 3
0â†’3: 3
```

**æ—¶é—´å¤æ‚åº¦ï¼š**
- åŸºç¡€ç‰ˆæœ¬ï¼šO(VÂ²)
- ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ï¼šO(E log V)

**ç©ºé—´å¤æ‚åº¦ï¼š** O(V)

**é™åˆ¶ï¼š**
- ä¸èƒ½å¤„ç†è´Ÿæƒè¾¹
- ä¸èƒ½å¤„ç†è´Ÿæƒå›è·¯

---

### 5.3 Floydç®—æ³•

**Floydç®—æ³•ï¼ˆå¼—æ´›ä¼Šå¾·ç®—æ³•ï¼ŒFloyd-Warshallç®—æ³•ï¼‰**ï¼šè§£å†³æ‰€æœ‰é¡¶ç‚¹å¯¹æœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æ±‚å‡ºå›¾ä¸­ä»»æ„ä¸¤ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚

**é—®é¢˜æè¿°ï¼š**
- ç»™å®šæœ‰å‘å›¾æˆ–æ— å‘å›¾ï¼ˆå¯å¸¦æƒï¼Œå¯å¸¦è´Ÿæƒï¼Œä½†ä¸èƒ½æœ‰è´Ÿæƒå›è·¯ï¼‰
- æ±‚ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„é•¿åº¦

**ç®—æ³•æ€æƒ³ï¼š**

Floydç®—æ³•åŸºäº**åŠ¨æ€è§„åˆ’**æ€æƒ³ï¼š

**æ ¸å¿ƒæ€æƒ³ï¼š** é€æ­¥å…è®¸ç»è¿‡æ›´å¤šé¡¶ç‚¹ä½œä¸ºä¸­è½¬ç‚¹

**çŠ¶æ€å®šä¹‰ï¼š**
- dist[k][i][j]ï¼šä»é¡¶ç‚¹iåˆ°é¡¶ç‚¹jï¼Œ**åªå…è®¸ç»è¿‡é¡¶ç‚¹0,1,2,...,kä½œä¸ºä¸­è½¬ç‚¹**çš„æœ€çŸ­è·¯å¾„é•¿åº¦

**çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š**
```
dist[k][i][j] = min(
    dist[k-1][i][j],              // ä¸ç»è¿‡é¡¶ç‚¹k
    dist[k-1][i][k] + dist[k-1][k][j]  // ç»è¿‡é¡¶ç‚¹k
)
```

**ç©ºé—´ä¼˜åŒ–ï¼š**
ç”±äºdist[k][...]åªä¾èµ–äºdist[k-1][...]ï¼Œå¯ä»¥ç”¨äºŒç»´æ•°ç»„ï¼š
```java
dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j])
```

**ç®—æ³•æ­¥éª¤è¯¦è§£ï¼š**

**æ­¥éª¤1ï¼šåˆå§‹åŒ–è·ç¦»çŸ©é˜µdist**
- dist[i][i] = 0ï¼ˆè‡ªå·±åˆ°è‡ªå·±çš„è·ç¦»ä¸º0ï¼‰
- å¦‚æœå­˜åœ¨è¾¹(i,j)ï¼Œdist[i][j] = weight(i,j)
- å¦åˆ™ï¼Œdist[i][j] = âˆï¼ˆè¡¨ç¤ºä¸å¯è¾¾ï¼‰

**æ­¥éª¤2ï¼šä¸‰é‡å¾ªç¯æ›´æ–°**
- å¤–å±‚å¾ªç¯kï¼šä¾æ¬¡å…è®¸é¡¶ç‚¹0,1,2,...,n-1ä½œä¸ºä¸­è½¬ç‚¹
- å†…å±‚å¾ªç¯i, jï¼šå¯¹äºæ¯å¯¹é¡¶ç‚¹(i,j)ï¼Œå°è¯•é€šè¿‡é¡¶ç‚¹kç¼©çŸ­è·¯å¾„
  - å¦‚æœdist[i][k] + dist[k][j] < dist[i][j]ï¼Œåˆ™æ›´æ–°

**æ­¥éª¤3ï¼šæ£€æµ‹è´Ÿæƒå›è·¯**
- å¦‚æœå­˜åœ¨dist[i][i] < 0ï¼Œè¯´æ˜å­˜åœ¨è´Ÿæƒå›è·¯

**ä»£ç å®ç°ï¼š**

```java
import java.util.*;

public class Floyd {
    private GraphAdjMatrix graph;
    private int vertexCount;
    
    public Floyd(GraphAdjMatrix graph) {
        this.graph = graph;
        this.vertexCount = graph.vertexCount;
    }
    
    /**
     * Floydç®—æ³•åŸºç¡€ç‰ˆæœ¬
     * @return æœ€çŸ­è·ç¦»çŸ©é˜µ dist[i][j] è¡¨ç¤ºä»iåˆ°jçš„æœ€çŸ­è·ç¦»
     */
    public int[][] floyd() {
        int n = vertexCount;
        int[][] dist = new int[n][n];
        
        // æ­¥éª¤1ï¼šåˆå§‹åŒ–è·ç¦»çŸ©é˜µ
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (i == j) {
                    dist[i][j] = 0;  // è‡ªå·±åˆ°è‡ªå·±çš„è·ç¦»ä¸º0
                } else if (graph.hasEdge(i, j)) {
                    dist[i][j] = graph.getWeight(i, j);  // ç›´æ¥è¾¹çš„æƒé‡
                } else {
                    dist[i][j] = Integer.MAX_VALUE;  // ä¸å¯è¾¾
                }
            }
        }
        
        // æ­¥éª¤2ï¼šFloydç®—æ³•æ ¸å¿ƒ - ä¸‰é‡å¾ªç¯
        // kï¼šä¸­è½¬ç‚¹ï¼Œé€æ­¥å…è®¸ç»è¿‡æ›´å¤šé¡¶ç‚¹
        for (int k = 0; k < n; k++) {
            // iï¼šèµ·ç‚¹
            for (int i = 0; i < n; i++) {
                // jï¼šç»ˆç‚¹
                for (int j = 0; j < n; j++) {
                    // é¿å…æº¢å‡ºï¼šæ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨
                    if (dist[i][k] != Integer.MAX_VALUE && 
                        dist[k][j] != Integer.MAX_VALUE) {
                        // çŠ¶æ€è½¬ç§»ï¼šå°è¯•é€šè¿‡é¡¶ç‚¹kç¼©çŸ­è·¯å¾„
                        if (dist[i][k] + dist[k][j] < dist[i][j]) {
                            dist[i][j] = dist[i][k] + dist[k][j];
                        }
                    }
                }
            }
        }
        
        return dist;
    }
    
    /**
     * Floydç®—æ³• - æ£€æµ‹è´Ÿæƒå›è·¯
     * @return å¦‚æœå­˜åœ¨è´Ÿæƒå›è·¯è¿”å›trueï¼Œå¦åˆ™è¿”å›false
     */
    public boolean hasNegativeCycle() {
        int[][] dist = floyd();
        
        // æ£€æŸ¥æ˜¯å¦å­˜åœ¨dist[i][i] < 0
        // å¦‚æœå­˜åœ¨ï¼Œè¯´æ˜å­˜åœ¨ç»è¿‡é¡¶ç‚¹içš„è´Ÿæƒå›è·¯
        for (int i = 0; i < vertexCount; i++) {
            if (dist[i][i] < 0) {
                return true;
            }
        }
        
        return false;
    }
    
    /**
     * Floydç®—æ³• - å¸¦è·¯å¾„è®°å½•ç‰ˆæœ¬
     * @return nextçŸ©é˜µï¼Œnext[i][j]è¡¨ç¤ºä»iåˆ°jçš„æœ€çŸ­è·¯å¾„ä¸­ï¼Œiçš„ä¸‹ä¸€ä¸ªé¡¶ç‚¹
     */
    public int[][] floydWithPath() {
        int n = vertexCount;
        int[][] dist = new int[n][n];
        int[][] next = new int[n][n];  // è·¯å¾„çŸ©é˜µ
        
        // åˆå§‹åŒ–
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (i == j) {
                    dist[i][j] = 0;
                    next[i][j] = j;  // è‡ªå·±åˆ°è‡ªå·±çš„ä¸‹ä¸€ä¸ªé¡¶ç‚¹æ˜¯è‡ªå·±
                } else if (graph.hasEdge(i, j)) {
                    dist[i][j] = graph.getWeight(i, j);
                    next[i][j] = j;  // ç›´æ¥è¾¹ï¼Œä¸‹ä¸€ä¸ªé¡¶ç‚¹æ˜¯j
                } else {
                    dist[i][j] = Integer.MAX_VALUE;
                    next[i][j] = -1;  // ä¸å¯è¾¾
                }
            }
        }
        
        // Floydç®—æ³•
        for (int k = 0; k < n; k++) {
            for (int i = 0; i < n; i++) {
                for (int j = 0; j < n; j++) {
                    if (dist[i][k] != Integer.MAX_VALUE && 
                        dist[k][j] != Integer.MAX_VALUE &&
                        dist[i][k] + dist[k][j] < dist[i][j]) {
                        dist[i][j] = dist[i][k] + dist[k][j];
                        // æ›´æ–°è·¯å¾„ï¼šä»iåˆ°jçš„æœ€çŸ­è·¯å¾„ï¼Œiçš„ä¸‹ä¸€ä¸ªé¡¶ç‚¹æ˜¯ä»iåˆ°kçš„æœ€çŸ­è·¯å¾„çš„ä¸‹ä¸€ä¸ªé¡¶ç‚¹
                        next[i][j] = next[i][k];
                    }
                }
            }
        }
        
        return next;
    }
    
    /**
     * æ ¹æ®nextçŸ©é˜µé‡æ„è·¯å¾„
     * @param next è·¯å¾„çŸ©é˜µ
     * @param start èµ·ç‚¹
     * @param end ç»ˆç‚¹
     * @return è·¯å¾„åˆ—è¡¨
     */
    public List<Integer> reconstructPath(int[][] next, int start, int end) {
        List<Integer> path = new ArrayList<>();
        
        // æ£€æŸ¥æ˜¯å¦å¯è¾¾
        if (next[start][end] == -1) {
            return path;  // ä¸å¯è¾¾ï¼Œè¿”å›ç©ºåˆ—è¡¨
        }
        
        // é‡æ„è·¯å¾„
        int current = start;
        while (current != end) {
            path.add(current);
            current = next[current][end];
        }
        path.add(end);
        
        return path;
    }
    
    /**
     * å®Œæ•´ç¤ºä¾‹ï¼šè®¡ç®—æœ€çŸ­è·¯å¾„å¹¶è¾“å‡º
     */
    public void printAllShortestPaths() {
        int[][] dist = floyd();
        int[][] next = floydWithPath();
        
        System.out.println("æœ€çŸ­è·ç¦»çŸ©é˜µï¼š");
        for (int i = 0; i < vertexCount; i++) {
            for (int j = 0; j < vertexCount; j++) {
                if (dist[i][j] == Integer.MAX_VALUE) {
                    System.out.print("âˆ\t");
                } else {
                    System.out.print(dist[i][j] + "\t");
                }
            }
            System.out.println();
        }
        
        System.out.println("\næœ€çŸ­è·¯å¾„ï¼š");
        for (int i = 0; i < vertexCount; i++) {
            for (int j = 0; j < vertexCount; j++) {
                if (i != j) {
                    List<Integer> path = reconstructPath(next, i, j);
                    if (!path.isEmpty()) {
                        System.out.printf("ä»%dåˆ°%d: %s (è·ç¦»: %d)\n", 
                            i, j, path, dist[i][j]);
                    }
                }
            }
        }
    }
}
```

**ç®—æ³•ç¤ºä¾‹è¯¦è§£ï¼š**

```
æœ‰å‘å›¾ç¤ºä¾‹ï¼š
        1
   0 -----> 1
   â†‘        â†“
   |        2
   3        â†“
   â†‘        3
   2 -----> 3
        4

åˆå§‹è·ç¦»çŸ©é˜µdist[0]ï¼ˆä¸å…è®¸ä»»ä½•ä¸­è½¬ç‚¹ï¼‰ï¼š
    0  1  2  3
0 [0  1  âˆ  âˆ]
1 [âˆ  0  âˆ  2]
2 [3  âˆ  0  4]
3 [âˆ  âˆ  âˆ  0]

k=0ï¼ˆå…è®¸ç»è¿‡é¡¶ç‚¹0ä½œä¸ºä¸­è½¬ç‚¹ï¼‰ï¼š
æ£€æŸ¥æ‰€æœ‰(i,j)å¯¹ï¼Œçœ‹æ˜¯å¦å¯ä»¥é€šè¿‡é¡¶ç‚¹0ç¼©çŸ­è·¯å¾„
- dist[1][0] = âˆï¼Œæ— æ³•é€šè¿‡0
- dist[2][0] = 3ï¼Œä½†æ— æ³•æ›´æ–°å…¶ä»–è·¯å¾„
- æ— æ›´æ–°

k=1ï¼ˆå…è®¸ç»è¿‡é¡¶ç‚¹0,1ä½œä¸ºä¸­è½¬ç‚¹ï¼‰ï¼š
- dist[0][3] = min(âˆ, dist[0][1] + dist[1][3]) = min(âˆ, 1+2) = 3 âœ“
- dist[2][3] = min(4, dist[2][1] + dist[1][3]) = min(4, âˆ+2) = 4
- æ›´æ–°dist[0][3] = 3

k=2ï¼ˆå…è®¸ç»è¿‡é¡¶ç‚¹0,1,2ä½œä¸ºä¸­è½¬ç‚¹ï¼‰ï¼š
- dist[0][3] = min(3, dist[0][2] + dist[2][3]) = min(3, âˆ+4) = 3
- dist[1][3] = min(2, dist[1][2] + dist[2][3]) = min(2, âˆ+4) = 2
- dist[0][1] = min(1, dist[0][2] + dist[2][1]) = min(1, âˆ+âˆ) = 1
- æ— æ›´æ–°

k=3ï¼ˆå…è®¸ç»è¿‡æ‰€æœ‰é¡¶ç‚¹ä½œä¸ºä¸­è½¬ç‚¹ï¼‰ï¼š
- æ£€æŸ¥æ‰€æœ‰è·¯å¾„ï¼Œæ— æ›´æ–°

æœ€ç»ˆæœ€çŸ­è·ç¦»çŸ©é˜µï¼š
    0  1  2  3
0 [0  1  âˆ  3]
1 [âˆ  0  âˆ  2]
2 [3  4  0  4]
3 [âˆ  âˆ  âˆ  0]

è·¯å¾„ç¤ºä¾‹ï¼š
- ä»0åˆ°3ï¼š0 â†’ 1 â†’ 3ï¼ˆè·ç¦»3ï¼‰
- ä»2åˆ°1ï¼š2 â†’ 0 â†’ 1ï¼ˆè·ç¦»4ï¼‰
```

**è´Ÿæƒå›è·¯æ£€æµ‹ç¤ºä¾‹ï¼š**

```
å¸¦è´Ÿæƒè¾¹çš„å›¾ï¼š
   0 --(-2)--> 1
   â†‘           |
   |           |
   3 <--(-1)-- 2

åˆå§‹distçŸ©é˜µï¼š
    0  1  2
0 [0  -2  âˆ]
1 [âˆ  0  âˆ]
2 [âˆ  -1  0]

k=0åï¼š
    0  1  2
0 [0  -2  âˆ]
1 [âˆ  0  âˆ]
2 [âˆ  -1  0]

k=1åï¼š
    0  1  2
0 [0  -2  âˆ]
1 [âˆ  0  âˆ]
2 [âˆ  -1  0]

k=2åï¼š
    0  1  2
0 [0  -2  âˆ]
1 [âˆ  0  âˆ]
2 [âˆ  -1  0]

å¦‚æœå­˜åœ¨è´Ÿæƒå›è·¯ï¼ˆå¦‚ï¼š0â†’1â†’2â†’0ï¼Œæ€»æƒé‡-2-1+3=0ï¼Œä½†å¦‚æœæœ‰-3çš„è¾¹ï¼‰ï¼š
æ£€æµ‹ï¼šdist[0][0] < 0ï¼Ÿå¦‚æœå­˜åœ¨è´Ÿæƒå›è·¯ï¼Œdist[i][i]ä¼šå˜æˆè´Ÿæ•°
```

**æ—¶é—´å¤æ‚åº¦ï¼š** O(VÂ³)
- ä¸‰é‡å¾ªç¯ï¼Œæ¯å±‚å¾ªç¯Væ¬¡
- æ€»æ¬¡æ•°ï¼šV Ã— V Ã— V = VÂ³

**ç©ºé—´å¤æ‚åº¦ï¼š** O(VÂ²)
- éœ€è¦å­˜å‚¨è·ç¦»çŸ©é˜µdist[V][V]
- å¦‚æœè®°å½•è·¯å¾„ï¼Œè¿˜éœ€è¦next[V][V]çŸ©é˜µ

**ç®—æ³•ç‰¹ç‚¹ï¼š**

âœ… **ä¼˜ç‚¹ï¼š**
- ä»£ç ç®€æ´ï¼Œå®ç°å®¹æ˜“
- ä¸€æ¬¡è®¡ç®—æ‰€æœ‰é¡¶ç‚¹å¯¹çš„æœ€çŸ­è·¯å¾„
- å¯ä»¥å¤„ç†è´Ÿæƒè¾¹ï¼ˆä½†ä¸èƒ½æœ‰è´Ÿæƒå›è·¯ï¼‰
- å¯ä»¥æ£€æµ‹è´Ÿæƒå›è·¯

âŒ **ç¼ºç‚¹ï¼š**
- æ—¶é—´å¤æ‚åº¦é«˜O(VÂ³)ï¼Œä¸é€‚åˆå¤§è§„æ¨¡å›¾
- ç©ºé—´å¤æ‚åº¦O(VÂ²)ï¼Œéœ€è¦çŸ©é˜µå­˜å‚¨

**åº”ç”¨åœºæ™¯ï¼š**

1. **ç½‘ç»œè·¯ç”±**ï¼šè®¡ç®—ç½‘ç»œä¸­ä»»æ„ä¸¤ç‚¹é—´çš„æœ€çŸ­è·¯å¾„
2. **äº¤é€šè§„åˆ’**ï¼šè®¡ç®—åŸå¸‚é—´çš„æœ€çŸ­è·ç¦»
3. **ç¤¾äº¤ç½‘ç»œ**ï¼šè®¡ç®—ç”¨æˆ·é—´çš„æœ€çŸ­å…³ç³»è·¯å¾„
4. **æ¸¸æˆå¼€å‘**ï¼šAIå¯»è·¯ç®—æ³•
5. **èµ„æºåˆ†é…**ï¼šè®¡ç®—æœ€ä¼˜ä¼ è¾“è·¯å¾„

**å¸¸è§è€ƒç‚¹ï¼š**

1. **ç®—æ³•åŸç†**ï¼šåŠ¨æ€è§„åˆ’æ€æƒ³ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹
2. **æ—¶é—´å¤æ‚åº¦**ï¼šO(VÂ³)ï¼Œä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ–¹
3. **ç©ºé—´ä¼˜åŒ–**ï¼šä»ä¸‰ç»´æ•°ç»„ä¼˜åŒ–åˆ°äºŒç»´æ•°ç»„
4. **è´Ÿæƒå›è·¯æ£€æµ‹**ï¼šå¦‚ä½•åˆ¤æ–­æ˜¯å¦å­˜åœ¨è´Ÿæƒå›è·¯
5. **è·¯å¾„é‡å»º**ï¼šå¦‚ä½•æ ¹æ®nextçŸ©é˜µé‡æ„è·¯å¾„
6. **ä¸Dijkstraçš„åŒºåˆ«**ï¼š
   - Dijkstraï¼šå•æºæœ€çŸ­è·¯å¾„ï¼ŒO(VÂ²)æˆ–O(E log V)
   - Floydï¼šæ‰€æœ‰é¡¶ç‚¹å¯¹æœ€çŸ­è·¯å¾„ï¼ŒO(VÂ³)
7. **é€‚ç”¨åœºæ™¯**ï¼š
   - éœ€è¦æ‰€æœ‰é¡¶ç‚¹å¯¹æœ€çŸ­è·¯å¾„æ—¶ç”¨Floyd
   - åªéœ€è¦å•æºæœ€çŸ­è·¯å¾„æ—¶ç”¨Dijkstraæ›´é«˜æ•ˆ

---

### 5.4 æœ€çŸ­è·¯å¾„ç®—æ³•å¯¹æ¯”

| ç®—æ³• | ç±»å‹ | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | é™åˆ¶ |
|------|------|----------|----------|------|
| **Dijkstra** | å•æº | O(VÂ²) æˆ– O(E log V) | O(V) | éè´Ÿæƒ |
| **Bellman-Ford** | å•æº | O(VE) | O(V) | å¯å¤„ç†è´Ÿæƒï¼Œæ£€æµ‹è´Ÿæƒå›è·¯ |
| **Floyd** | æ‰€æœ‰é¡¶ç‚¹å¯¹ | O(VÂ³) | O(VÂ²) | å¯å¤„ç†è´Ÿæƒï¼ˆæ— è´Ÿæƒå›è·¯ï¼‰ |

---

## å…­ã€æ‹“æ‰‘æ’åº

### 6.1 åŸºæœ¬æ¦‚å¿µ

**æ‹“æ‰‘æ’åºï¼ˆTopological Sortï¼‰**ï¼šå¯¹æœ‰å‘æ— ç¯å›¾ï¼ˆDAG, Directed Acyclic Graphï¼‰çš„é¡¶ç‚¹è¿›è¡Œæ’åºï¼Œä½¿å¾—å¯¹äºæ¯æ¡è¾¹<u,v>ï¼Œuåœ¨æ’åºä¸­å‡ºç°åœ¨vä¹‹å‰ã€‚

**æ ¸å¿ƒè¦æ±‚ï¼š**
- å›¾å¿…é¡»æ˜¯æœ‰å‘å›¾
- å›¾å¿…é¡»æ˜¯æ— ç¯å›¾ï¼ˆDAGï¼‰
- æ’åºç»“æœå¯èƒ½ä¸å”¯ä¸€

**å½¢å¼åŒ–å®šä¹‰ï¼š**
- å¯¹äºæœ‰å‘å›¾ G = (V, E)
- æ‹“æ‰‘æ’åºæ˜¯ä¸€ä¸ªé¡¶ç‚¹åºåˆ— vâ‚, vâ‚‚, ..., vâ‚™
- å¯¹äºä»»æ„è¾¹ <váµ¢, vâ±¼>ï¼Œéƒ½æœ‰ i < j

**åº”ç”¨åœºæ™¯ï¼š**
- **ä»»åŠ¡è°ƒåº¦**ï¼šç¡®å®šä»»åŠ¡çš„æ‰§è¡Œé¡ºåºï¼ˆä»»åŠ¡é—´æœ‰ä¾èµ–å…³ç³»ï¼‰
- **è¯¾ç¨‹å®‰æ’**ï¼šç¡®å®šè¯¾ç¨‹çš„å­¦ä¹ é¡ºåºï¼ˆå…ˆä¿®è¯¾ç¨‹å…³ç³»ï¼‰
- **ç¼–è¯‘ç³»ç»Ÿ**ï¼šç¡®å®šæºæ–‡ä»¶çš„ç¼–è¯‘é¡ºåºï¼ˆæ–‡ä»¶é—´æœ‰ä¾èµ–å…³ç³»ï¼‰
- **ä¾èµ–ç®¡ç†**ï¼šè½¯ä»¶åŒ…ä¾èµ–å…³ç³»çš„è§£æ
- **é¡¹ç›®ç®¡ç†**ï¼šç¡®å®šé¡¹ç›®æ´»åŠ¨çš„æ‰§è¡Œé¡ºåº

---

### 6.2 ç®—æ³•æ€æƒ³

æ‹“æ‰‘æ’åºçš„æ ¸å¿ƒæ€æƒ³æ˜¯**é€æ­¥ç§»é™¤å…¥åº¦ä¸º0çš„é¡¶ç‚¹**ï¼Œç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½è¢«å¤„ç†ã€‚

**åŸºæœ¬æ­¥éª¤ï¼š**
1. è®¡ç®—æ‰€æœ‰é¡¶ç‚¹çš„å…¥åº¦
2. å°†æ‰€æœ‰å…¥åº¦ä¸º0çš„é¡¶ç‚¹åŠ å…¥é˜Ÿåˆ—
3. ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªé¡¶ç‚¹ï¼ŒåŠ å…¥ç»“æœåºåˆ—
4. åˆ é™¤è¯¥é¡¶ç‚¹åŠå…¶æ‰€æœ‰å‡ºè¾¹ï¼ˆæ›´æ–°é‚»æ¥é¡¶ç‚¹çš„å…¥åº¦ï¼‰
5. å¦‚æœæŸä¸ªé‚»æ¥é¡¶ç‚¹çš„å…¥åº¦å˜ä¸º0ï¼Œå°†å…¶åŠ å…¥é˜Ÿåˆ—
6. é‡å¤æ­¥éª¤3-5ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º
7. å¦‚æœç»“æœåºåˆ—åŒ…å«æ‰€æœ‰é¡¶ç‚¹ï¼Œåˆ™æ‹“æ‰‘æ’åºæˆåŠŸï¼›å¦åˆ™å­˜åœ¨ç¯

---

### 6.3 Kahnç®—æ³•ï¼ˆåŸºäºBFSï¼‰

**Kahnç®—æ³•**ï¼šä½¿ç”¨é˜Ÿåˆ—å®ç°ï¼ŒåŸºäºå¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ€æƒ³ã€‚

**ç®—æ³•æ­¥éª¤è¯¦è§£ï¼š**
1. **åˆå§‹åŒ–**ï¼šè®¡ç®—æ‰€æœ‰é¡¶ç‚¹çš„å…¥åº¦
2. **å…¥é˜Ÿ**ï¼šå°†æ‰€æœ‰å…¥åº¦ä¸º0çš„é¡¶ç‚¹åŠ å…¥é˜Ÿåˆ—
3. **å¾ªç¯å¤„ç†**ï¼š
   - ä»é˜Ÿåˆ—å–å‡ºé¡¶ç‚¹uï¼ŒåŠ å…¥ç»“æœåºåˆ—
   - éå†uçš„æ‰€æœ‰é‚»æ¥é¡¶ç‚¹v
   - å°†vçš„å…¥åº¦å‡1
   - å¦‚æœvçš„å…¥åº¦å˜ä¸º0ï¼Œå°†våŠ å…¥é˜Ÿåˆ—
4. **æ£€æŸ¥**ï¼šå¦‚æœç»“æœåºåˆ—é•¿åº¦ç­‰äºé¡¶ç‚¹æ•°ï¼Œæ’åºæˆåŠŸï¼›å¦åˆ™å­˜åœ¨ç¯

**å®ç°ï¼š**

```java
import java.util.*;

public class TopologicalSort {
    private GraphAdjList graph;
    
    public TopologicalSort(GraphAdjList graph) {
        this.graph = graph;
    }
    
    // æ‹“æ‰‘æ’åºï¼ˆKahnç®—æ³•ï¼‰
    public List<Integer> topologicalSort() {
        int n = graph.vertexCount;
        int[] inDegree = new int[n];  // å…¥åº¦æ•°ç»„
        List<Integer> result = new ArrayList<>();  // ç»“æœåºåˆ—
        Queue<Integer> queue = new LinkedList<>();  // é˜Ÿåˆ—
        
        // æ­¥éª¤1ï¼šè®¡ç®—æ‰€æœ‰é¡¶ç‚¹çš„å…¥åº¦
        for (int i = 0; i < n; i++) {
            EdgeNode current = graph.adjList[i];
            while (current != null) {
                inDegree[current.to]++;  // ç»Ÿè®¡æ¯ä¸ªé¡¶ç‚¹çš„å…¥åº¦
                current = current.next;
            }
        }
        
        // æ­¥éª¤2ï¼šå°†æ‰€æœ‰å…¥åº¦ä¸º0çš„é¡¶ç‚¹åŠ å…¥é˜Ÿåˆ—
        for (int i = 0; i < n; i++) {
            if (inDegree[i] == 0) {
                queue.offer(i);
            }
        }
        
        // æ­¥éª¤3ï¼šKahnç®—æ³•ä¸»å¾ªç¯
        while (!queue.isEmpty()) {
            int u = queue.poll();  // å–å‡ºä¸€ä¸ªå…¥åº¦ä¸º0çš„é¡¶ç‚¹
            result.add(u);  // åŠ å…¥ç»“æœåºåˆ—
            
            // åˆ é™¤é¡¶ç‚¹uåŠå…¶æ‰€æœ‰å‡ºè¾¹ï¼ˆæ›´æ–°é‚»æ¥é¡¶ç‚¹çš„å…¥åº¦ï¼‰
            EdgeNode current = graph.adjList[u];
            while (current != null) {
                int v = current.to;
                inDegree[v]--;  // é‚»æ¥é¡¶ç‚¹çš„å…¥åº¦å‡1
                
                // å¦‚æœå…¥åº¦å˜ä¸º0ï¼ŒåŠ å…¥é˜Ÿåˆ—
                if (inDegree[v] == 0) {
                    queue.offer(v);
                }
                current = current.next;
            }
        }
        
        // æ­¥éª¤4ï¼šæ£€æŸ¥æ˜¯å¦æœ‰ç¯
        if (result.size() != n) {
            // ç»“æœåºåˆ—é•¿åº¦å°äºé¡¶ç‚¹æ•°ï¼Œè¯´æ˜å­˜åœ¨ç¯
            return new ArrayList<>();  // è¿”å›ç©ºåˆ—è¡¨è¡¨ç¤ºæ— æ³•æ‹“æ‰‘æ’åº
        }
        
        return result;
    }
    
    // åˆ¤æ–­å›¾æ˜¯å¦æœ‰ç¯ï¼ˆä½¿ç”¨Kahnç®—æ³•ï¼‰
    public boolean hasCycle() {
        List<Integer> result = topologicalSort();
        return result.isEmpty();
    }
}
```

**Kahnç®—æ³•ç‰¹ç‚¹ï¼š**
- âœ… å®ç°ç®€å•ç›´è§‚
- âœ… æ˜“äºç†è§£å’Œè°ƒè¯•
- âœ… å¯ä»¥æ£€æµ‹ç¯ï¼ˆç»“æœåºåˆ—é•¿åº¦ < é¡¶ç‚¹æ•°ï¼‰
- âœ… ç»“æœæŒ‰å±‚æ¬¡é¡ºåºè¾“å‡º

---

### 6.3.1 DFSç®—æ³•ï¼ˆåŸºäºæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰

**DFSç®—æ³•**ï¼šä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢å’Œæ ˆå®ç°æ‹“æ‰‘æ’åºã€‚

**ç®—æ³•æ€æƒ³ï¼š**
1. å¯¹å›¾è¿›è¡Œæ·±åº¦ä¼˜å…ˆéå†
2. å½“ä¸€ä¸ªé¡¶ç‚¹çš„æ‰€æœ‰é‚»æ¥é¡¶ç‚¹éƒ½è¢«è®¿é—®åï¼Œå°†è¯¥é¡¶ç‚¹å‹å…¥æ ˆ
3. æœ€åå°†æ ˆä¸­çš„å…ƒç´ ä¾æ¬¡å¼¹å‡ºï¼Œå¾—åˆ°æ‹“æ‰‘æ’åºç»“æœ

**å…³é”®ç‚¹ï¼š**
- DFSå®Œæˆåï¼Œæ ˆé¡¶æ˜¯æœ€åè®¿é—®çš„é¡¶ç‚¹ï¼ˆæ²¡æœ‰åç»§ï¼‰
- æ ˆåº•æ˜¯æœ€å…ˆè®¿é—®çš„é¡¶ç‚¹ï¼ˆæœ‰æœ€å¤šåç»§ï¼‰
- éœ€è¦å…ˆæ£€æµ‹ç¯ï¼Œå†è¿›è¡Œæ‹“æ‰‘æ’åº

**å®ç°ï¼š**
```java
    // æ‹“æ‰‘æ’åºï¼ˆDFSç‰ˆæœ¬ï¼‰
    public List<Integer> topologicalSortDFS() {
        int n = graph.vertexCount;
        boolean[] visited = new boolean[n];  // è®¿é—®æ ‡è®°
        boolean[] onStack = new boolean[n];   // æ ˆæ ‡è®°ï¼ˆç”¨äºæ£€æµ‹ç¯ï¼‰
        Stack<Integer> stack = new Stack<>(); // ç»“æœæ ˆ
        
        // æ­¥éª¤1ï¼šæ£€æŸ¥æ˜¯å¦æœ‰ç¯
        for (int i = 0; i < n; i++) {
            if (!visited[i] && hasCycle(i, visited, onStack)) {
                return new ArrayList<>();  // å­˜åœ¨ç¯ï¼Œæ— æ³•æ‹“æ‰‘æ’åº
            }
        }
        
        // æ­¥éª¤2ï¼šé‡ç½®è®¿é—®æ ‡è®°ï¼Œè¿›è¡ŒDFSæ‹“æ‰‘æ’åº
        Arrays.fill(visited, false);
        
        for (int i = 0; i < n; i++) {
            if (!visited[i]) {
                dfsTopological(i, visited, stack);
            }
        }
        
        // æ­¥éª¤3ï¼šå°†æ ˆä¸­çš„å…ƒç´ å€’åºè¾“å‡º
        List<Integer> result = new ArrayList<>();
        while (!stack.isEmpty()) {
            result.add(stack.pop());
        }
        
        return result;
    }
    
    // DFSé€’å½’å‡½æ•°ï¼šæ·±åº¦ä¼˜å…ˆéå†å¹¶å‹æ ˆ
    private void dfsTopological(int vertex, boolean[] visited, Stack<Integer> stack) {
        visited[vertex] = true;
        
        // å…ˆé€’å½’è®¿é—®æ‰€æœ‰é‚»æ¥é¡¶ç‚¹
        List<Integer> adjacent = graph.getAdjacent(vertex);
        for (int adj : adjacent) {
            if (!visited[adj]) {
                dfsTopological(adj, visited, stack);
            }
        }
        
        // æ‰€æœ‰é‚»æ¥é¡¶ç‚¹è®¿é—®å®Œæˆåï¼Œå°†å½“å‰é¡¶ç‚¹å‹æ ˆ
        // è¿™æ ·æ ˆé¡¶æ˜¯æœ€åè®¿é—®çš„é¡¶ç‚¹ï¼ˆæ²¡æœ‰åç»§ï¼‰ï¼Œæ ˆåº•æ˜¯æœ€å…ˆè®¿é—®çš„é¡¶ç‚¹ï¼ˆæœ‰æœ€å¤šåç»§ï¼‰
        stack.push(vertex);
    }
    
    // æ£€æµ‹æœ‰å‘å›¾ä¸­æ˜¯å¦å­˜åœ¨ç¯ï¼ˆDFSæ–¹æ³•ï¼‰
    private boolean hasCycle(int vertex, boolean[] visited, boolean[] onStack) {
        visited[vertex] = true;
        onStack[vertex] = true;  // æ ‡è®°å½“å‰é¡¶ç‚¹åœ¨é€’å½’æ ˆä¸­
        
        // éå†æ‰€æœ‰é‚»æ¥é¡¶ç‚¹
        List<Integer> adjacent = graph.getAdjacent(vertex);
        for (int adj : adjacent) {
            if (!visited[adj]) {
                // æœªè®¿é—®çš„é¡¶ç‚¹ï¼Œé€’å½’æ£€æµ‹
                if (hasCycle(adj, visited, onStack)) {
                    return true;
                }
            } else if (onStack[adj]) {
                // å¦‚æœé‚»æ¥é¡¶ç‚¹å·²åœ¨æ ˆä¸­ï¼Œè¯´æ˜å­˜åœ¨åå‘è¾¹ï¼Œå½¢æˆç¯
                return true;
            }
        }
        
        // å›æº¯ï¼šå½“å‰é¡¶ç‚¹çš„æ‰€æœ‰é‚»æ¥é¡¶ç‚¹éƒ½å·²å¤„ç†å®Œï¼Œå°†å…¶ä»æ ˆä¸­ç§»é™¤
        onStack[vertex] = false;
        return false;
    }
}
```

---

### 6.4 ç®—æ³•ç¤ºä¾‹è¯¦è§£

#### ç¤ºä¾‹1ï¼šè¯¾ç¨‹å®‰æ’é—®é¢˜

**é—®é¢˜æè¿°ï¼š**
- è¯¾ç¨‹0ï¼šæ— å…ˆä¿®è¯¾ç¨‹
- è¯¾ç¨‹1ï¼šéœ€è¦å…ˆä¿®è¯¾ç¨‹0
- è¯¾ç¨‹2ï¼šéœ€è¦å…ˆä¿®è¯¾ç¨‹0
- è¯¾ç¨‹3ï¼šéœ€è¦å…ˆä¿®è¯¾ç¨‹1å’Œ2

**æœ‰å‘å›¾è¡¨ç¤ºï¼š**
```
    0 â†’ 1 â†’ 3
    â†“       â†‘
    2 â”€â”€â”€â”€â”€â”€â”˜
```

**Kahnç®—æ³•æ‰§è¡Œè¿‡ç¨‹ï¼š**

| æ­¥éª¤ | é˜Ÿåˆ—çŠ¶æ€ | å…¥åº¦æ•°ç»„ | å¤„ç†é¡¶ç‚¹ | ç»“æœåºåˆ— |
|------|---------|---------|---------|---------|
| åˆå§‹ | [0] | [0,1,1,2] | - | [] |
| 1 | [] | [0,0,1,2] | 0 | [0] |
| 2 | [1,2] | [0,0,0,2] | 1 | [0,1] |
| 3 | [2] | [0,0,0,1] | 2 | [0,1,2] |
| 4 | [3] | [0,0,0,0] | 3 | [0,1,2,3] |
| 5 | [] | [0,0,0,0] | - | [0,1,2,3] |

**æ‹“æ‰‘æ’åºç»“æœï¼š** `[0, 1, 2, 3]` æˆ– `[0, 2, 1, 3]`ï¼ˆç»“æœå¯èƒ½ä¸å”¯ä¸€ï¼‰

**DFSç®—æ³•æ‰§è¡Œè¿‡ç¨‹ï¼š**
- DFS(0) â†’ DFS(1) â†’ DFS(3) â†’ å‹æ ˆ3 â†’ å‹æ ˆ1 â†’ DFS(2) â†’ å‹æ ˆ2 â†’ å‹æ ˆ0
- æ ˆä¸­é¡ºåºï¼ˆä»åº•åˆ°é¡¶ï¼‰ï¼š0, 2, 1, 3
- å‡ºæ ˆé¡ºåºï¼š3, 1, 2, 0
- **æ³¨æ„**ï¼šDFSç‰ˆæœ¬çš„ç»“æœæ˜¯é€†åºçš„ï¼Œéœ€è¦åè½¬

---

#### ç¤ºä¾‹2ï¼šæ£€æµ‹ç¯

**æœ‰ç¯å›¾ï¼š**
```
    0 â†’ 1 â†’ 2
    â†‘       â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Kahnç®—æ³•æ‰§è¡Œï¼š**
- åˆå§‹ï¼šåªæœ‰é¡¶ç‚¹0å…¥åº¦ä¸º0ï¼Œé˜Ÿåˆ— = [0]
- å¤„ç†0ï¼šé˜Ÿåˆ—å˜ä¸ºç©ºï¼Œä½†è¿˜æœ‰é¡¶ç‚¹1å’Œ2æœªå¤„ç†
- **ç»“æœ**ï¼šresult.size() = 1 < 4ï¼Œæ£€æµ‹åˆ°ç¯

**DFSç®—æ³•æ‰§è¡Œï¼š**
- DFS(0) â†’ DFS(1) â†’ DFS(2) â†’ å‘ç°2æŒ‡å‘0ï¼Œä¸”0åœ¨æ ˆä¸­
- **ç»“æœ**ï¼šæ£€æµ‹åˆ°ç¯

---

### 6.5 Kahnç®—æ³• vs DFSç®—æ³•

| ç‰¹æ€§ | Kahnç®—æ³•ï¼ˆBFSï¼‰ | DFSç®—æ³• |
|------|----------------|---------|
| **æ•°æ®ç»“æ„** | é˜Ÿåˆ— | æ ˆï¼ˆé€’å½’æˆ–æ˜¾å¼ï¼‰ |
| **ç®—æ³•æ€æƒ³** | å¹¿åº¦ä¼˜å…ˆï¼Œé€å±‚å¤„ç† | æ·±åº¦ä¼˜å…ˆï¼Œé€’å½’å›æº¯ |
| **ç¯æ£€æµ‹** | ç»“æœåºåˆ—é•¿åº¦ < é¡¶ç‚¹æ•° | åå‘è¾¹æ£€æµ‹ |
| **ç»“æœé¡ºåº** | æŒ‰å…¥åº¦0çš„é¡ºåº | é€†åºï¼ˆéœ€è¦åè½¬ï¼‰ |
| **å®ç°å¤æ‚åº¦** | ç®€å•ç›´è§‚ | éœ€è¦ç†è§£é€’å½’ |
| **é€‚ç”¨åœºæ™¯** | éœ€è¦æŒ‰å±‚æ¬¡å¤„ç† | éœ€è¦æ·±åº¦ä¼˜å…ˆéå† |
| **æ—¶é—´å¤æ‚åº¦** | O(V + E) | O(V + E) |
| **ç©ºé—´å¤æ‚åº¦** | O(V) | O(V)ï¼ˆé€’å½’æ ˆï¼‰ |

**é€‰æ‹©å»ºè®®ï¼š**
- **Kahnç®—æ³•**ï¼šæ›´ç›´è§‚ï¼Œæ˜“äºç†è§£ï¼Œæ¨èä½¿ç”¨
- **DFSç®—æ³•**ï¼šåœ¨éœ€è¦æ·±åº¦ä¼˜å…ˆéå†çš„åœºæ™¯ä¸‹ä½¿ç”¨

---

### 6.6 å®é™…åº”ç”¨æ¡ˆä¾‹

#### æ¡ˆä¾‹1ï¼šä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ

**åœºæ™¯ï¼š** å¤šä¸ªä»»åŠ¡æœ‰ä¾èµ–å…³ç³»ï¼Œéœ€è¦ç¡®å®šæ‰§è¡Œé¡ºåº

```java
// ä»»åŠ¡ä¾èµ–å…³ç³»
// Task 0: æ— ä¾èµ–
// Task 1: ä¾èµ– Task 0
// Task 2: ä¾èµ– Task 0
// Task 3: ä¾èµ– Task 1, Task 2

// æ‹“æ‰‘æ’åºç»“æœï¼š[0, 1, 2, 3] æˆ– [0, 2, 1, 3]
// æ‰§è¡Œé¡ºåºï¼šå…ˆæ‰§è¡Œ0ï¼Œç„¶åå¯ä»¥å¹¶è¡Œæ‰§è¡Œ1å’Œ2ï¼Œæœ€åæ‰§è¡Œ3
```

#### æ¡ˆä¾‹2ï¼šç¼–è¯‘ç³»ç»Ÿ

**åœºæ™¯ï¼š** å¤šä¸ªæºæ–‡ä»¶æœ‰ä¾èµ–å…³ç³»ï¼Œéœ€è¦ç¡®å®šç¼–è¯‘é¡ºåº

```java
// æ–‡ä»¶ä¾èµ–å…³ç³»
// fileA.c: æ— ä¾èµ–
// fileB.c: ä¾èµ– fileA.c
// fileC.c: ä¾èµ– fileA.c
// fileD.c: ä¾èµ– fileB.c, fileC.c

// æ‹“æ‰‘æ’åºç»“æœï¼š[fileA, fileB, fileC, fileD]
// ç¼–è¯‘é¡ºåºï¼šå…ˆç¼–è¯‘fileAï¼Œç„¶åå¯ä»¥å¹¶è¡Œç¼–è¯‘fileBå’ŒfileCï¼Œæœ€åç¼–è¯‘fileD
```

#### æ¡ˆä¾‹3ï¼šè¯¾ç¨‹å­¦ä¹ è®¡åˆ’

**åœºæ™¯ï¼š** å¤šé—¨è¯¾ç¨‹æœ‰å…ˆä¿®å…³ç³»ï¼Œéœ€è¦ç¡®å®šå­¦ä¹ é¡ºåº

```java
// è¯¾ç¨‹å…ˆä¿®å…³ç³»
// æ•°æ®ç»“æ„ï¼šæ— å…ˆä¿®
// ç®—æ³•åˆ†æï¼šéœ€è¦å…ˆä¿®æ•°æ®ç»“æ„
// æ“ä½œç³»ç»Ÿï¼šéœ€è¦å…ˆä¿®æ•°æ®ç»“æ„
// ç¼–è¯‘åŸç†ï¼šéœ€è¦å…ˆä¿®ç®—æ³•åˆ†æã€æ“ä½œç³»ç»Ÿ

// æ‹“æ‰‘æ’åºç»“æœï¼š[æ•°æ®ç»“æ„, ç®—æ³•åˆ†æ, æ“ä½œç³»ç»Ÿ, ç¼–è¯‘åŸç†]
// å­¦ä¹ é¡ºåºï¼šå…ˆå­¦æ•°æ®ç»“æ„ï¼Œç„¶åå¯ä»¥å¹¶è¡Œå­¦ä¹ ç®—æ³•åˆ†æå’Œæ“ä½œç³»ç»Ÿï¼Œæœ€åå­¦ç¼–è¯‘åŸç†
```

---

### 6.7 æ—¶é—´å¤æ‚åº¦åˆ†æ

**Kahnç®—æ³•ï¼š**
- **æ—¶é—´å¤æ‚åº¦ï¼š** O(V + E)
  - è®¡ç®—å…¥åº¦ï¼šO(E)
  - é˜Ÿåˆ—æ“ä½œï¼šO(V)
  - æ›´æ–°å…¥åº¦ï¼šO(E)
- **ç©ºé—´å¤æ‚åº¦ï¼š** O(V)
  - å…¥åº¦æ•°ç»„ï¼šO(V)
  - é˜Ÿåˆ—ï¼šO(V)
  - ç»“æœæ•°ç»„ï¼šO(V)

**DFSç®—æ³•ï¼š**
- **æ—¶é—´å¤æ‚åº¦ï¼š** O(V + E)
  - DFSéå†ï¼šO(V + E)
  - ç¯æ£€æµ‹ï¼šO(V + E)
- **ç©ºé—´å¤æ‚åº¦ï¼š** O(V)
  - è®¿é—®æ ‡è®°ï¼šO(V)
  - é€’å½’æ ˆï¼šO(V)
  - ç»“æœæ ˆï¼šO(V)

---

### 6.8 å¸¸è§è€ƒç‚¹

1. **æ‹“æ‰‘æ’åºçš„å®šä¹‰å’Œæ€§è´¨**
   - åªé€‚ç”¨äºæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰
   - ç»“æœå¯èƒ½ä¸å”¯ä¸€

2. **ç¯æ£€æµ‹**
   - Kahnç®—æ³•ï¼šç»“æœåºåˆ—é•¿åº¦ < é¡¶ç‚¹æ•°
   - DFSç®—æ³•ï¼šå­˜åœ¨åå‘è¾¹

3. **ç®—æ³•å®ç°**
   - Kahnç®—æ³•çš„é˜Ÿåˆ—æ“ä½œ
   - DFSç®—æ³•çš„é€’å½’å’Œæ ˆæ“ä½œ

4. **åº”ç”¨åœºæ™¯**
   - ä»»åŠ¡è°ƒåº¦
   - è¯¾ç¨‹å®‰æ’
   - ä¾èµ–å…³ç³»å¤„ç†

5. **æ—¶é—´å¤æ‚åº¦**
   - ä¸¤ç§ç®—æ³•éƒ½æ˜¯ O(V + E)

---

## ä¸ƒã€å…³é”®è·¯å¾„

### 7.1 åŸºæœ¬æ¦‚å¿µ

**å…³é”®è·¯å¾„ï¼ˆCritical Pathï¼‰**ï¼šåœ¨AOEç½‘ï¼ˆActivity On Edgeï¼‰ä¸­ï¼Œä»æºç‚¹åˆ°æ±‡ç‚¹çš„**æœ€é•¿è·¯å¾„**ã€‚

**AOEç½‘ï¼ˆActivity On Edge Networkï¼‰**ï¼š
- **æœ‰å‘è¾¹**è¡¨ç¤º**æ´»åŠ¨**ï¼ˆActivityï¼‰
- **è¾¹ä¸Šçš„æƒå€¼**è¡¨ç¤ºæ´»åŠ¨çš„**æŒç»­æ—¶é—´**
- **é¡¶ç‚¹**è¡¨ç¤º**äº‹ä»¶**ï¼ˆEventï¼‰ï¼Œå³æ´»åŠ¨çš„å¼€å§‹æˆ–ç»“æŸæ—¶åˆ»
- **æºç‚¹**ï¼šå…¥åº¦ä¸º0çš„é¡¶ç‚¹ï¼ˆå·¥ç¨‹å¼€å§‹ï¼‰
- **æ±‡ç‚¹**ï¼šå‡ºåº¦ä¸º0çš„é¡¶ç‚¹ï¼ˆå·¥ç¨‹ç»“æŸï¼‰

**AOEç½‘ vs AOVç½‘ï¼š**

| ç‰¹æ€§ | AOEç½‘ï¼ˆActivity On Edgeï¼‰ | AOVç½‘ï¼ˆActivity On Vertexï¼‰ |
|------|-------------------------|---------------------------|
| **è¾¹** | è¡¨ç¤ºæ´»åŠ¨ | è¡¨ç¤ºæ´»åŠ¨é—´çš„ä¼˜å…ˆå…³ç³» |
| **é¡¶ç‚¹** | è¡¨ç¤ºäº‹ä»¶ | è¡¨ç¤ºæ´»åŠ¨ |
| **æƒå€¼** | åœ¨è¾¹ä¸Šï¼ˆæ´»åŠ¨æŒç»­æ—¶é—´ï¼‰ | åœ¨é¡¶ç‚¹ä¸Šï¼ˆæ´»åŠ¨æŒç»­æ—¶é—´ï¼‰ |
| **åº”ç”¨** | å…³é”®è·¯å¾„åˆ†æ | æ‹“æ‰‘æ’åº |
| **é—®é¢˜** | æ±‚æœ€é•¿è·¯å¾„ | æ±‚æ‹“æ‰‘åºåˆ— |

**å…³é”®æœ¯è¯­ï¼š**

1. **äº‹ä»¶ï¼ˆEventï¼‰**ï¼šé¡¶ç‚¹ï¼Œè¡¨ç¤ºæ´»åŠ¨çš„å¼€å§‹æˆ–ç»“æŸæ—¶åˆ»
2. **æ´»åŠ¨ï¼ˆActivityï¼‰**ï¼šè¾¹ï¼Œè¡¨ç¤ºä¸€ä¸ªè¿‡ç¨‹æˆ–ä»»åŠ¡
3. **æ´»åŠ¨æŒç»­æ—¶é—´**ï¼šè¾¹ä¸Šçš„æƒå€¼
4. **æºç‚¹ï¼ˆSourceï¼‰**ï¼šå…¥åº¦ä¸º0çš„é¡¶ç‚¹ï¼Œå·¥ç¨‹å¼€å§‹äº‹ä»¶
5. **æ±‡ç‚¹ï¼ˆSinkï¼‰**ï¼šå‡ºåº¦ä¸º0çš„é¡¶ç‚¹ï¼Œå·¥ç¨‹ç»“æŸäº‹ä»¶
6. **äº‹ä»¶çš„æœ€æ—©å‘ç”Ÿæ—¶é—´ï¼ˆveï¼‰**ï¼šä»æºç‚¹åˆ°è¯¥äº‹ä»¶çš„æœ€é•¿è·¯å¾„é•¿åº¦
7. **äº‹ä»¶çš„æœ€è¿Ÿå‘ç”Ÿæ—¶é—´ï¼ˆvlï¼‰**ï¼šåœ¨ä¸å½±å“æ•´ä¸ªå·¥ç¨‹å·¥æœŸçš„å‰æä¸‹ï¼Œè¯¥äº‹ä»¶æœ€è¿Ÿå¿…é¡»å‘ç”Ÿçš„æ—¶é—´
8. **æ´»åŠ¨çš„æœ€æ—©å¼€å§‹æ—¶é—´ï¼ˆeï¼‰**ï¼šè¯¥æ´»åŠ¨æœ€æ—©å¯ä»¥å¼€å§‹çš„æ—¶é—´
9. **æ´»åŠ¨çš„æœ€è¿Ÿå¼€å§‹æ—¶é—´ï¼ˆlï¼‰**ï¼šåœ¨ä¸å½±å“æ•´ä¸ªå·¥ç¨‹å·¥æœŸçš„å‰æä¸‹ï¼Œè¯¥æ´»åŠ¨æœ€è¿Ÿå¿…é¡»å¼€å§‹çš„æ—¶é—´
10. **å…³é”®æ´»åŠ¨**ï¼še = l çš„æ´»åŠ¨ï¼Œå³æ²¡æœ‰æ—¶é—´ä½™é‡çš„æ´»åŠ¨
11. **å…³é”®è·¯å¾„**ï¼šç”±å…³é”®æ´»åŠ¨ç»„æˆçš„è·¯å¾„

**å…³é”®è·¯å¾„ç‰¹ç‚¹ï¼š**
- âœ… å…³é”®è·¯å¾„ä¸Šçš„æ´»åŠ¨ç§°ä¸ºå…³é”®æ´»åŠ¨
- âœ… å…³é”®è·¯å¾„çš„é•¿åº¦å†³å®šæ•´ä¸ªå·¥ç¨‹çš„å·¥æœŸ
- âœ… ç¼©çŸ­å…³é”®æ´»åŠ¨å¯ä»¥ç¼©çŸ­å·¥æœŸ
- âœ… éå…³é”®æ´»åŠ¨å¯ä»¥é€‚å½“å»¶è¿Ÿï¼Œä¸å½±å“æ€»å·¥æœŸ
- âœ… å…³é”®è·¯å¾„å¯èƒ½ä¸å”¯ä¸€

---

### 7.2 ç®—æ³•æ€æƒ³

å…³é”®è·¯å¾„ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š
1. **æ­£å‘è®¡ç®—**ï¼šä»æºç‚¹å¼€å§‹ï¼ŒæŒ‰æ‹“æ‰‘é¡ºåºè®¡ç®—æ¯ä¸ªäº‹ä»¶çš„æœ€æ—©å‘ç”Ÿæ—¶é—´
2. **åå‘è®¡ç®—**ï¼šä»æ±‡ç‚¹å¼€å§‹ï¼ŒæŒ‰é€†æ‹“æ‰‘é¡ºåºè®¡ç®—æ¯ä¸ªäº‹ä»¶çš„æœ€è¿Ÿå‘ç”Ÿæ—¶é—´
3. **è®¡ç®—æ´»åŠ¨æ—¶é—´**ï¼šæ ¹æ®äº‹ä»¶æ—¶é—´è®¡ç®—æ´»åŠ¨çš„æœ€æ—©å’Œæœ€è¿Ÿå¼€å§‹æ—¶é—´
4. **æ‰¾å‡ºå…³é”®æ´»åŠ¨**ï¼še = l çš„æ´»åŠ¨å³ä¸ºå…³é”®æ´»åŠ¨

---

### 7.3 ç®—æ³•æ­¥éª¤è¯¦è§£

#### æ­¥éª¤1ï¼šæ‹“æ‰‘æ’åºç¡®å®šäº‹ä»¶é¡ºåº

ä½¿ç”¨æ‹“æ‰‘æ’åºç¡®å®šäº‹ä»¶çš„æ‰§è¡Œé¡ºåºï¼Œå¾—åˆ°æ‹“æ‰‘åºåˆ—ã€‚

#### æ­¥éª¤2ï¼šè®¡ç®—äº‹ä»¶çš„æœ€æ—©å‘ç”Ÿæ—¶é—´ï¼ˆveï¼‰

**å…¬å¼ï¼š**
- ve[æºç‚¹] = 0
- ve[j] = max{ve[i] + weight(i,j)}ï¼Œå…¶ä¸­ <i,j> æ˜¯åˆ°è¾¾jçš„æ‰€æœ‰è¾¹

**è®¡ç®—æ–¹å‘ï¼š** ä»æºç‚¹å¼€å§‹ï¼ŒæŒ‰æ‹“æ‰‘é¡ºåºæ­£å‘è®¡ç®—

#### æ­¥éª¤3ï¼šè®¡ç®—äº‹ä»¶çš„æœ€è¿Ÿå‘ç”Ÿæ—¶é—´ï¼ˆvlï¼‰

**å…¬å¼ï¼š**
- vl[æ±‡ç‚¹] = ve[æ±‡ç‚¹]
- vl[i] = min{vl[j] - weight(i,j)}ï¼Œå…¶ä¸­ <i,j> æ˜¯ä»iå‡ºå‘çš„æ‰€æœ‰è¾¹

**è®¡ç®—æ–¹å‘ï¼š** ä»æ±‡ç‚¹å¼€å§‹ï¼ŒæŒ‰é€†æ‹“æ‰‘é¡ºåºåå‘è®¡ç®—

#### æ­¥éª¤4ï¼šè®¡ç®—æ´»åŠ¨çš„æœ€æ—©å¼€å§‹æ—¶é—´ï¼ˆeï¼‰

**å…¬å¼ï¼š**
- e[k] = ve[i]ï¼Œå…¶ä¸­æ´»åŠ¨k = <i,j>

**å«ä¹‰ï¼š** æ´»åŠ¨kçš„æœ€æ—©å¼€å§‹æ—¶é—´ç­‰äºå…¶èµ·å§‹äº‹ä»¶içš„æœ€æ—©å‘ç”Ÿæ—¶é—´

#### æ­¥éª¤5ï¼šè®¡ç®—æ´»åŠ¨çš„æœ€è¿Ÿå¼€å§‹æ—¶é—´ï¼ˆlï¼‰

**å…¬å¼ï¼š**
- l[k] = vl[j] - weight(i,j)ï¼Œå…¶ä¸­æ´»åŠ¨k = <i,j>

**å«ä¹‰ï¼š** æ´»åŠ¨kçš„æœ€è¿Ÿå¼€å§‹æ—¶é—´ç­‰äºå…¶ç»“æŸäº‹ä»¶jçš„æœ€è¿Ÿå‘ç”Ÿæ—¶é—´å‡å»æ´»åŠ¨æŒç»­æ—¶é—´

#### æ­¥éª¤6ï¼šæ‰¾å‡ºå…³é”®æ´»åŠ¨

**åˆ¤æ–­æ¡ä»¶ï¼š**
- å¦‚æœ e[k] = l[k]ï¼Œåˆ™æ´»åŠ¨kæ˜¯å…³é”®æ´»åŠ¨
- æ‰€æœ‰å…³é”®æ´»åŠ¨ç»„æˆçš„è·¯å¾„å³ä¸ºå…³é”®è·¯å¾„

---

### 7.4 ç®—æ³•å®ç°

```java
import java.util.*;

public class CriticalPath {
    private GraphAdjList graph;
    private int vertexCount;
    
    public CriticalPath(GraphAdjList graph) {
        this.graph = graph;
        this.vertexCount = graph.vertexCount;
    }
    
    // å…³é”®è·¯å¾„ç®—æ³•
    public CriticalPathResult findCriticalPath() {
        // æ­¥éª¤1ï¼šæ‹“æ‰‘æ’åº
        List<Integer> topoOrder = topologicalSort();
        if (topoOrder.isEmpty()) {
            return null;  // å­˜åœ¨ç¯ï¼Œæ— æ³•è®¡ç®—å…³é”®è·¯å¾„
        }
        
        int source = topoOrder.get(0);  // æºç‚¹ï¼ˆæ‹“æ‰‘åºåˆ—ç¬¬ä¸€ä¸ªï¼‰
        int sink = topoOrder.get(topoOrder.size() - 1);  // æ±‡ç‚¹ï¼ˆæ‹“æ‰‘åºåˆ—æœ€åä¸€ä¸ªï¼‰
        
        // æ­¥éª¤2ï¼šè®¡ç®—äº‹ä»¶çš„æœ€æ—©å‘ç”Ÿæ—¶é—´ï¼ˆveï¼‰
        int[] ve = new int[vertexCount];
        Arrays.fill(ve, 0);
        
        for (int u : topoOrder) {
            List<Integer> adjacent = graph.getAdjacent(u);
            for (int v : adjacent) {
                int weight = graph.getWeight(u, v);
                ve[v] = Math.max(ve[v], ve[u] + weight);
            }
        }
        
        // æ­¥éª¤3ï¼šè®¡ç®—äº‹ä»¶çš„æœ€è¿Ÿå‘ç”Ÿæ—¶é—´ï¼ˆvlï¼‰
        int[] vl = new int[vertexCount];
        Arrays.fill(vl, ve[sink]);  // åˆå§‹åŒ–ä¸ºæ±‡ç‚¹çš„æœ€æ—©å‘ç”Ÿæ—¶é—´
        
        // é€†æ‹“æ‰‘é¡ºåºè®¡ç®—
        Collections.reverse(topoOrder);
        for (int u : topoOrder) {
            List<Integer> adjacent = graph.getAdjacent(u);
            for (int v : adjacent) {
                int weight = graph.getWeight(u, v);
                vl[u] = Math.min(vl[u], vl[v] - weight);
            }
        }
        Collections.reverse(topoOrder);  // æ¢å¤æ‹“æ‰‘é¡ºåº
        
        // æ­¥éª¤4å’Œ5ï¼šè®¡ç®—æ´»åŠ¨çš„æœ€æ—©å’Œæœ€è¿Ÿå¼€å§‹æ—¶é—´ï¼Œæ‰¾å‡ºå…³é”®æ´»åŠ¨
        List<Activity> activities = new ArrayList<>();
        List<Activity> criticalActivities = new ArrayList<>();
        
        for (int u = 0; u < vertexCount; u++) {
            List<Integer> adjacent = graph.getAdjacent(u);
            for (int v : adjacent) {
                int weight = graph.getWeight(u, v);
                int e = ve[u];  // æ´»åŠ¨çš„æœ€æ—©å¼€å§‹æ—¶é—´
                int l = vl[v] - weight;  // æ´»åŠ¨çš„æœ€è¿Ÿå¼€å§‹æ—¶é—´
                
                Activity activity = new Activity(u, v, weight, e, l);
                activities.add(activity);
                
                if (e == l) {
                    criticalActivities.add(activity);  // å…³é”®æ´»åŠ¨
                }
            }
        }
        
        return new CriticalPathResult(
            ve, vl, activities, criticalActivities, ve[sink]
        );
    }
    
    // æ‹“æ‰‘æ’åºï¼ˆKahnç®—æ³•ï¼‰
    private List<Integer> topologicalSort() {
        int[] inDegree = new int[vertexCount];
        List<Integer> result = new ArrayList<>();
        Queue<Integer> queue = new LinkedList<>();
        
        // è®¡ç®—å…¥åº¦
        for (int i = 0; i < vertexCount; i++) {
            List<Integer> adjacent = graph.getAdjacent(i);
            for (int adj : adjacent) {
                inDegree[adj]++;
            }
        }
        
        // å…¥åº¦ä¸º0çš„é¡¶ç‚¹å…¥é˜Ÿ
        for (int i = 0; i < vertexCount; i++) {
            if (inDegree[i] == 0) {
                queue.offer(i);
            }
        }
        
        // Kahnç®—æ³•
        while (!queue.isEmpty()) {
            int u = queue.poll();
            result.add(u);
            
            List<Integer> adjacent = graph.getAdjacent(u);
            for (int v : adjacent) {
                inDegree[v]--;
                if (inDegree[v] == 0) {
                    queue.offer(v);
                }
            }
        }
        
        if (result.size() != vertexCount) {
            return new ArrayList<>();  // å­˜åœ¨ç¯
        }
        
        return result;
    }
}

// æ´»åŠ¨ç±»
class Activity {
    int from;      // èµ·å§‹äº‹ä»¶
    int to;        // ç»“æŸäº‹ä»¶
    int weight;    // æ´»åŠ¨æŒç»­æ—¶é—´
    int e;         // æœ€æ—©å¼€å§‹æ—¶é—´
    int l;         // æœ€è¿Ÿå¼€å§‹æ—¶é—´
    
    Activity(int from, int to, int weight, int e, int l) {
        this.from = from;
        this.to = to;
        this.weight = weight;
        this.e = e;
        this.l = l;
    }
    
    boolean isCritical() {
        return e == l;
    }
    
    @Override
    public String toString() {
        return String.format("æ´»åŠ¨<%d,%d>: æŒç»­æ—¶é—´=%d, e=%d, l=%d, %s",
            from, to, weight, e, l, isCritical() ? "å…³é”®æ´»åŠ¨" : "éå…³é”®æ´»åŠ¨");
    }
}

// å…³é”®è·¯å¾„ç»“æœç±»
class CriticalPathResult {
    int[] ve;                      // äº‹ä»¶æœ€æ—©å‘ç”Ÿæ—¶é—´
    int[] vl;                      // äº‹ä»¶æœ€è¿Ÿå‘ç”Ÿæ—¶é—´
    List<Activity> activities;     // æ‰€æœ‰æ´»åŠ¨
    List<Activity> criticalActivities;  // å…³é”®æ´»åŠ¨
    int totalTime;                 // æ€»å·¥æœŸ
    
    CriticalPathResult(int[] ve, int[] vl, List<Activity> activities,
                      List<Activity> criticalActivities, int totalTime) {
        this.ve = ve;
        this.vl = vl;
        this.activities = activities;
        this.criticalActivities = criticalActivities;
        this.totalTime = totalTime;
    }
    
    void print() {
        System.out.println("=== å…³é”®è·¯å¾„åˆ†æç»“æœ ===");
        System.out.println("æ€»å·¥æœŸ: " + totalTime);
        System.out.println("\näº‹ä»¶æœ€æ—©å‘ç”Ÿæ—¶é—´ï¼ˆveï¼‰:");
        for (int i = 0; i < ve.length; i++) {
            System.out.printf("ve[%d] = %d\n", i, ve[i]);
        }
        System.out.println("\näº‹ä»¶æœ€è¿Ÿå‘ç”Ÿæ—¶é—´ï¼ˆvlï¼‰:");
        for (int i = 0; i < vl.length; i++) {
            System.out.printf("vl[%d] = %d\n", i, vl[i]);
        }
        System.out.println("\næ‰€æœ‰æ´»åŠ¨:");
        for (Activity activity : activities) {
            System.out.println(activity);
        }
        System.out.println("\nå…³é”®æ´»åŠ¨:");
        for (Activity activity : criticalActivities) {
            System.out.println(activity);
        }
    }
}
```

---

### 7.5 ç®—æ³•ç¤ºä¾‹è¯¦è§£

#### ç¤ºä¾‹ï¼šå·¥ç¨‹é¡¹ç›®ç®¡ç†

**AOEç½‘ï¼š**
```
        æ´»åŠ¨a1(6)     æ´»åŠ¨a4(1)
    äº‹ä»¶0 â”€â”€â”€â”€â”€â”€â†’ äº‹ä»¶1 â”€â”€â”€â”€â”€â”€â†’ äº‹ä»¶4
      â”‚                          â†‘
      â”‚ æ´»åŠ¨a2(4)                â”‚ æ´»åŠ¨a6(9)
      â†“                          â”‚
    äº‹ä»¶2 â”€â”€â”€â”€â”€â”€â†’ äº‹ä»¶3 â”€â”€â”€â”€â”€â”€â†’ â”˜
      â”‚            â†‘           æ´»åŠ¨a5(2)
      â”‚ æ´»åŠ¨a3(5)   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¡¶ç‚¹ï¼ˆäº‹ä»¶ï¼‰è¯´æ˜ï¼š**
- äº‹ä»¶0ï¼šå·¥ç¨‹å¼€å§‹
- äº‹ä»¶1ï¼šæ´»åŠ¨a1å®Œæˆ
- äº‹ä»¶2ï¼šæ´»åŠ¨a2å®Œæˆ
- äº‹ä»¶3ï¼šæ´»åŠ¨a3å®Œæˆ
- äº‹ä»¶4ï¼šå·¥ç¨‹ç»“æŸ

**è¾¹ï¼ˆæ´»åŠ¨ï¼‰è¯´æ˜ï¼š**
- a1: <0,1>, æŒç»­æ—¶é—´6
- a2: <0,2>, æŒç»­æ—¶é—´4
- a3: <2,3>, æŒç»­æ—¶é—´5
- a4: <1,4>, æŒç»­æ—¶é—´1
- a5: <3,4>, æŒç»­æ—¶é—´2
- a6: <1,3>, æŒç»­æ—¶é—´9

**è®¡ç®—è¿‡ç¨‹ï¼š**

**æ­¥éª¤1ï¼šæ‹“æ‰‘æ’åº**
- æ‹“æ‰‘åºåˆ—ï¼š[0, 1, 2, 3, 4]
- æºç‚¹ï¼š0ï¼Œæ±‡ç‚¹ï¼š4

**æ­¥éª¤2ï¼šè®¡ç®—veï¼ˆäº‹ä»¶æœ€æ—©å‘ç”Ÿæ—¶é—´ï¼‰**
- ve[0] = 0
- ve[1] = max{ve[0] + 6} = 6
- ve[2] = max{ve[0] + 4} = 4
- ve[3] = max{ve[2] + 5, ve[1] + 9} = max{9, 15} = 15
- ve[4] = max{ve[1] + 1, ve[3] + 2} = max{7, 17} = 17

**æ­¥éª¤3ï¼šè®¡ç®—vlï¼ˆäº‹ä»¶æœ€è¿Ÿå‘ç”Ÿæ—¶é—´ï¼‰**
- vl[4] = ve[4] = 17
- vl[3] = min{vl[4] - 2} = 15
- vl[1] = min{vl[4] - 1, vl[3] - 9} = min{16, 6} = 6
- vl[2] = min{vl[3] - 5} = 10
- vl[0] = min{vl[1] - 6, vl[2] - 4} = min{0, 6} = 0

**æ­¥éª¤4å’Œ5ï¼šè®¡ç®—æ´»åŠ¨æ—¶é—´**

| æ´»åŠ¨ | èµ·å§‹äº‹ä»¶ | ç»“æŸäº‹ä»¶ | æŒç»­æ—¶é—´ | e = ve[i] | l = vl[j] - weight | e - l | æ˜¯å¦å…³é”® |
|------|---------|---------|---------|-----------|-------------------|-------|---------|
| a1 | 0 | 1 | 6 | 0 | 6 - 6 = 0 | 0 | âœ… æ˜¯ |
| a2 | 0 | 2 | 4 | 0 | 10 - 4 = 6 | -6 | âŒ å¦ |
| a3 | 2 | 3 | 5 | 4 | 15 - 5 = 10 | -6 | âŒ å¦ |
| a4 | 1 | 4 | 1 | 6 | 17 - 1 = 16 | -10 | âŒ å¦ |
| a5 | 3 | 4 | 2 | 15 | 17 - 2 = 15 | 0 | âœ… æ˜¯ |
| a6 | 1 | 3 | 9 | 6 | 15 - 9 = 6 | 0 | âœ… æ˜¯ |

**å…³é”®æ´»åŠ¨ï¼š** a1, a5, a6

**å…³é”®è·¯å¾„ï¼š** 0 â†’ 1 â†’ 3 â†’ 4ï¼ˆè·¯å¾„ï¼ša1 â†’ a6 â†’ a5ï¼‰

**æ€»å·¥æœŸï¼š** 17

**åˆ†æï¼š**
- å…³é”®è·¯å¾„ä¸Šçš„æ´»åŠ¨ï¼ˆa1, a6, a5ï¼‰ä¸èƒ½å»¶è¿Ÿï¼Œå¦åˆ™ä¼šå½±å“æ€»å·¥æœŸ
- éå…³é”®æ´»åŠ¨ï¼ˆa2, a3, a4ï¼‰æœ‰æ—¶é—´ä½™é‡ï¼Œå¯ä»¥é€‚å½“å»¶è¿Ÿ
- æ´»åŠ¨a2å¯ä»¥å»¶è¿Ÿ6ä¸ªå•ä½æ—¶é—´
- æ´»åŠ¨a3å¯ä»¥å»¶è¿Ÿ6ä¸ªå•ä½æ—¶é—´
- æ´»åŠ¨a4å¯ä»¥å»¶è¿Ÿ10ä¸ªå•ä½æ—¶é—´

---

### 7.6 åº”ç”¨åœºæ™¯

#### åœºæ™¯1ï¼šå·¥ç¨‹é¡¹ç›®ç®¡ç†

**é—®é¢˜ï¼š** ç¡®å®šé¡¹ç›®çš„æœ€çŸ­å®Œæˆæ—¶é—´å’Œå…³é”®ä»»åŠ¡

**åº”ç”¨ï¼š**
- è¯†åˆ«å…³é”®ä»»åŠ¡ï¼ˆä¸èƒ½å»¶è¿Ÿçš„ä»»åŠ¡ï¼‰
- è®¡ç®—é¡¹ç›®æœ€çŸ­å·¥æœŸ
- ä¼˜åŒ–èµ„æºé…ç½®ï¼ˆé‡ç‚¹å…³æ³¨å…³é”®ä»»åŠ¡ï¼‰

#### åœºæ™¯2ï¼šç”Ÿäº§è®¡åˆ’

**é—®é¢˜ï¼š** ç¡®å®šç”Ÿäº§æµç¨‹ä¸­çš„å…³é”®å·¥åº

**åº”ç”¨ï¼š**
- è¯†åˆ«ç“¶é¢ˆå·¥åº
- ä¼˜åŒ–ç”Ÿäº§æµç¨‹
- åˆç†å®‰æ’èµ„æº

#### åœºæ™¯3ï¼šè½¯ä»¶å¼€å‘

**é—®é¢˜ï¼š** ç¡®å®šè½¯ä»¶å¼€å‘çš„å…³é”®è·¯å¾„

**åº”ç”¨ï¼š**
- è¯†åˆ«å…³é”®å¼€å‘ä»»åŠ¡
- ä¼°ç®—é¡¹ç›®å®Œæˆæ—¶é—´
- ä¼˜åŒ–å¼€å‘è®¡åˆ’

---

### 7.7 æ—¶é—´å¤æ‚åº¦åˆ†æ

**ç®—æ³•å¤æ‚åº¦ï¼š**
- **æ—¶é—´å¤æ‚åº¦ï¼š** O(V + E)
  - æ‹“æ‰‘æ’åºï¼šO(V + E)
  - è®¡ç®—veï¼šO(V + E)
  - è®¡ç®—vlï¼šO(V + E)
  - è®¡ç®—æ´»åŠ¨æ—¶é—´ï¼šO(E)
- **ç©ºé—´å¤æ‚åº¦ï¼š** O(V + E)
  - veæ•°ç»„ï¼šO(V)
  - vlæ•°ç»„ï¼šO(V)
  - æ‹“æ‰‘åºåˆ—ï¼šO(V)
  - æ´»åŠ¨åˆ—è¡¨ï¼šO(E)

---

### 7.8 å¸¸è§è€ƒç‚¹

1. **AOEç½‘å’ŒAOVç½‘çš„åŒºåˆ«**
   - AOEç½‘ï¼šè¾¹è¡¨ç¤ºæ´»åŠ¨ï¼Œé¡¶ç‚¹è¡¨ç¤ºäº‹ä»¶
   - AOVç½‘ï¼šé¡¶ç‚¹è¡¨ç¤ºæ´»åŠ¨ï¼Œè¾¹è¡¨ç¤ºä¼˜å…ˆå…³ç³»

2. **å…³é”®è·¯å¾„çš„å®šä¹‰**
   - ä»æºç‚¹åˆ°æ±‡ç‚¹çš„æœ€é•¿è·¯å¾„
   - å…³é”®è·¯å¾„çš„é•¿åº¦ç­‰äºæ€»å·¥æœŸ

3. **å…³é”®æ´»åŠ¨çš„åˆ¤æ–­**
   - e = l çš„æ´»åŠ¨æ˜¯å…³é”®æ´»åŠ¨
   - å…³é”®æ´»åŠ¨æ²¡æœ‰æ—¶é—´ä½™é‡

4. **äº‹ä»¶æ—¶é—´çš„è®¡ç®—**
   - veï¼šæ­£å‘è®¡ç®—ï¼Œå–æœ€å¤§å€¼
   - vlï¼šåå‘è®¡ç®—ï¼Œå–æœ€å°å€¼

5. **æ´»åŠ¨æ—¶é—´çš„è®¡ç®—**
   - e = ve[i]ï¼ˆèµ·å§‹äº‹ä»¶çš„æœ€æ—©å‘ç”Ÿæ—¶é—´ï¼‰
   - l = vl[j] - weightï¼ˆç»“æŸäº‹ä»¶çš„æœ€è¿Ÿå‘ç”Ÿæ—¶é—´å‡å»æ´»åŠ¨æŒç»­æ—¶é—´ï¼‰

6. **ç®—æ³•æ­¥éª¤**
   - æ‹“æ‰‘æ’åº â†’ è®¡ç®—ve â†’ è®¡ç®—vl â†’ è®¡ç®—eå’Œl â†’ æ‰¾å‡ºå…³é”®æ´»åŠ¨

7. **åº”ç”¨åœºæ™¯**
   - é¡¹ç›®ç®¡ç†ã€ç”Ÿäº§è®¡åˆ’ã€è½¯ä»¶å¼€å‘ç­‰

---

## å…«ã€æ—¶é—´å¤æ‚åº¦æ€»ç»“

| æ“ä½œ/ç®—æ³• | é‚»æ¥çŸ©é˜µ | é‚»æ¥è¡¨ | è¯´æ˜ |
|----------|---------|--------|------|
| **å­˜å‚¨ç©ºé—´** | O(VÂ²) | O(V+E) | é‚»æ¥è¡¨é€‚åˆç¨€ç–å›¾ |
| **æŸ¥æ‰¾è¾¹** | O(1) | O(åº¦) | é‚»æ¥çŸ©é˜µæ›´å¿« |
| **éå†æ‰€æœ‰è¾¹** | O(VÂ²) | O(V+E) | é‚»æ¥è¡¨æ›´é«˜æ•ˆ |
| **DFS** | O(VÂ²) | O(V+E) | é‚»æ¥è¡¨æ›´é«˜æ•ˆ |
| **BFS** | O(VÂ²) | O(V+E) | é‚»æ¥è¡¨æ›´é«˜æ•ˆ |
| **Prim** | O(VÂ²) | O(E log V) | ç¨ å¯†å›¾ç”¨çŸ©é˜µï¼Œç¨€ç–å›¾ç”¨è¡¨+ä¼˜å…ˆé˜Ÿåˆ— |
| **Kruskal** | O(E log E) | O(E log E) | ä¸å­˜å‚¨ç»“æ„æ— å…³ |
| **Dijkstra** | O(VÂ²) | O(E log V) | ç¨ å¯†å›¾ç”¨çŸ©é˜µï¼Œç¨€ç–å›¾ç”¨è¡¨+ä¼˜å…ˆé˜Ÿåˆ— |
| **Floyd** | O(VÂ³) | O(VÂ³) | éœ€è¦çŸ©é˜µè¡¨ç¤º |
| **æ‹“æ‰‘æ’åº** | O(VÂ²) | O(V+E) | é‚»æ¥è¡¨æ›´é«˜æ•ˆ |
| **å…³é”®è·¯å¾„** | O(VÂ²) | O(V+E) | éœ€è¦æ‹“æ‰‘æ’åº |

---

## æ€»ç»“

```
âœ… å›¾ = é¡¶ç‚¹ + è¾¹ + å¤šå¯¹å¤šå…³ç³»
âœ… å­˜å‚¨ç»“æ„ï¼šé‚»æ¥çŸ©é˜µï¼ˆç¨ å¯†å›¾ï¼‰ã€é‚»æ¥è¡¨ï¼ˆç¨€ç–å›¾ï¼‰
âœ… éå†ï¼šDFSï¼ˆæ·±åº¦ä¼˜å…ˆï¼‰ã€BFSï¼ˆå¹¿åº¦ä¼˜å…ˆï¼‰
âœ… æœ€å°ç”Ÿæˆæ ‘ï¼šPrimï¼ˆé¡¶ç‚¹æ‰©å±•ï¼‰ã€Kruskalï¼ˆè¾¹é€‰æ‹©ï¼‰
âœ… æœ€çŸ­è·¯å¾„ï¼šDijkstraï¼ˆå•æºï¼‰ã€Floydï¼ˆæ‰€æœ‰é¡¶ç‚¹å¯¹ï¼‰
âœ… æ‹“æ‰‘æ’åºï¼šDAGçš„é¡¶ç‚¹æ’åº
âœ… å…³é”®è·¯å¾„ï¼šAOEç½‘çš„æœ€é•¿è·¯å¾„

ğŸ“Œ æ ¸å¿ƒåº”ç”¨ï¼š
   - ç½‘ç»œè®¾è®¡ï¼šæœ€å°ç”Ÿæˆæ ‘
   - è·¯å¾„è§„åˆ’ï¼šæœ€çŸ­è·¯å¾„
   - ä»»åŠ¡è°ƒåº¦ï¼šæ‹“æ‰‘æ’åº
   - é¡¹ç›®ç®¡ç†ï¼šå…³é”®è·¯å¾„

ğŸ’¡ é€‰æ‹©å»ºè®®ï¼š
   - ç¨ å¯†å›¾ â†’ é‚»æ¥çŸ©é˜µ
   - ç¨€ç–å›¾ â†’ é‚»æ¥è¡¨
   - å•æºæœ€çŸ­è·¯å¾„ â†’ Dijkstra
   - æ‰€æœ‰é¡¶ç‚¹å¯¹æœ€çŸ­è·¯å¾„ â†’ Floyd
```

---

**ç²¾ç®€è¦ç‚¹**: å›¾æ˜¯è¡¨ç¤ºå¤šå¯¹å¤šå…³ç³»çš„é‡è¦æ•°æ®ç»“æ„ã€‚æŒæ¡å›¾çš„å­˜å‚¨ã€éå†å’Œç»å…¸ç®—æ³•æ˜¯ç†è§£å¤æ‚ç³»ç»Ÿå»ºæ¨¡çš„å…³é”® ğŸŒâœ¨

