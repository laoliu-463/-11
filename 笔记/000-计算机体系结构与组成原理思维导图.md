# 计算机体系结构与组成原理思维导图

> 统一的计算机体系结构与组成原理知识体系可视化思维导图  
> 使用 Mermaid 语法创建，完全支持 Obsidian、Typora、GitHub 等编辑器

---

## 📊 总体架构思维导图

> **Obsidian 提示：** 如果 mindmap 格式无法显示，请查看下方的"备用思维导图（Obsidian兼容版）"

```mermaid
mindmap
  root((计算机体系结构与组成原理))
    体系结构基础
      定义与层次
        ISA指令集架构
        微体系结构
        物理实现
      经典结构
        冯诺依曼结构
        哈佛结构
        改进型哈佛结构
      发展历史
        第一代电子管1946-1957
        第二代晶体管1958-1964
        第三代集成电路1965-1970
        第四代大规模集成电路1971至今
        第五代超大规模集成电路
    数据表示与运算
      数制与编码
        二进制八进制十六进制
        位置计数法
        进制转换
        BCD码
        ASCII Unicode
      定点数表示
        原码
        反码
        补码
          定义
          性质
          计算
          存储
        移码
      浮点数表示
        IEEE754标准
        单精度32位
        双精度64位
        规格化
        特殊值
      二进制运算
        加法
        减法转加法
        乘法
        除法
        移位运算
          逻辑移位
          算术移位
          循环移位
      溢出与检测
        补码溢出
        进位vs溢出
        溢出判断
        溢出处理
    指令集架构ISA
      CISC复杂指令集
        特点
          指令多200-300条
          功能强大
          长度可变
          寻址方式多
          CPI高2-15
        代表
          Intel x86
          AMD64
      RISC精简指令集
        特点
          指令少50-100条
          功能简单
          长度固定
          Load/Store架构
          CPI低接近1
        代表
          ARM
          MIPS
          RISC-V
      指令格式
        操作码
        地址码
        扩展操作码
        零地址一地址二地址三地址
      寻址方式
        立即寻址
        直接寻址
        间接寻址
        寄存器寻址
        基址寻址
        变址寻址
        相对寻址
      指令类型
        数据传送
        算术运算
        逻辑运算
        转移控制
        输入输出
    中央处理器CPU
      CPU组成
        运算器ALU
        控制器CU
        寄存器组
        PC程序计数器
        IR指令寄存器
        MAR地址寄存器
        MDR数据寄存器
      指令执行过程
        取指Fetch
        译码Decode
        执行Execute
        访存Memory
        写回WriteBack
      数据通路
        单总线结构
        双总线结构
        三总线结构
      控制器设计
        硬布线控制器
        微程序控制器
        状态机设计
    流水线技术
      基本概念
        五级流水线
          IF取指
          ID译码
          EX执行
          MEM访存
          WB写回
        性能指标
          加速比
          吞吐率
          效率
      流水线冒险
        结构冒险
          硬件资源冲突
          解决增加硬件
          解决插入气泡
        数据冒险
          RAW真依赖
          WAR反依赖
          WAW输出依赖
          解决前递
          解决阻塞
          寄存器重命名
        控制冒险
          分支指令
          解决分支预测
          解决延迟分支
          解决BTB
      高级流水线
        超标量
          多发射
          动态调度
        超流水线
          细分流水段
          提高主频
        超长指令字VLIW
          静态调度
          编译器优化
    存储层次结构
      存储金字塔
        寄存器
          最快0.3ns
          容量最小
        Cache
          L1 Cache 1ns
          L2 Cache 3-10ns
          L3 Cache 10-20ns
        主存DRAM
          50-100ns
          GB级容量
        辅存
          SSD 0.1ms
          HDD 5-10ms
          TB级容量
      Cache技术
        映射方式
          直接映射
          全相联映射
          组相联映射
        替换算法
          LRU最近最少使用
          FIFO先进先出
          Random随机
        写策略
          全写法
          写回法
        局部性原理
          时间局部性
          空间局部性
      虚拟存储
        页式存储
        段式存储
        段页式存储
        页面置换算法
          FIFO
          LRU
          OPT
          Clock
        TLB快表
        缺页处理
      主存储器
        SRAM静态RAM
        DRAM动态RAM
        ROM只读存储器
    总线系统
      总线分类
        片内总线
        系统总线
          数据总线
          地址总线
          控制总线
        外部总线
      总线特性
        机械特性
        电气特性
        功能特性
        时间特性
      总线仲裁
        集中仲裁
          链式查询
          计数器定时查询
          独立请求方式
        分布仲裁
      总线操作
        同步总线
        异步总线
        半同步总线
      性能指标
        总线宽度
        总线频率
        总线带宽
    输入输出系统
      IO设备分类
        按交换单位
        按传输速率
        按用途
      IO接口
        功能
          数据缓冲
          状态检测
          控制定时
          格式转换
        组成
          数据寄存器
          状态寄存器
          控制寄存器
        端口编址
          统一编址
          独立编址
      IO控制方式
        程序查询方式
        程序中断方式
        DMA方式
        通道方式
        IO处理机
      中断系统
        中断概念
        中断分类
          内中断异常
          外中断
        中断处理过程
          中断请求
          中断判优
          中断响应
          中断服务
          中断返回
        中断优先级
        多重中断
    并行处理
      Flynn分类
        SISD单指令单数据
        SIMD单指令多数据
        MISD多指令单数据
        MIMD多指令多数据
      并行层次
        指令级并行ILP
          流水线
          超标量
          VLIW
        线程级并行TLP
          多线程
          多核
        数据级并行DLP
          向量处理
          SIMD
      多核处理器
        共享Cache
        一致性协议
          MESI协议
          目录协议
        互连网络
          总线
          交叉开关
          网络
      性能定律
        Amdahl定律
          加速比限制
          串行瓶颈
        Gustafson定律
          扩展并行
    性能评估
      性能指标
        CPU时间
          指令数
          CPI
          时钟周期
        MIPS
          百万指令每秒
        FLOPS
          浮点运算每秒
        吞吐率
        响应时间
      基准测试
        SPEC CPU
        Linpack
        PARSEC
        CoreMark
      优化策略
        减少指令数
          算法优化
          编译器优化
        降低CPI
          流水线优化
          Cache优化
          分支预测
        提高主频
          工艺改进
          电路优化
    现代处理器技术
      乱序执行
        指令窗口
        重排序缓冲ROB
        寄存器重命名
        动态调度
      分支预测
        静态预测
          总是跳转
          总是不跳转
          BTFN向后跳转
        动态预测
          1位预测器
          2位预测器
          局部预测器
          全局预测器
          混合预测器
      向量处理
        SIMD指令
          SSE
          AVX
          AVX-512
        GPU架构
          CUDA
          OpenCL
      同时多线程SMT
        超线程技术
        硬件多线程
        细粒度多线程
        粗粒度多线程
```

---

## 📋 备用思维导图（Obsidian兼容版）

> 如果上方 mindmap 格式无法显示，可使用此 graph 格式版本

```mermaid
graph TB
    Root[计算机体系结构与组成原理]
    
    Root --> A1[体系结构基础]
    Root --> A2[数据表示与运算]
    Root --> A3[指令集架构ISA]
    Root --> A4[中央处理器CPU]
    Root --> A5[流水线技术]
    Root --> A6[存储层次结构]
    Root --> A7[总线系统]
    Root --> A8[输入输出系统]
    Root --> A9[并行处理]
    Root --> A10[性能评估]
    Root --> A11[现代处理器技术]
    
    A1 --> A1a[定义与层次]
    A1 --> A1b[经典结构]
    A1 --> A1c[发展历史]
    
    A2 --> A2a[数制与编码]
    A2 --> A2b[定点数表示]
    A2 --> A2c[浮点数表示]
    A2 --> A2d[二进制运算]
    A2 --> A2e[溢出与检测]
    
    A2b --> A2b1[原码]
    A2b --> A2b2[反码]
    A2b --> A2b3[补码]
    A2b --> A2b4[移码]
    
    A3 --> A3a[CISC复杂指令集]
    A3 --> A3b[RISC精简指令集]
    A3 --> A3c[指令格式]
    A3 --> A3d[寻址方式]
    A3 --> A3e[指令类型]
    
    A4 --> A4a[CPU组成]
    A4 --> A4b[指令执行过程]
    A4 --> A4c[数据通路]
    A4 --> A4d[控制器设计]
    
    A5 --> A5a[基本概念]
    A5 --> A5b[流水线冒险]
    A5 --> A5c[高级流水线]
    
    A5b --> A5b1[结构冒险]
    A5b --> A5b2[数据冒险]
    A5b --> A5b3[控制冒险]
    
    A6 --> A6a[存储金字塔]
    A6 --> A6b[Cache技术]
    A6 --> A6c[虚拟存储]
    A6 --> A6d[主存储器]
    
    A6b --> A6b1[映射方式]
    A6b --> A6b2[替换算法]
    A6b --> A6b3[写策略]
    
    A7 --> A7a[总线分类]
    A7 --> A7b[总线特性]
    A7 --> A7c[总线仲裁]
    A7 --> A7d[总线操作]
    
    A8 --> A8a[IO设备分类]
    A8 --> A8b[IO接口]
    A8 --> A8c[IO控制方式]
    A8 --> A8d[中断系统]
    
    A9 --> A9a[Flynn分类]
    A9 --> A9b[并行层次]
    A9 --> A9c[多核处理器]
    A9 --> A9d[性能定律]
    
    A10 --> A10a[性能指标]
    A10 --> A10b[基准测试]
    A10 --> A10c[优化策略]
    
    A11 --> A11a[乱序执行]
    A11 --> A11b[分支预测]
    A11 --> A11c[向量处理]
    A11 --> A11d[同时多线程SMT]
    
    style Root fill:#ff6b6b,stroke:#c92a2a,stroke-width:4px,color:#fff
    style A2 fill:#4ecdc4,stroke:#0a9396,stroke-width:2px
    style A5 fill:#96ceb4,stroke:#52b788,stroke-width:2px
    style A6 fill:#ffeaa7,stroke:#fdcb6e,stroke-width:2px
```

---

## 🎯 指令集架构详细图

```mermaid
graph TB
    ISA[指令集架构 ISA]
    
    ISA --> Format[指令格式]
    ISA --> Address[寻址方式]
    ISA --> Type[指令类型]
    ISA --> Register[寄存器组织]
    ISA --> Memory[存储模型]
    
    Format --> OpCode[操作码]
    Format --> AddrCode[地址码]
    Format --> Extension[扩展操作码]
    Format --> ZeroAddr[零地址]
    Format --> OneAddr[一地址]
    Format --> TwoAddr[二地址]
    Format --> ThreeAddr[三地址]
    
    Address --> Immediate[立即寻址]
    Address --> Direct[直接寻址]
    Address --> Indirect[间接寻址]
    Address --> RegAddr[寄存器寻址]
    Address --> Base[基址寻址]
    Address --> Index[变址寻址]
    Address --> Relative[相对寻址]
    
    Type --> Data[数据传送]
    Type --> Arith[算术运算]
    Type --> Logic[逻辑运算]
    Type --> Branch[转移控制]
    Type --> IO[输入输出]
    
    Register --> GP[通用寄存器]
    Register --> SP[专用寄存器]
    
    Memory --> BigEndian[大端模式]
    Memory --> LittleEndian[小端模式]
    
    style ISA fill:#f9f,stroke:#333,stroke-width:4px
```

---

## 🔢 数据表示与运算体系图

```mermaid
graph TB
    Data[数据表示与运算]
    
    Data --> Number[数制编码]
    Data --> Fixed[定点数]
    Data --> Float[浮点数]
    Data --> Calc[运算]
    
    Number --> Binary[二进制]
    Number --> Octal[八进制]
    Number --> Hex[十六进制]
    Number --> Hexadecimal[进制转换]
    
    Fixed --> Original[原码]
    Fixed --> Ones[反码]
    Fixed --> Twos[补码]
    Fixed --> Bias[移码]
    
    Twos --> Def[定义]
    Twos --> Prop[性质]
    Twos --> Calc2[计算]
    Twos --> Store[存储]
    
    Float --> IEEE[IEEE754]
    Float --> Single[单精度32位]
    Float --> Double[双精度64位]
    Float --> Norm[规格化]
    
    Calc --> Add[加法]
    Calc --> Sub[减法]
    Calc --> Mul[乘法]
    Calc --> Div[除法]
    Calc --> Shift[移位]
    
    Sub --> Complement[补码转换]
    
    Shift --> Logic[逻辑移位]
    Shift --> Arith[算术移位]
    Shift --> Rotate[循环移位]
    
    style Data fill:#4ecdc4,stroke:#0a9396,stroke-width:3px
    style Twos fill:#ff6b6b,stroke:#c92a2a,stroke-width:2px
    style Float fill:#45b7d1,stroke:#0077b6,stroke-width:2px
```

---

## 🖥️ CPU结构详细图

```mermaid
graph TB
    CPU[中央处理器 CPU]
    
    CPU --> ALU[运算器 ALU]
    CPU --> CU[控制器 CU]
    CPU --> Reg[寄存器组]
    CPU --> Path[数据通路]
    
    ALU --> ALU_Unit[算术逻辑单元]
    ALU --> ACC[累加器]
    ALU --> PSW[状态寄存器]
    
    CU --> PC[程序计数器]
    CU --> IR[指令寄存器]
    CU --> Decoder[指令译码器]
    CU --> Timer[时序控制器]
    CU --> HardWire[硬布线]
    CU --> MicroProg[微程序]
    
    Reg --> GP_Reg[通用寄存器]
    Reg --> SP_Reg[专用寄存器]
    
    Path --> Single[单总线]
    Path --> Double[双总线]
    Path --> Triple[三总线]
    
    CPU --> Pipeline[流水线]
    Pipeline --> IF[取指]
    Pipeline --> ID[译码]
    Pipeline --> EX[执行]
    Pipeline --> MEM[访存]
    Pipeline --> WB[写回]
    
    style CPU fill:#fab1a0,stroke:#e17055,stroke-width:4px
    style ALU fill:#ffeaa7
    style CU fill:#a29bfe
    style Pipeline fill:#fd79a8
```

---

## ⚡ 流水线冒险处理图

```mermaid
graph LR
    Hazard[流水线冒险]
    
    Hazard --> Structural[结构冒险]
    Hazard --> Data[数据冒险]
    Hazard --> Control[控制冒险]
    
    Structural --> S1[硬件资源冲突]
    S1 --> S2[增加硬件资源]
    S1 --> S3[插入气泡停顿]
    
    Data --> RAW[RAW真依赖]
    Data --> WAR[WAR反依赖]
    Data --> WAW[WAW输出依赖]
    RAW --> D1[前递技术]
    RAW --> D2[阻塞技术]
    WAR --> D3[寄存器重命名]
    WAW --> D3
    
    Control --> C1[分支指令]
    C1 --> C2[分支预测]
    C1 --> C3[延迟分支]
    C1 --> C4[分支目标缓冲BTB]
    
    C2 --> C21[静态预测]
    C2 --> C22[动态预测]
    
    style Hazard fill:#ff9,stroke:#333,stroke-width:3px
    style Structural fill:#f99
    style Data fill:#9f9
    style Control fill:#99f
```

---

## 💾 存储层次结构图

```mermaid
graph TD
    CPU[CPU] --> Reg[寄存器<br/>几百字节<br/>0.3ns]
    Reg --> L1[L1 Cache<br/>32-64KB<br/>1ns]
    L1 --> L2[L2 Cache<br/>256KB-1MB<br/>3-10ns]
    L2 --> L3[L3 Cache<br/>8-64MB<br/>10-20ns]
    L3 --> DRAM[主存 DRAM<br/>8-32GB<br/>50-100ns]
    DRAM --> SSD[固态硬盘 SSD<br/>256GB-2TB<br/>0.1ms]
    SSD --> HDD[机械硬盘 HDD<br/>1-10TB<br/>5-10ms]
    
    style Reg fill:#f66
    style L1 fill:#f96
    style L2 fill:#fc6
    style L3 fill:#ff6
    style DRAM fill:#6f6
    style SSD fill:#6cf
    style HDD fill:#66f
```

---

## 🗺️ Cache映射方式对比图

```mermaid
graph TB
    Cache[Cache映射方式]
    
    Cache --> Direct[直接映射]
    Cache --> Full[全相联映射]
    Cache --> Set[组相联映射]
    
    Direct --> D1[主存块号 mod Cache行数]
    Direct --> D2[简单快速]
    Direct --> D3[冲突率高]
    
    Full --> F1[任意位置]
    Full --> F2[冲突少]
    Full --> F3[硬件复杂]
    
    Set --> S1[组间直接映射]
    Set --> S2[组内全相联]
    Set --> S3[折中方案]
    Set --> S4[2路4路8路常用]
    
    style Direct fill:#fcc
    style Full fill:#cfc
    style Set fill:#ccf
```

---

## 🔄 CISC vs RISC 对比图

```mermaid
graph LR
    subgraph CISC[CISC 复杂指令集]
        C1[指令多 200-300条]
        C2[功能强大]
        C3[长度可变]
        C4[寻址方式多]
        C5[CPI高 2-15]
        C6[代表: x86]
    end
    
    subgraph RISC[RISC 精简指令集]
        R1[指令少 50-100条]
        R2[功能简单]
        R3[长度固定]
        R4[Load/Store架构]
        R5[CPI低 接近1]
        R6[代表: ARM, RISC-V]
    end
    
    style CISC fill:#fcc
    style RISC fill:#cfc
```

---

## 🚌 总线系统结构图

```mermaid
graph TB
    Bus[总线系统]
    
    Bus --> Type[总线分类]
    Bus --> Comp[系统总线组成]
    Bus --> Arb[总线仲裁]
    Bus --> Oper[总线操作]
    
    Type --> OnChip[片内总线]
    Type --> System[系统总线]
    Type --> External[外部总线]
    
    Comp --> Data[数据总线]
    Comp --> Addr[地址总线]
    Comp --> Ctrl[控制总线]
    
    Arb --> Central[集中仲裁]
    Arb --> Dist[分布仲裁]
    
    Central --> Chain[链式查询]
    Central --> Counter[计数器定时]
    Central --> Independent[独立请求]
    
    Oper --> Sync[同步总线]
    Oper --> Async[异步总线]
    Oper --> SemiSync[半同步总线]
    
    style Bus fill:#a29bfe,stroke:#6c5ce7,stroke-width:3px
```

---

## 📥 I/O系统结构图

```mermaid
graph TB
    IO[I/O系统]
    
    IO --> Device[I/O设备]
    IO --> Interface[I/O接口]
    IO --> Control[I/O控制方式]
    IO --> Interrupt[中断系统]
    
    Device --> Class[设备分类]
    Device --> Speed[传输速率]
    
    Interface --> Func[功能]
    Interface --> Comp[组成]
    Interface --> Addr[编址方式]
    
    Func --> Buffer[数据缓冲]
    Func --> Status[状态检测]
    Func --> Ctrl2[控制定时]
    
    Control --> Query[程序查询]
    Control --> Int[程序中断]
    Control --> DMA[DMA方式]
    Control --> Channel[通道方式]
    
    Interrupt --> Type2[中断类型]
    Interrupt --> Process[处理过程]
    Interrupt --> Priority[优先级]
    
    style IO fill:#fd79a8,stroke:#e84393,stroke-width:3px
    style DMA fill:#ff6b6b
```

---

## 🔀 并行处理 Flynn 分类

```mermaid
graph TB
    Flynn[Flynn 分类法]
    
    Flynn --> SISD[SISD<br/>单指令单数据]
    Flynn --> SIMD[SIMD<br/>单指令多数据]
    Flynn --> MISD[MISD<br/>多指令单数据]
    Flynn --> MIMD[MIMD<br/>多指令多数据]
    
    SISD --> SISD_Ex[传统单核 CPU]
    SIMD --> SIMD_Ex[向量处理器<br/>GPU<br/>SIMD 指令]
    MISD --> MISD_Ex[几乎不存在]
    MIMD --> MIMD_Ex[多核 CPU<br/>集群系统]
    
    style SISD fill:#f99
    style SIMD fill:#9f9
    style MISD fill:#999
    style MIMD fill:#99f
```

---

## 📈 性能优化策略图

```mermaid
graph TB
    Perf[性能优化]
    
    Perf --> T[减少执行时间]
    
    T --> Inst[减少指令数]
    T --> CPI_Opt[降低 CPI]
    T --> Freq[提高主频]
    
    Inst --> Algo[算法优化]
    Inst --> Compiler[编译器优化]
    
    CPI_Opt --> Pipeline[流水线优化]
    CPI_Opt --> Cache_Opt[Cache 优化]
    CPI_Opt --> Branch[分支预测]
    CPI_Opt --> OoO[乱序执行]
    
    Freq --> Process[工艺改进]
    Freq --> Circuit[电路优化]
    
    Pipeline --> SuperScalar[超标量]
    Pipeline --> SuperPipe[超流水线]
    
    Cache_Opt --> Size[增大容量]
    Cache_Opt --> Assoc[提高相联度]
    Cache_Opt --> BlockSize[优化块大小]
    
    style Perf fill:#f9f,stroke:#333,stroke-width:4px
    style Inst fill:#ff9
    style CPI_Opt fill:#9f9
    style Freq fill:#9ff
```

---

## 🗺️ 学习路径图

```mermaid
graph LR
    Start([开始学习]) --> Basic[体系结构基础]
    Basic --> Data[数据表示与运算]
    Data --> ISA[指令集架构]
    ISA --> CPU[中央处理器]
    CPU --> Pipeline[流水线技术]
    Pipeline --> Memory[存储层次]
    Memory --> Bus[总线系统]
    Bus --> IO[输入输出系统]
    IO --> Parallel[并行处理]
    Parallel --> Performance[性能评估]
    Performance --> Advanced[现代处理器技术]
    Advanced --> End([掌握知识体系])
    
    style Start fill:#9f9
    style End fill:#f99
    style Data fill:#ff9
    style Pipeline fill:#9ff
    style Memory fill:#f9f
```

---

## 📐 核心公式速查

### CPU性能
```
CPU执行时间 = 指令数 × CPI × 时钟周期
MIPS = 主频 / (CPI × 10^6)
FLOPS = 浮点运算次数 / 执行时间
```

### 流水线
```
执行时间 = (k + n - 1) × Δt
吞吐率 = n / [(k + n - 1) × Δt]
加速比 = 不使用流水线时间 / 使用流水线时间
效率 = 实际使用时空区 / 总时空区
```

### Cache
```
命中率 = 命中次数 / 总访问次数
平均访问时间 = 命中率 × Cache时间 + (1-命中率) × 主存时间
AMAT = HitTime + MissRate × MissPenalty
```

### 并行处理
```
Amdahl定律: S = 1 / [(1-P) + P/N]
P - 可并行部分比例
N - 处理器数量
```

### 总线
```
总线带宽 = 总线频率 × 总线宽度 / 8
```

### 存储器
```
存储容量 = 存储单元数 × 字长
寻址空间 = 2^地址线数
```

---

## 🎯 重点知识点

### ⭐⭐⭐ 必考重点
- **补码表示与运算** - 定义、性质、计算、溢出判断
- **Cache技术** - 映射方式、替换算法、写策略
- **流水线技术** - 五级流水线、三种冒险及解决方法
- **指令执行过程** - 取指、译码、执行、访存、写回
- **性能计算** - CPU时间、MIPS、加速比、Amdahl定律

### ⭐⭐ 重要内容
- **浮点数表示** - IEEE754标准、规格化
- **虚拟存储** - 页式存储、页面置换算法
- **控制器设计** - 硬布线vs微程序
- **总线系统** - 总线仲裁、总线操作
- **中断系统** - 中断处理流程、优先级

### ⭐ 了解内容
- **现代处理器技术** - 乱序执行、分支预测、SMT
- **并行处理** - Flynn分类、多核架构
- **I/O控制方式** - DMA、通道方式

---

## 💡 Obsidian 使用提示

1. **启用 Mermaid 插件**：设置 → 社区插件 → 搜索 "Mermaid" 并启用
2. **查看图表**：点击图表区域可在预览模式下查看完整图表
3. **编辑模式**：在编辑模式下可修改 Mermaid 代码
4. **图表渲染**：如果图表不显示，尝试切换到预览模式

---

**最后更新：** 2025年1月  
**版本：** v2.0 Obsidian优化版
