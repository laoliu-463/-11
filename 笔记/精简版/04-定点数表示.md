# 04-定点数表示

> 原码、反码、补码、移码、溢出检测  
> 最后更新：2025年1月

---

## 📑 目录

- [一、定点数表示方法](#一定点数表示方法)
- [二、原码](#二原码)
- [三、反码](#三反码)
- [四、补码](#四补码)
- [五、移码](#五移码)
- [六、溢出检测](#六溢出检测)
- [七、总结](#七总结)

---

## 一、定点数表示方法

### 什么是定点数？

**定义：** 定点数是小数点的位置固定的数，包括定点整数（小数点固定在最低位后）和定点小数（小数点固定在最高位前）。

**通俗理解：** 定点数就像"固定的小数点位置"，小数点位置固定，不能移动。

```
定点数类型：
  1. 定点整数：小数点固定在最低位后
     例：1011. = 11₁₀
  
  2. 定点小数：小数点固定在最高位前
     例：.1011 = 0.6875₁₀
```

### 四种编码方式

```
定点数编码方式：
  1. 原码：符号位 + 绝对值
  2. 反码：正数同原码，负数按位取反
  3. 补码：正数同原码，负数反码+1 ⭐最常用
  4. 移码：补码符号位取反（用于浮点数阶码）
```

---

## 二、原码

### 什么是原码？

**通俗理解：** 原码就像"直接表示"，符号位+绝对值，简单直观但运算复杂。

```
原码规则：
  • 最高位是符号位（0正1负）
  • 其余位是绝对值
  • 正数：符号位0，其余位是数值
  • 负数：符号位1，其余位是数值

示例（8位）：
  +5 = 0000 0101
  -5 = 1000 0101

特点：
  ✓ 直观（符号位清晰）
  ✗ 运算复杂（需要判断符号）
  ✗ 有+0和-0（0000 0000和1000 0000）
```

---

## 三、反码

### 什么是反码？

**通俗理解：** 反码就像"取反表示"，正数同原码，负数按位取反。

```
反码规则：
  • 正数：与原码相同
  • 负数：符号位不变，数值位按位取反

示例（8位）：
  +5 = 0000 0101（原码）
  +5 = 0000 0101（反码）
  
  -5 = 1000 0101（原码）
  -5 = 1111 1010（反码，数值位取反）

特点：
  ✓ 运算比原码简单
  ✗ 仍有+0和-0
  ✗ 运算需要循环进位
```

---

## 四、补码 ⭐⭐⭐ 最常用

### 什么是补码？

**通俗理解：** 补码就像"取反加一"，正数同原码，负数反码+1。补码统一了加法和减法，运算最简单。

```
补码规则：
  • 正数：与原码相同
  • 负数：反码 + 1

示例（8位）：
  +5 = 0000 0101（原码）
  +5 = 0000 0101（补码）
  
  -5 = 1000 0101（原码）
  -5 = 1111 1010（反码）
  -5 = 1111 1011（补码，反码+1）

快速求补码：
  从右往左，第一个1及右边不变，左边取反
  -5 = 1111 1011
        ↑↑↑↑ ↑↑↑
        取反 不变
```

### 补码的优势

```
优势：
  ✓ 统一加法和减法（减法变加法）
  ✓ 只有一种0（0000 0000）
  ✓ 运算最简单（无需判断符号）
  ✓ 硬件实现简单

示例：
  5 - 3 = 5 + (-3)
  
  5 = 0000 0101
  -3 = 1111 1101（补码）
  
  0000 0101
  +1111 1101
  ──────────
  1 0000 0010 = 2（忽略最高位进位）
```

---

## 五、移码

### 什么是移码？

**通俗理解：** 移码就像"补码符号位取反"，主要用于浮点数的阶码，便于比较大小。

```
移码规则：
  • 补码符号位取反
  • 或：真值 + 偏移量（2ⁿ⁻¹）

示例（8位，偏移量128）：
  +5 = 0000 0101（补码）
  +5 = 1000 0101（移码，符号位取反）
  
  -5 = 1111 1011（补码）
  -5 = 0111 1011（移码，符号位取反）

特点：
  ✓ 便于比较大小（无符号比较）
  ✓ 用于浮点数阶码
```

---

## 六、溢出检测

### 什么是溢出？

**通俗理解：** 溢出就像"装不下"，结果超出了表示范围。

```
溢出条件：
  • 两个正数相加，结果为负（上溢）
  • 两个负数相加，结果为正（下溢）

检测方法：
  1. 符号位检测
     • 同号相加，结果符号不同 → 溢出
  
  2. 进位检测
     • 最高位进位 ≠ 次高位进位 → 溢出
```

### 溢出检测示例

```
示例1：上溢
  0111 1111 (+127)
  +0000 0001 (+1)
  ──────────
  1000 0000 (-128) ✗ 溢出！

  两个正数相加，结果为负 → 溢出

示例2：下溢
  1000 0000 (-128)
  +1111 1111 (-1)
  ──────────
  0111 1111 (+127) ✗ 溢出！

  两个负数相加，结果为正 → 溢出
```

---

## 七、总结

### 核心要点

```
✅ 四种编码：原码、反码、补码、移码
✅ 补码最常用：统一加减法，运算最简单
✅ 原码：符号位+绝对值，直观但运算复杂
✅ 反码：正数同原码，负数取反
✅ 移码：补码符号位取反，用于浮点数阶码
✅ 溢出检测：同号相加结果异号 → 溢出
```

### 关键理解

- **原码**：符号位+绝对值，直观但运算复杂
- **反码**：正数同原码，负数取反
- **补码**：正数同原码，负数反码+1，最常用
- **移码**：补码符号位取反，用于浮点数阶码
- **溢出**：结果超出表示范围，需要检测

### 编码对比

| 编码 | 正数 | 负数 | 0的表示 | 运算 | 应用 |
|------|------|------|---------|------|------|
| **原码** | 符号位0+绝对值 | 符号位1+绝对值 | +0和-0 | 复杂 | 不常用 |
| **反码** | 同原码 | 符号位不变+取反 | +0和-0 | 较简单 | 不常用 |
| **补码** | 同原码 | 反码+1 | 只有+0 | 最简单 | 最常用 |
| **移码** | 补码符号位取反 | 补码符号位取反 | 偏移表示 | 便于比较 | 浮点数阶码 |

---

**最后更新：** 2025年1月

