# 101-I-O系统练习题 (I/O System Exercises)

> **简介**：本文件收录了输入/输出系统相关的练习题，涵盖I/O方式（程序查询、中断、DMA）、I/O接口、总线等考点。
> **Introduction**: This file contains exercises related to the Input/Output system, covering I/O modes (Programmed I/O, Interrupt-driven I/O, DMA), I/O interfaces, buses, etc.
> **来源**：用户提供
> **最后更新**：2025年1月

---

## 一、单选题 (Multiple Choice Questions)

1. **“当CPU向I/O模块发出命令时，它必须等待I/O操作完成”。这是程序控制的I/O，“等待”一词的意思是______。**
   **"When the CPU issues a command to the I/O module, it must wait for the I/O operation to complete." This is programmed I/O. The term "wait" means ______.**
    A. CPU停止运行，什么也不做 (CPU stops running and does nothing)
    B. CPU 会执行其他操作 (CPU will execute other operations)
    C. CPU会定期读取并检查I/O模块的状态 (CPU periodically reads and checks the status of the I/O module)
    D. CPU等待中断请求信号 (CPU waits for an interrupt request signal)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): C**
    *   **解析 (Explanation)**:
        *   程序控制的I/O（轮询方式）中，CPU不会停止运行，而是会**定期读取并检查I/O模块的状态寄存器**，直到I/O操作完成 (In programmed I/O, CPU periodically checks the status register until the operation is complete)。
        *   A错误：CPU不会停止运行，而是继续执行轮询循环。
        *   B错误：如果CPU执行其他操作，就无法等待I/O操作完成。
        *   D错误：这是中断驱动I/O的特点，不是程序控制I/O。
    </details>

2. **在DMA中，DMA模块接管了从CPU传输数据的操作，这意味着___________**
   **In DMA, the DMA module takes over the operation of transferring data from the CPU, which means ___________**
    A. DMA模块可以像CPU一样获取和执行指令 (DMA module can fetch and execute instructions like a CPU)
    B. DMA模块可以利用窃取周期技术控制总线，从而实现与内存之间的数据传输 (DMA module can control the bus using cycle stealing technique to achieve data transfer with memory)
    C. DMA模块和CPU协同工作，将数据传输到内存或从内存传输数据 (DMA module and CPU work together to transfer data to/from memory)
    D. 当DMA模块准备就绪时，它会向CPU发出中断请求信号以获取中断服务 (When DMA module is ready, it sends an interrupt request signal to CPU for interrupt service)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): B**
    *   **解析 (Explanation)**:
        *   DMA（Direct Memory Access）的核心特点是DMA控制器**直接控制总线**进行数据传输，无需CPU参与 (DMA controller directly controls the bus for data transfer without CPU intervention)。
        *   B正确：DMA通过**窃取周期技术**（cycle stealing）或**块传输模式**控制总线，直接在内存和I/O设备之间传输数据。
    </details>

3. **使用I/O模块传输数据，可以使用3种技术。哪一种不属于这3种技术？**
   **Three techniques can be used to transfer data using I/O modules. Which one does not belong to these three techniques?**
    A. 中断驱动的 I/O (Interrupt-driven I/O)
    B. 程序控制输入/输出 (Programmed I/O)
    C. 直接 I/O 访问 (Direct I/O Access)
    D. DMA

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): C**
    *   **解析 (Explanation)**:
        *   使用I/O模块传输数据的三种主要技术是：程序控制I/O、中断驱动I/O、DMA。
        *   "直接I/O访问"不是标准的三类I/O技术之一 (Direct I/O Access is not one of the standard three techniques)。
    </details>

4. **在内存映射 I/O 方法中，主内存和 I/O 设备的地址通过________来区分。**
   **In the memory-mapped I/O method, the addresses of main memory and I/O devices are distinguished by ________.**
    A. 单个地址空间内的不同地址范围 (Different address ranges within a single address space)
    B. 不同的地址线 (Different address lines)
    C. 不同的控制线 (Different control lines)
    D. 不同的数据线 (Different data lines)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): A**
    *   **解析 (Explanation)**:
        *   **内存映射I/O**的特点是将I/O设备和主内存放在**同一个地址空间**中，通过**不同的地址范围**来区分它们 (Memory-mapped I/O uses the same address space, distinguished by different address ranges)。
    </details>

5. **以下哪些是 I/O 模块中的寄存器？**
   **Which of the following are registers in an I/O module?**
   I. 指令寄存器 (Instruction Register)
   II. 控制寄存器 (Control Register)
   III. 状态寄存器 (Status Register)
   IV. 内存地址寄存器 (Memory Address Register)
   V. 数据缓冲寄存器 (Data Buffer Register)
    A. I、II、III
    B. II、III、IV
    C. II、III、V
    D. II、III、IV、V

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): C**
    *   **解析 (Explanation)**:
        *   I/O模块中的寄存器主要包括：控制寄存器、状态寄存器、数据缓冲寄存器 (Control, Status, Data Buffer registers)。
        *   指令寄存器 (IR) 是CPU的。内存地址寄存器 (MAR) 通常在CPU或DMA中。
    </details>

6. **使用中断驱动 I/O 时，I/O 模块和 I/O 设备之间交换的信息不包括_______。**
   **When using interrupt-driven I/O, the information exchanged between the I/O module and the I/O device does not include _______.**
    A. 数据信息 (Data information)
    B. 控制信息 (Control information)
    C. 状态信息 (Status information)
    D. 中断请求信号 (Interrupt request signal)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): D**
    *   **解析 (Explanation)**:
        *   **中断请求信号**（D）是I/O模块**向CPU发送**的信号，用于通知CPU有I/O操作需要处理，这不是I/O模块和设备之间交换的信息 (Interrupt request signal is sent from I/O module to CPU, not between module and device)。
    </details>

7. **设置中断优先级仲裁逻辑的目的是________。**
   **The purpose of setting interrupt priority arbitration logic is ________.**
    A. 生成中断号 (Generate interrupt number)
    B. 确保在所有同时发生的中断请求中，优先级最高的请求能够及时得到响应 (Ensure that among all simultaneous interrupt requests, the one with the highest priority is responded to in time)
    C. 允许 CPU 分支中断服务例程 (Allow CPU to branch to interrupt service routine)
    D. 为了提高中断响应速度 (To improve interrupt response speed)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): B**
    *   **解析 (Explanation)**:
        *   中断优先级仲裁逻辑的核心作用是：当**多个中断同时发生**时，确保**优先级最高的中断请求能够及时得到响应** (Ensure highest priority request is serviced first when multiple interrupts occur)。
    </details>

8. **使用堆栈保存PC和余数，原因是______**
   **The reason for using the stack to save PC and other context is ______**
    A. 一些用于在中断点恢复当前程序的信息 (Some information used to restore the current program at the interrupt point)
    B. 发生中断时，指令不会直接执行完毕，因此中断点处的指令必须再次执行 (When an interrupt occurs, the instruction is not completed directly, so the instruction at the interrupt point must be executed again)
    C. 堆栈必须获取一些用于后进先出 (LIFO) 的信息 (The stack must get some information for LIFO)
    D. ISR 的起始地址必须通过堆栈传输 (The starting address of the ISR must be transmitted through the stack)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): A**
    *   **解析 (Explanation)**:
        *   使用堆栈保存PC（程序计数器）和寄存器状态的原因是：**保存中断点处的现场信息，以便中断处理完成后能够恢复原程序的执行** (To save context at the interrupt point so execution can resume later)。
    </details>

9. **与中断驱动的I/O相比，DMA进一步提高了CPU操作的使用率，因为_________**
   **Compared with interrupt-driven I/O, DMA further improves the utilization of CPU operations because _________**
    A. CPU 不需要保存和恢复场景 (CPU does not need to save and restore context)
    B. CPU无需干预数据传输 (CPU does not need to intervene in data transfer)
    C. CPU无需反复读取和检查状态 (CPU does not need to repeatedly read and check status)
    D. A 和 B 都成立 (Both A and B are true)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): D**
    *   **解析 (Explanation)**:
        *   DMA传输完成后才发中断，CPU不需要频繁保存和恢复现场 (A)。
        *   DMA控制器直接控制总线传输数据，CPU无需干预传输过程 (B)。
        *   因此选 D。
    </details>

10. **在DMA过程中，DMA模块何时向CPU发出中断请求信号？**
    **In the DMA process, when does the DMA module send an interrupt request signal to the CPU?**
    A. 在DMA模块传输数据块之前 (Before the DMA module transfers the data block)
    B. DMA模块完成块数据传输后 (After the DMA module completes the block data transfer)
    C. 在DMA模块停止使用总线之前 (Before the DMA module stops using the bus)
    D. DMA模块结束后占用总线 (After the DMA module finishes occupying the bus)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): B**
    *   **解析 (Explanation)**:
        *   DMA在**完成数据块传输后**，向CPU发送中断信号通知传输完成 (DMA sends interrupt after completing the block transfer)。
    </details>

11. **使用I/O模块传输数据时，可以使用三种技术。哪种技术不需要CPU干预数据传输？**
    **Three techniques can be used when transferring data using I/O modules. Which technique does not require CPU intervention in data transfer?**
    A. 中断驱动的 I/O (Interrupt-driven I/O)
    B. 程序控制输入/输出 (Programmed I/O)
    C. 直接 I/O 访问 (Direct I/O Access)
    D. DMA

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): D**
    *   **解析 (Explanation)**:
        *   只有**DMA**不需要CPU干预数据传输过程 (Only DMA does not require CPU intervention during data transfer)。
    </details>

12. **下列哪些信息是通过数据总线传输的？**
    **Which of the following information is transmitted via the data bus?**
    I. 命令词 (Command words)
    II. 状态 (Status)
    III. 中断号 (Interrupt number)
    A. 仅 I 和 II
    B. 仅 I 和 III
    C. 仅 II 和 III
    D. I、II 和 III

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): D**
    *   **解析 (Explanation)**:
        *   **命令词、状态信息、中断号**都可以通过数据总线传输 (Command words, status, and interrupt numbers can all be transmitted via the data bus)。
    </details>

13. **下列关于I/O技术的陈述哪一项是错误的？**
    **Which of the following statements about I/O technology is incorrect?**
    A. 在程序控制的 I/O 中，I/O 操作由 CPU 执行轮询程序来完成 (In programmed I/O, I/O operations are completed by CPU executing polling program)
    B. 在中断 I/O 中，I/O 操作由 CPU 执行中断服务例程来执行 (In interrupt I/O, I/O operations are executed by CPU executing ISR)
    C. 在 DMA 中，I/O 操作由 CPU 执行 DMA 传输程序来完成 (In DMA, I/O operations are completed by CPU executing DMA transfer program)
    D. 对于 SSD 等高速设备，DMA 用于输入/输出 (For high-speed devices like SSD, DMA is used for I/O)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer): C**
    *   **解析 (Explanation)**:
        *   **C错误**：在DMA中，I/O操作由**DMA控制器**直接完成，CPU只负责初始化DMA，不执行DMA传输程序 (In DMA, I/O operations are performed by the DMA controller, not by the CPU executing a program)。
    </details>

---

## 二、简答题 (Short Answer Questions)

14. **一台机器有 5 个中断源（1、2、3、4、5），硬件固有优先级为 1>2>3>4>5。现在希望通过软件掩码重新排出响应顺序 4>3>5>1>2。请：**
    **A machine has 5 interrupt sources (1, 2, 3, 4, 5) with hardware priority 1>2>3>4>5. Now we want to rearrange the response order to 4>3>5>1>2 using software masks. Please:**
    1.  写出与每个中断源对应的掩码字（位序统一为 1→2→3→4→5，1 表示屏蔽，0 表示允许）。
        (Write the mask word corresponding to each interrupt source. Bit order 1->2->3->4->5, 1 means mask, 0 means allow.)
    2.  按下图给出的触发时间（单位 µs：I2@5、I4@10、I3@30、I5@50、I1@70）画出 CPU 执行主程序与各 ISR 的时间轴，假设每个 ISR 执行 15 µs。
        (Draw the timeline of CPU executing main program and ISRs based on trigger times: I2@5, I4@10, I3@30, I5@50, I1@70. Assume each ISR takes 15 µs.)

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer)**:

        **（1）掩码字 (Mask Words)**
        | 中断源 (Source) | 目标顺序 (Target Order) | 掩码字 (Mask 1->5) | 说明 (Note) |
        |---|---|---|---|
        | 4 | 1st | `1 1 1 0 0` | 屏蔽 1,2,3 (Mask 1,2,3) |
        | 3 | 2nd | `1 1 0 1 1` | 屏蔽 1,2,4,5 (Mask 1,2,4,5) |
        | 5 | 3rd | `1 1 1 1 0` | 屏蔽 1,2,3,4 (Mask 1,2,3,4) |
        | 1 | 4th | `0 1 1 1 1` | 屏蔽 2,3,4,5 (Mask 2,3,4,5) |
        | 2 | 5th | `1 0 1 1 1` | 屏蔽 1,3,4,5 (Mask 1,3,4,5) |

        **（2）时间轴 (Timeline)**
        *   0-10: 主程序 (Main Program)
        *   10-25: **ISR 4** (I4 响应 / I4 serviced)
        *   25-40: **ISR 3** (I3 响应 / I3 serviced)
        *   40-55: **ISR 5** (I5 响应 / I5 serviced)
        *   55-70: **ISR 1** (I1 响应 / I1 serviced)
        *   70-85: **ISR 2** (I2 响应 / I2 serviced)
        *   85+: 主程序 (Main Program)
    </details>

15. **（1）在中断处理过程中，CPU何时可以向请求中断的I/O模块发送确认信号？**
    **(1) During interrupt processing, when can the CPU send an acknowledgement signal to the requesting I/O module?**
    **（2）CPU会将当前程序的信息保存到堆栈中以便恢复执行。哪些信息是重要的？**
    **(2) The CPU saves the current program's information to the stack for resumption. What information is important?**

    <details>
    <summary><strong>查看答案与解析 (View Answer & Explanation)</strong></summary>

    *   **答案 (Answer)**:
        *   **(1)**: CPU在**中断响应周期 (Interrupt Acknowledge Cycle)** 发送确认信号 (INTA)。通常在检测到中断并决定响应后。
        *   **(2)**: 重要的信息包括：
            *   **程序计数器 (PC)**: 下一条指令的地址 (Address of next instruction).
            *   **程序状态字 (PSW)**: 包含状态标志 (Status flags).
            *   **通用寄存器 (General Purpose Registers)**: 保护现场 (Context protection).
    </details>
