# 快速查询表 - 高频考点速记

> 408考试高频考点一页纸速查  
> 最后更新：2025年1月

---

## 📐 核心公式速查

### 性能相关
```
执行时间 = 指令数 × CPI × 时钟周期 = 指令数 × CPI / 频率
MIPS = 频率 / CPI / 10^6
加速比 = 优化前时间 / 优化后时间
Amdahl定律：S = 1 / [(1-P) + P/N]
```

### 流水线相关
```
执行时间 = (k + n - 1) × Δt
吞吐率 = n / [(k + n - 1) × Δt]
加速比 = (n × k) / (k + n - 1)
理想加速比 = k（当n→∞）
```

### Cache相关
```
AMAT = 命中时间 + 缺失率 × 缺失惩罚
有效访问时间 = 命中率 × Cache时间 + (1-命中率) × 主存时间
命中率 = 命中次数 / 总访问次数
```

### 磁盘相关
```
磁盘访问时间 = 寻道时间 + 旋转延迟 + 传输时间
总线带宽 = 总线宽度(bit) × 总线频率
```

---

## 🔢 数据表示速查

### 补码运算
```
补码 = 原码取反 + 1
补码表示的负值 = 2^n - 补码值
溢出判断：符号位进位 ≠ 次高位进位
```

### 浮点数（IEEE754）
```
单精度：1位符号 + 8位阶码 + 23位尾数
双精度：1位符号 + 11位阶码 + 52位尾数
单精度偏置：127，双精度偏置：1023
值 = (-1)^s × 1.f × 2^(E-偏置)
```

### 舍入模式
```
就近舍入（默认）：最接近，等距取偶
向零舍入：截断
向上舍入：向+∞
向下舍入：向-∞
```

---

## 🎯 指令系统速查

### 有效地址计算
```
立即寻址：操作数 = 指令中的常量
直接寻址：EA = A
间接寻址：EA = (A)
寄存器寻址：操作数在寄存器
基址寻址：EA = (Rb) + d
变址寻址：EA = (Ix) + d
基址+变址：EA = (Rb) + (Ix) + d
相对寻址：EA = PC + A
```

### RISC vs CISC
```
RISC：指令少、长度固定、易流水、ARM/MIPS
CISC：指令多、长度可变、难流水、x86
```

---

## 🖥️ CPU与流水线速查

### 五级流水线
```
IF(取指) → ID(译码) → EX(执行) → MEM(访存) → WB(写回)
```

### 三大冒险
```
结构冒险：资源冲突 → 哈佛结构
数据冒险：RAW/WAR/WAW → 前递/阻塞
控制冒险：分支跳转 → 分支预测/延迟槽
```

### 分支预测
```
静态：总是跳转/不跳转/BTFN
动态：2位饱和计数器（00/01/10/11）
混合：局部+全局预测器
BTB：分支目标缓冲
```

---

## 💾 存储系统速查

### Cache映射
```
直接映射：主存块i → Cache行(i % 行数)
组相联：主存块i → 第(i % 组数)组，组内N路
全相联：主存块 → 任意位置
```

### 替换算法
```
LRU：最久未使用（最常用）
FIFO：先进先出
随机：随机选择
```

### 写策略
```
写回：只写Cache，替换时写回主存（性能好）
写直达：同时写Cache和主存（一致性好）
```

### MESI协议（多核）
```
M态：Modified - 被修改，只在一个Cache
E态：Exclusive - 独占，与主存一致
S态：Shared - 共享，多个Cache相同
I态：Invalid - 无效
```

### 虚拟存储
```
页式存储：虚拟地址 → 页表 → 物理地址
页面置换：FIFO/LRU/OPT/CLOCK
TLB：快表，加速地址转换
```

---

## 🚌 总线与I/O速查

### 总线仲裁
```
集中式：链式查询/计数器定时/并行请求
分布式：设备自行协商
```

### I/O控制方式
```
程序查询：CPU轮询状态（低速）
程序中断：设备中断CPU（中速）
DMA：直接访存（高速）
```

### DMA与Cache冲突
```
问题：DMA绕过CPU → Cache数据不一致
解决：
  1. 硬件：Cache一致性协议
  2. 软件：清空/刷新Cache
  3. 混合：DMA通知Cache
```

### 中断处理
```
流程：请求 → 判优 → 响应 → 服务 → 返回
现场保存：先硬件(PC/PSW)，再软件(寄存器)
优先级：高优先级可打断低优先级
```

---

## 📊 性能优化速查

### 优化方向
```
减少指令数：算法优化、编译器优化
降低CPI：流水线、Cache、分支预测
提高主频：工艺改进、电路优化
提高并行度：超标量、多核、超线程
```

### 性能瓶颈
```
CPU瓶颈：CPI高、分支预测失败
存储瓶颈：Cache命中率低、缺页率高
I/O瓶颈：磁盘慢、网络延迟
```

---

## ⚠️ 易错点提醒

| 易错点 | 正确做法 |
|--------|---------|
| CPI与执行时间混淆 | CPI是周期数，执行时间=指令数×CPI×周期 |
| Amdahl定律忽视串行部分 | 串行部分是加速比的瓶颈 |
| Cache映射地址划分错误 | 记住：Tag-Index-Offset或Tag-Offset |
| 流水线冒险解决方案选错 | 数据冒险用前递，控制冒险用预测 |
| DMA与Cache不一致 | DMA前后需要处理Cache |
| 补码溢出判断错误 | 符号位进位 ≠ 次高位进位 |
| 浮点数舍入模式混淆 | IEEE754默认是就近舍入（等距取偶） |
| 栈帧结构顺序错误 | 高地址：返回地址→参数→旧BP→局部变量 |

---

## 🎓 考试技巧

### 计算题
1. **单位统一**：ns/μs/ms，MHz/GHz
2. **公式代入**：先写公式，再代数值
3. **检查合理性**：结果是否符合常识

### 分析题
1. **画图表**：流水线时空图、栈帧结构、Cache映射
2. **逐步分析**：标出冒险、标出冲突
3. **给出方案**：不仅说问题，还要给解决方案

### 设计题
1. **需求分析**：吞吐vs延迟、功耗vs成本
2. **方案选择**：权衡性能和复杂度
3. **定量评估**：用公式计算性能指标

---

## 📚 快速复习路线

### 30分钟速记
1. 核心公式（5分钟）
2. 三大冒险和解决方案（5分钟）
3. Cache映射和替换（5分钟）
4. 性能计算示例（5分钟）
5. 易错点检查（5分钟）

### 2小时深化
1. 每章精简版快速过一遍（30分钟）
2. 高频考题详细做一遍（60分钟）
3. 易错点重点复习（30分钟）

### 考前冲刺
1. 公式速查表背诵（10分钟）
2. 高频考题快速浏览（10分钟）
3. 易错点再检查一遍（5分钟）

---

**最后更新**：2025年1月  
**版本**：v1.0 快速查询版

