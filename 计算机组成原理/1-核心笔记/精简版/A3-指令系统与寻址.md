# A3 指令系统与寻址

> 指令集架构、寻址方式与指令分类  
> 涵盖原文：09-指令系统基础、10-寻址方式、11-指令分类、12-RISC与CISC  
> 最后更新：2025年1月

---

## 📑 目录

- [一、指令格式与操作数](#一指令格式与操作数)
- [二、地址数分类与寻址方式](#二地址数分类与寻址方式)
- [三、典型指令类别](#三典型指令类别)
- [四、RISC vs CISC 对比](#四risc-vs-cisc-对比)
- [五、备考速记](#五备考速记)

---

## 一、指令格式与操作数

### 1. 指令组成
```
┌────────────┬────────────┐
│ 操作码 OPC │ 地址码 ADD │
└────────────┴────────────┘
```
- **操作码**：指明“做什么”（运算类型、指令类别）
- **地址码**：指明“对谁做”（操作数、下一条指令）

### 2. 操作数来源
- **显式操作数**：寄存器/内存地址写在指令中
- **隐式操作数**：约定寄存器（如栈顶、累加器）
- **立即数**：字面常量嵌入指令

---

## 二、地址数分类与寻址方式

### 1. 地址数分类
| 类型 | 指令特点 | 示例 |
|------|----------|------|
| 三地址 | OPC A,B,C | `A = B op C` |
| 二地址 | OPC A,B | `A = A op B` |
| 一地址 | OPC A | `ACC = ACC op M[A]` |
| 零地址 | 堆栈式 | `PUSH`, `POP` |

### 2. 寻址方式速览
| 寻址方式 | 有效地址 EA | 特点 |
|---------|-------------|------|
| 立即 | 操作数 = 指令中的常量 | 访问速度快 |
| 直接 | `EA = A` | 访问存储器一次 |
| 间接 | `EA = (A)` | 可扩展寻址范围 |
| 寄存器 | 操作数在寄存器 | 最快 |
| 寄存器间接 | `EA = (R)` | 访问内存一次 |
| 偏移/基址 | `EA = Rb + A` | 支持数组/结构 |
| 变址 | `EA = Ix + A` | 支持循环数组 |
| 相对 | `EA = PC + A` | 常用于分支 |
| 自增/自减 | 使用后自动±1 | 适合栈/数组 |

> 牢记公式 `EA`，题目常要求“计算有效地址”

---

## 三、典型指令类别

| 类别 | 功能 | 示例 |
|------|------|------|
| 数据传送 | 在寄存器/存储之间搬运 | MOV, LOAD, STORE |
| 算术逻辑 | 加减乘除、AND/OR/XOR | ADD, SUB, MUL, AND |
| 移位循环 | 逻辑/算术/循环移位 | SHL, SHR, ROL |
| 转移控制 | 顺序改变、条件跳转 | JMP, JZ, CALL, RET |
| 输入输出 | 访问I/O | IN, OUT |
| 系统控制 | 特权、状态设置 | INT, IRET |

- **条件转移**：依赖条件码 (ZF, CF, SF, OF)
- **子程序调用**：保存返回地址，设置新栈帧

---

## 四、RISC vs CISC 对比

| 特征 | RISC | CISC |
|------|------|------|
| 指令长度 | 固定 | 可变 |
| 指令数量 | 少、简单 | 多、复杂 |
| 寻址方式 | 少 | 多 |
| 实现方式 | 硬布线控制为主 | 微程序控制为主 |
| 流水线 | 容易 | 难度大（指令长度不固定） |
| 典型代表 | ARM、MIPS | x86、VAX |

> **考试策略**：掌握“设计动机 + 关键特征 + 适用场景”

---

## 五、高频考题示例

### 例题1：有效地址计算
```
基址寻址：基址寄存器R1=1000，偏移量d=100
求：有效地址

解答：
  EA = (R1) + d = 1000 + 100 = 1100
```

### 例题2：变址寻址
```
变址寻址：基址R1=2000，变址寄存器Ix=50
求：有效地址

解答：
  EA = (R1) + (Ix) = 2000 + 50 = 2050
```

### 例题3：寄存器间接寻址
```
寄存器R2=3000，内存[3000]=5000
求：有效地址

解答：
  EA = (R2) = 3000（一次访存）
  或 EA = ((R2)) = 5000（两次访存）
```

---

## 六、备考速记

- **指令长度** = 操作码位数 + 地址字段位数 × 地址数
- **有效地址公式**：
  - 直接：EA = A
  - 寄存器：EA在寄存器中
  - 基址：EA = (Rb) + d
  - 变址：EA = (Ix) + d
  - 基址+变址：EA = (Rb) + (Ix) + d
- **控制流题**：画流程图或回溯表跟踪程序执行
- **RISC优势**：易流水、编译器友好；**CISC优势**：指令密度高、兼容性好

---

需要细节时，可回看原主题 `09~12` 的详细笔记和图示。
